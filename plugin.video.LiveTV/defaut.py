exec("import re;import base64");exec(base64.b64decode("IyEvdXNyL2Jpbi9lbnYgcHl0aG9uDQojIC0qLSBjb2Rpbmc6IFVURi04IC0qLQ0KIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQ0KIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQ0KIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcg0KIyAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLg0KIw0KIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwNCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YNCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQ0KIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLg0KIw0KIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQ0KIyBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4NCg0KDQojIyMjIyMjIyMjIyMjI0JJQkxJT1RFQ0FTIEEgSU1QT1JUQVIgRSBERUZJTklDT0VTIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmltcG9ydCB1cmxsaWIsdXJsbGliMixzeXMscmUseGJtY3BsdWdpbix4Ym1jZ3VpLHhibWNhZGRvbix4Ym1jLG9zLGpzb24sZ2xvYix0aHJlYWRpbmcsZ3ppcCx4Ym1jdmZzLGNvb2tpZWxpYixwcHJpbnQsZGF0ZXRpbWUsdGhyZWFkLHRpbWUsdXJscGFyc2UsYmFzZTY0LHBsdWdpbnRvb2xzLGNhbGVuZGFyDQppbXBvcnQgeG1sLmV0cmVlLkVsZW1lbnRUcmVlIGFzIEVUDQppbXBvcnQgZmlsZVV0aWxzIGFzIGZ1DQoNCmZyb20gcmVzb3VyY2VzLmxpYiBpbXBvcnQgY29tbW9uDQpmcm9tIHVybGxpYjIgaW1wb3J0IFJlcXVlc3QsIHVybG9wZW4NCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUNCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwDQpmcm9tIHJlc291cmNlcy5saWIgaW1wb3J0IERvd25sb2FkZXIgI0VuZW45MiBjbGFzcw0KZnJvbSByZXNvdXJjZXMubGliIGltcG9ydCBQbGF5ZXINCmZyb20gcmVzb3VyY2VzLmxpYiBpbXBvcnQgVFZBcmNoaXZlDQpmcm9tIHQwbW0wLmNvbW1vbi5uZXQgaW1wb3J0IE5ldA0KZnJvbSB0MG1tMC5jb21tb24uYWRkb24gaW1wb3J0IEFkZG9uDQpmcm9tIHQwbW0wLmNvbW1vbi5uZXQgaW1wb3J0IEh0dHBSZXNwb25zZQ0KZnJvbSByZXNvdXJjZXMubGliIGltcG9ydCBVUkxSZXNvbHZlck1lZGlhDQpmcm9tIHJlc291cmNlcy5saWIgaW1wb3J0IFRyYWt0DQpmcm9tIHJlc291cmNlcy5saWIgaW1wb3J0IERhdGFiYXNlDQpmcm9tIHVuaWNvZGVkYXRhIGltcG9ydCBub3JtYWxpemUNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBDT05TVEFOVEVTICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmdsb2JhbCBnX3RpbWVyDQpnbG9iYWwgdGVsZXZpc2lvb25pbGluaw0KZ2xvYmFsIGZpbG1pbGluaw0KZ2xvYmFsIGFuZG1lbGluaw0KZ2xvYmFsIHV1ZW5kdXNsaW5rDQpnbG9iYWwgbGVoZWt5bGcNCmdsb2JhbCB1dWVuZHVzZWQNCmdsb2JhbCB2YW5lbWFsdWtrDQpnbG9iYWwgdmVyc2lvbg0KZ2xvYmFsIG1vZGUNCg0KQWRkb25UaXRsZSA9ICJMaXZlIXQgVFYiDQptb2RlID0gMzMzMw0KdmVyc2lvbiA9ICIiDQprYXN1dGFqYW5pbWkgPSAiIg0Kc2FsYXNvbmEgPSAiIg0KbGVoZWt5bGcgPSAiIg0KdmFuZW1ha29vZCA9ICIiDQp2YW5lbWFsdWtrID0gIiINCnRlbGV2aXNpb29uaWxpbmsgPSAiIg0KZmlsbWlsaW5rID0gIiINCmFuZG1lbGluayA9ICIiDQoNCl9fQURET05fSURfXwk9IHhibWNhZGRvbi5BZGRvbigpLmdldEFkZG9uSW5mbygiaWQiKQ0KX19BRERPTl9fCT0geGJtY2FkZG9uLkFkZG9uKF9fQURET05fSURfXykNCl9fQURET05WRVJTSU9OX18gPSBfX0FERE9OX18uZ2V0QWRkb25JbmZvKCd2ZXJzaW9uJykNCl9fQURET05fRk9MREVSX18JPSBfX0FERE9OX18uZ2V0QWRkb25JbmZvKCdwYXRoJykNCl9fU0VUVElOR19fCT0geGJtY2FkZG9uLkFkZG9uKCkuZ2V0U2V0dGluZw0KX19BUlRfRk9MREVSX18JPSBfX0FERE9OX0ZPTERFUl9fICsgJy9yZXNvdXJjZXMvaW1nLycNCl9fRkFOQVJUX18gCQk9IG9zLnBhdGguam9pbihfX0FERE9OX0ZPTERFUl9fLCdmYW5hcnQuanBnJykNCl9JQ09OXyA9IF9fQURET05fRk9MREVSX18gKyAnL2ljb24ucG5nJw0KX19TS0lOX18gPSAndjInDQpfX1NJVEVCRF9fID0gYmFzZTY0LnVybHNhZmVfYjY0ZGVjb2RlKCdhSFIwY0RvdkwzZDNkeTV3WTNSbFkydHpaWEoyTG1OdmJTOUhjblZ3YjB0dlpHa3ZVRWhRTHc9PScpDQpfX1NJVEVBZGRvbl9fID0gYmFzZTY0LnVybHNhZmVfYjY0ZGVjb2RlKCdhSFIwY0RvdkwzZDNkeTV3WTNSbFkydHpaWEoyTG1OdmJTOUhjblZ3YjB0dlpHa3ZRV1JrYjI0dicpDQpfX0VQR19fID0gX19BRERPTl9fLmdldFNldHRpbmcoImxpc3RhX2VwZyIpDQpfX0ZPTERFUl9FUEdfXyA9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly91c2VyZGF0YS9hZGRvbl9kYXRhL3BsdWdpbi52aWRlby5MaXZlVFYvJykuZGVjb2RlKCd1dGYtOCcpLCAnZXBnbGl2ZWl0JykNCl9fQ09PS0lFX0ZJTEVfXyA9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly91c2VyZGF0YS9hZGRvbl9kYXRhL3BsdWdpbi52aWRlby5MaXZlVFYvJykuZGVjb2RlKCd1dGYtOCcpLCAnY29va2llLmxpdmVpdHR2JykNCl9fSEVBREVSU19fID0geydVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwLjExOyBydjo0My4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzQzLjAnLCAnQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LCovKjtxPTAuOCd9DQpjaGVja19sb2dpbiA9IHt9DQpoZWFkZXJzID0geydVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwLjExOyBydjo0My4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzQzLjAnLCAnQWNjZXB0LUNoYXJzZXQnOiAndXRmLTg7cT0wLjcsKjtxPTAuNycsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9DQpfX1BBU1RBX0RBRE9TX18gPSBBZGRvbihfX0FERE9OX0lEX18pLmdldF9wcm9maWxlKCkuZGVjb2RlKCJ1dGYtOCIpDQpfX1BBU1RBX0ZJTE1FU19fID0geGJtYy50cmFuc2xhdGVQYXRoKF9fQURET05fXy5nZXRTZXR0aW5nKCdiaWJsaW90ZWNhRmlsbWVzJykpDQpfX1BBU1RBX1NFUklFU19fID0geGJtYy50cmFuc2xhdGVQYXRoKF9fQURET05fXy5nZXRTZXR0aW5nKCdiaWJsaW90ZWNhU2VyaWVzJykpDQpfX0FQSV9fID0gYmFzZTY0LnVybHNhZmVfYjY0ZGVjb2RlKCdhSFIwY0RvdkwyMXdZWEJwTG0xc0x3PT0nKQ0KX19BUElfU0lURV9fID0gYmFzZTY0LnVybHNhZmVfYjY0ZGVjb2RlKCdhSFIwY0RvdkwyMXdZWEJwTG0xc0wyRndhUzg9JykNCl9fU0lURV9fID0gYmFzZTY0LnVybHNhZmVfYjY0ZGVjb2RlKCdhSFIwY0RvdkwyMXljR2x5WVdONUxtZHhMdz09JykNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMJCQkJCQkJICBJbmljaWFyIEFkZG9uCQkJCQkJCQkJCSAgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KZGVmIF9fQUxFUlRBX18odGV4dDE9IiIsdGV4dDI9IiIsdGV4dDM9IiIpOg0KCWlmIHRleHQzPT0iIjogeGJtY2d1aS5EaWFsb2coKS5vayh0ZXh0MSx0ZXh0MikNCgllbGlmIHRleHQyPT0iIjogeGJtY2d1aS5EaWFsb2coKS5vaygiIix0ZXh0MSkNCgllbHNlOiB4Ym1jZ3VpLkRpYWxvZygpLm9rKHRleHQxLHRleHQyLHRleHQzKQ0KDQpkZWYgbWVudSgpOg0KCWlmIChub3QgX19BRERPTl9fLmdldFNldHRpbmcoJ2xvZ2luX25hbWUnKSBvciBub3QgX19BRERPTl9fLmdldFNldHRpbmcoJ2xvZ2luX3Bhc3N3b3JkJykpOg0KCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdQcmVjaXNhIGRlIGRlZmluaXIgbyBzZXUgVXRpbGl6YWRvciBlIFNlbmhhJykNCgkJYWJyaXJEZWZpbmluY29lcygpDQoJCQ0KCWVsc2U6DQoJCWNoZWNrX2xvZ2luID0gbG9naW4oKQ0KCQlkYXRhYmFzZSA9IERhdGFiYXNlLmlzRXhpc3RzKCkNCgkJaWYgY2hlY2tfbG9naW5bJ3VzZXInXVsnbm9tZSddICE9ICcnOg0KCQkJaWYgY2hlY2tfbG9naW5bJ3N1Y2Vzc28nXVsncmVzdWx0YWRvJ10gPT0gJ3llcyc6DQoJCQkJbWVudXMgPSB7DQoJCQkJCSdub21lJzogJycsDQoJCQkJCSdsb2dvJzogJycsDQoJCQkJCSdsaW5rJzogJycsDQoJCQkJCSd0aXBvJzogJycsDQoJCQkJCSdzZW5oYSc6ICcnDQoJCQkJCX0NCgkJCQltZW51czEgPSB7DQoJCQkJCSdub21lJzogJycsDQoJCQkJCSdsb2dvJzogJycsDQoJCQkJCSdsaW5rJzogJycsDQoJCQkJCSd0aXBvJzogJycsDQoJCQkJCSdzZW5oYSc6ICcnDQoJCQkJCX0NCgkJCQltZW51czMgPSB7DQoJCQkJCSdub21lJzogJycsDQoJCQkJCSdsb2dvJzogJycsDQoJCQkJCSdsaW5rJzogJycsDQoJCQkJCSd0aXBvJzogJycsDQoJCQkJCSdzZW5oYSc6ICcnDQoJCQkJCX0NCgkJCQltZW51czQgPSB7DQoJCQkJCSdub21lJzogJycsDQoJCQkJCSdsb2dvJzogJycsDQoJCQkJCSdsaW5rJzogJycsDQoJCQkJCSd0aXBvJzogJycsDQoJCQkJCSdzZW5oYSc6ICcnDQoJCQkJCX0NCgkJCQltZW51czUgPSB7DQoJCQkJCSdub21lJzogJycsDQoJCQkJCSdsb2dvJzogJycsDQoJCQkJCSdsaW5rJzogJycsDQoJCQkJCSd0aXBvJzogJycsDQoJCQkJCSdzZW5oYSc6ICcnDQoJCQkJCX0NCgkJCQlpZiBjaGVja19sb2dpblsnZGF0YWZpbSddWydkYXRhJ10gIT0gIk1lbWJybyBBdGl2byBTZW0gRG9hY2FvISI6DQoJCQkJCWlmIGNoZWNrX2xvZ2luWyd1c2VyJ11bJ2RpYXMnXSA9PSAnNScgb3IgY2hlY2tfbG9naW5bJ3VzZXInXVsnZGlhcyddID09ICc0JyBvciBjaGVja19sb2dpblsndXNlciddWydkaWFzJ10gPT0gJzMnIG9yIGNoZWNrX2xvZ2luWyd1c2VyJ11bJ2RpYXMnXSA9PSAnMicgb3IgY2hlY2tfbG9naW5bJ3VzZXInXVsnZGlhcyddID09ICcxJzoNCgkJCQkJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ0ZhbHRhbSAnK2NoZWNrX2xvZ2luWyd1c2VyJ11bJ2RpYXMnXSsnIGRpYXMgcGFyYSBvIHNlcnZpY28gZXhwaXJhci4nKQ0KCQkJCQlpZiBjaGVja19sb2dpblsndXNlciddWydkaWFzJ10gPT0gJzAnOg0KCQkJCQkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnw4kgaG9qZSBxdWUgbyBzZXUgc2VydmnDp28gZXhwaXJhLiBGYcOnYSBhIHN1YSBSZW5vdmHDp8Ojby4gQ2FzbyBuw6NvIGZhw6dhIGlyw6EgZmljYXIgSW5hY3Rpdm8gSG9qZS4nKQ0KCQkJCWlmIGNoZWNrX2xvZ2luWydkYXRhZmltJ11bJ2RhdGEnXSAhPSAiTWVtYnJvIEF0aXZvIFNlbSBEb2FjYW8hIjoNCgkJCQkJbWVudXMyID0gew0KCQkJCQknbm9tZSc6ICcnLA0KCQkJCQknbG9nbyc6ICcnLA0KCQkJCQknbGluayc6ICcnLA0KCQkJCQkndGlwbyc6ICcnLA0KCQkJCQknc2VuaGEnOiAnJw0KCQkJCQl9DQoJCQkJCSNfbGlzdGF1c2VyID0gY2hlY2tfbG9naW5bJ3VzZXInXVsnbGlzdGEnXQ0KCQkJCQkjYW5kbWVsaW5rID0gX2xpc3RhdXNlcisncGFuZWxfYXBpLnBocD91c2VybmFtZT0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikrJyZwYXNzd29yZD0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpDQoJCQkJCSNtZW51czJbJ25vbWUnXSA9ICJWZXIgSW5mb3JtYWNhbyBkYSBDb250YSINCgkJCQkJI21lbnVzMlsnbG9nbyddID0gX19TSVRFQWRkb25fXysiSW1hZ2Vucy9lc3RhZG9tZW1icm8ucG5nIg0KCQkJCQkjbWVudXMyWydsaW5rJ10gPSBhbmRtZWxpbmsNCgkJCQkJI21lbnVzMlsndGlwbyddID0gImVzdGFkbyINCgkJCQkJI21lbnVzMlsnc2VuaGEnXSA9ICIiDQoJCQkJCSNtZW51czJbJ2ZhbmFydCddID0gX19TSVRFQWRkb25fXysiSW1hZ2Vucy9lc3RhZG9fZmFuYXJ0LnBuZyINCgkJCQkJI2NoZWNrX2xvZ2luWydtZW51cyddLmFwcGVuZChtZW51czIpDQoJCQkJDQoJCQkJDQoJCQkJI21lbnVzNFsnbm9tZSddID0gIkxpbXBhciBDYWNoZSINCgkJCQkjbWVudXM0Wydsb2dvJ10gPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2VzdGFkb21lbWJyby5wbmciDQoJCQkJI21lbnVzNFsnbGluayddID0gJ2Fkc2ZzZGZzZCcNCgkJCQkjbWVudXM0Wyd0aXBvJ10gPSAibGltcGFyY2FjaGUiDQoJCQkJI21lbnVzNFsnc2VuaGEnXSA9ICIiDQoJCQkJI21lbnVzNFsnZmFuYXJ0J10gPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2VzdGFkb19mYW5hcnQucG5nIg0KCQkJCSNjaGVja19sb2dpblsnbWVudXMnXS5hcHBlbmQobWVudXM0KQ0KCQkJCSNtZW51czVbJ25vbWUnXSA9ICJMaW1wYXIgVHVkbyBHcmF2YWRvIg0KCQkJCSNtZW51czVbJ2xvZ28nXSA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvZXN0YWRvbWVtYnJvLnBuZyINCgkJCQkjbWVudXM1WydsaW5rJ10gPSAnc2Rmc2Rmc2QnDQoJCQkJI21lbnVzNVsndGlwbyddID0gImxpbXBhcnR1ZG8iDQoJCQkJI21lbnVzNVsnc2VuaGEnXSA9ICIiDQoJCQkJI21lbnVzNVsnZmFuYXJ0J10gPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2VzdGFkb19mYW5hcnQucG5nIg0KCQkJCSNjaGVja19sb2dpblsnbWVudXMnXS5hcHBlbmQobWVudXM1KQ0KCQkJCQ0KCQkJCW1lbnVzNVsnbm9tZSddID0gIkRlZmluacOnw7VlcyINCgkJCQltZW51czVbJ2xvZ28nXSA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvZGVmaW5pY29lcy5wbmciDQoJCQkJbWVudXM1WydsaW5rJ10gPSAnc2Rmc2Rmc2QnDQoJCQkJbWVudXM1Wyd0aXBvJ10gPSAiZGVmaW5pY29lcyINCgkJCQltZW51czVbJ3NlbmhhJ10gPSAiIg0KCQkJCW1lbnVzNVsnZmFuYXJ0J10gPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXNfZmFuYXJ0LnBuZyINCgkJCQljaGVja19sb2dpblsnbWVudXMnXS5hcHBlbmQobWVudXM1KQ0KCQkJCQ0KCQkJCSNtZW51czNbJ25vbWUnXSA9ICJQZXNxdWlzYSINCgkJCQkjbWVudXMzWydsb2dvJ10gPSBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAncGVzcXVpc2EucG5nJykNCgkJCQkjbWVudXMzWydsaW5rJ10gPSBfX0FQSV9TSVRFX18NCgkJCQkjbWVudXMzWyd0aXBvJ10gPSAicGVzcXVpc2EiDQoJCQkJI21lbnVzM1snc2VuaGEnXSA9ICIiDQoJCQkJI21lbnVzM1snZmFuYXJ0J10gPSBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJykNCgkJCQkjY2hlY2tfbG9naW5bJ21lbnVzJ10uYXBwZW5kKG1lbnVzMykNCgkJCQkNCgkJCQltZW51czFbJ25vbWUnXSA9ICJOb3ZpZGFkZXMiDQoJCQkJbWVudXMxWydsb2dvJ10gPSBjaGVja19sb2dpblsnaW5mbyddWydsb2dvMiddDQoJCQkJbWVudXMxWydsaW5rJ10gPSBjaGVja19sb2dpblsnaW5mbyddWydsaW5rMiddDQoJCQkJbWVudXMxWyd0aXBvJ10gPSAibm92aWRhZGVzIg0KCQkJCW1lbnVzMVsnc2VuaGEnXSA9ICIiDQoJCQkJbWVudXMxWydmYW5hcnQnXSA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvbm92aWRhZGVzX2ZhbmFydC5wbmciDQoJCQkJY2hlY2tfbG9naW5bJ21lbnVzJ10uYXBwZW5kKG1lbnVzMSkNCgkJCQkNCgkJCQlNZW51X2luaWNpYWwoY2hlY2tfbG9naW4sRmFsc2UsJycpDQoJCQllbGlmIGNoZWNrX2xvZ2luWydzdWNlc3NvJ11bJ3Jlc3VsdGFkbyddID09ICd1dGlsaXphZG9yJzoNCgkJCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdVdGlsaXphZG9yIGluY29ycmV0by4nKQ0KCQkJCWFkZERpcignQWx0ZXJhciBEZWZpbmnDp8O1ZXMnLCAndXJsJywgTm9uZSwgMTAwMCwgJ01pbmlhdHVyYScsIF9fU0lURUFkZG9uX18rIkltYWdlbnMvZGVmaW5pY29lcy5wbmciLCcnLCcnLCcnLCcnLF9fU0lURUFkZG9uX18rIkltYWdlbnMvZGVmaW5pY29lc19mYW5hcnQucG5nIikNCgkJCQlhZGREaXIoJ0VudHJhciBub3ZhbWVudGUnLCAndXJsJywgTm9uZSwgTm9uZSwgJ01pbmlhdHVyYScsIF9fU0lURUFkZG9uX18rIkltYWdlbnMvcmV0cm9jZWRlci5wbmciLCcnLCcnLCcnLCcnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKSkNCgkJCQl2aXN0YV9tZW51KCkNCgkJCWVsaWYgY2hlY2tfbG9naW5bJ3N1Y2Vzc28nXVsncmVzdWx0YWRvJ10gPT0gJ3NlbmhhJzoNCgkJCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdTZW5oYSBpbmNvcnJldGEuJykNCgkJCQlhZGREaXIoJ0FsdGVyYXIgRGVmaW5pw6fDtWVzJywgJ3VybCcsIE5vbmUsIDEwMDAsICdNaW5pYXR1cmEnLCBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXMucG5nIiwnJywnJywnJywnJyxfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXNfZmFuYXJ0LnBuZyIpDQoJCQkJYWRkRGlyKCdFbnRyYXIgbm92YW1lbnRlJywgJ3VybCcsIE5vbmUsIE5vbmUsICdNaW5pYXR1cmEnLCBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL3JldHJvY2VkZXIucG5nIiwnJywnJywnJywnJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJykpDQoJCQkJdmlzdGFfbWVudSgpDQoJCQllbGlmIGNoZWNrX2xvZ2luWydzdWNlc3NvJ11bJ3Jlc3VsdGFkbyddID09ICdhdGl2byc6DQoJCQkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnTyBlc3RhZG8gZG8gc2V1IFV0aWxpemFkb3IgZW5jb250cmEtc2UgSW5hY3Rpdm8uIFBhcmEgc2FiZXIgbWFpcyBpbmZvcm1hw6fDtWVzIGVudHJlIGVtIGNvbnRhY3RvIHBlbG8gZW1haWwgbGl2ZWl0a29kaUBnbWFpbC5jb20uJykNCgkJCQl2aXN0YV9tZW51KCkNCgkJCWVsc2U6DQoJCQkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnTsOjbyBmb2kgcG9zc8OtdmVsIGFicmlyIGEgcMOhZ2luYS4gUG9yIGZhdm9yIHRlbnRlIG5vdmFtZW50ZS4nKQ0KCQkJCXZpc3RhX21lbnUoKQ0KCQllbHNlOg0KCQkJYWRkRGlyKCdBbHRlcmFyIERlZmluacOnw7VlcycsICd1cmwnLCBOb25lLCAxMDAwLCAnTWluaWF0dXJhJywgX19TSVRFQWRkb25fXysiSW1hZ2Vucy9kZWZpbmljb2VzLnBuZyIsJycsJycsJycsJycsX19TSVRFQWRkb25fXysiSW1hZ2Vucy9kZWZpbmljb2VzX2ZhbmFydC5wbmciKQ0KCQkJYWRkRGlyKCdFbnRyYXIgbm92YW1lbnRlJywgJ3VybCcsIE5vbmUsIE5vbmUsICdNaW5pYXR1cmEnLCBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL3JldHJvY2VkZXIucG5nIiwnJywnJywnJywnJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJykpDQoJCQl2aXN0YV9tZW51KCkNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMJCQkJCQkJICBMb2dpbiBBZGRvbgkJCQkJCQkJCQkgICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpkZWYgbWluaGFDb250YShkYXRhX3VzZXIsZXN0aWxvKToNCglhZGREaXIoZGF0YV91c2VyLCAndXJsJywgTm9uZSwgTm9uZSwgZXN0aWxvLCBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2VzdGFkb21lbWJyby5wbmciLCcnLCcnLCcnLCcnLF9fU0lURUFkZG9uX18rIkltYWdlbnMvZXN0YWRvX2ZhbmFydC5wbmciKQ0KCWFkZERpcignRGVmaW5pw6fDtWVzJywgJ3VybCcsIE5vbmUsIDEwMDAsIGVzdGlsbywgX19TSVRFQWRkb25fXysiSW1hZ2Vucy9kZWZpbmljb2VzLnBuZyIsJycsJycsJycsJycsX19TSVRFQWRkb25fXysiSW1hZ2Vucy9kZWZpbmljb2VzX2ZhbmFydC5wbmciKQ0KCXZpc3RhX21lbnUoKQ0KDQpkZWYgbG9naW4oKToNCglpbmZvcm1hY29lcyA9IHsNCgkJJ3VzZXInIDogew0KCQkJJ25vbWUnOiAnJywNCgkJCSdub21lJzogJycsDQoJCQknZW1haWwnOiAnJywNCgkJCSd0aXBvJzogJycsDQoJCQknZGlhcyc6ICcnLA0KCQkJJ2xpc3RhJzogJycsDQoJCQknbGlzdGFub3ZhJzogJycsDQoJCQknZXBnJzogJycsDQoJCQkndGlwb2xvZ2lhJzogJycsDQoJCQknc2Vydmlkb3InOiAnJywNCgkJCSdzZW5oYWFkdWx0byc6ICcnDQoJCX0sDQoJCSdzdWNlc3NvJyA6ew0KCQkJJ3Jlc3VsdGFkbyc6ICcnDQoJCX0sDQoJCSdtYWMnIDp7DQoJCQkndGVtJzogJycNCgkJfSwNCgkJJ21hY2VzdGFkbycgOnsNCgkJCSdtYWMnOiAnJw0KCQl9LA0KCQknZGF0YWZpbScgOnsNCgkJCSdkYXRhJzogJycNCgkJfSwNCgkJJ2luZm8nIDogew0KCQkJJ2VwZyc6ICcnLA0KCQkJJ2xvZ28nOiAnJywNCgkJCSdsb2dvMic6ICcnLA0KCQkJJ2xvZyc6ICcnLA0KCQkJJ3VzZXInOiAnJywNCgkJCSdwYXNzd29yZCc6ICcnLA0KCQkJJ2xpbmsyJzogJycsDQoJCQknbGluayc6ICcnDQoJCX0sDQoJCSdtZW51cyc6IFtdDQoJfSAjIA0KCQ0KCXRyeToNCgkJbmV0ID0gTmV0KCkNCgkJbmV0LnNldF9jb29raWVzKF9fQ09PS0lFX0ZJTEVfXykNCgkJZGFkb3MgPSB7J3VzZXJuYW1lJzogX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSwgJ3Bhc3N3b3JkJzogX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX3Bhc3N3b3JkIil9DQoJCQ0KCQljb2RpZ29fZm9udGUgPSBuZXQuaHR0cF9QT1NUKF9fU0lURUJEX18rJ0xvZ2luQWRkb24yLnBocCcsZm9ybV9kYXRhPWRhZG9zLGhlYWRlcnM9X19IRUFERVJTX18pLmNvbnRlbnQNCgkJZWxlbXMgPSBFVC5mcm9tc3RyaW5nKGNvZGlnb19mb250ZSkNCgkJZm9yIGNoaWxkIGluIGVsZW1zOg0KCQkJaWYoY2hpbGQudGFnID09ICdzdWNlc3NvJyk6DQoJCQkJaW5mb3JtYWNvZXNbJ3N1Y2Vzc28nXVsncmVzdWx0YWRvJ10gPSBjaGlsZC50ZXh0DQoJCQllbGlmKGNoaWxkLnRhZyA9PSAndXNlcicpOg0KCQkJCWZvciBkIGluIGNoaWxkOg0KCQkJCQlpZihkLnRhZyA9PSAnTm9tZScpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ3VzZXInXVsnbm9tZSddID0gZC50ZXh0DQoJCQkJCWVsaWYoZC50YWcgPT0gJ0VQRycpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ3VzZXInXVsnZXBnJ10gPSBkLnRleHQNCgkJCQkJZWxpZihkLnRhZyA9PSAnVGlwb2xvZ2lhJyk6DQoJCQkJCQlpbmZvcm1hY29lc1sndXNlciddWyd0aXBvbG9naWEnXSA9IGQudGV4dA0KCQkJCQllbGlmKGQudGFnID09ICdFbWFpbCcpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ3VzZXInXVsnZW1haWwnXSA9IGQudGV4dA0KCQkJCQllbGlmKGQudGFnID09ICdTZXJ2aWRvcicpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ3VzZXInXVsnc2Vydmlkb3InXSA9IGQudGV4dA0KCQkJCQllbGlmKGQudGFnID09ICdUaXBvJyk6DQoJCQkJCQlpbmZvcm1hY29lc1sndXNlciddWyd0aXBvJ10gPSBkLnRleHQNCgkJCQkJZWxpZihkLnRhZyA9PSAnZGlhcycpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ3VzZXInXVsnZGlhcyddID0gZC50ZXh0DQoJCQkJCWVsaWYoZC50YWcgPT0gJ0xpc3RhJyk6DQoJCQkJCQlpbmZvcm1hY29lc1sndXNlciddWydsaXN0YSddID0gZC50ZXh0DQoJCQkJCWVsaWYoZC50YWcgPT0gJ0xpc3RhTm92YScpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ3VzZXInXVsnbGlzdGFub3ZhJ10gPSBkLnRleHQNCgkJCQkJZWxpZihkLnRhZyA9PSAnRGF0YUZpbScpOg0KCQkJCQkJdHJ5Og0KCQkJCQkJCWluZm9ybWFjb2VzWydkYXRhZmltJ11bJ2RhdGEnXSA9ICJNZW1icm8gQXRpdm8gYXTDqSAiKyBkLnRleHQNCgkJCQkJCWV4Y2VwdDoNCgkJCQkJCQlpbmZvcm1hY29lc1snZGF0YWZpbSddWydkYXRhJ10gPSAiTWVtYnJvIEF0aXZvIFNlbSBEb2FjYW8hIg0KCQkJCQllbGlmKGQudGFnID09ICdTZW5oYUFkdWx0b3MnKToNCgkJCQkJCWluZm9ybWFjb2VzWyd1c2VyJ11bJ3NlbmhhYWR1bHRvJ10gPSBkLnRleHQJCQ0KCQkJZWxpZihjaGlsZC50YWcgPT0gJ2luZm8nKToNCgkJCQlmb3IgZSBpbiBjaGlsZDoNCgkJCQkJaWYoZS50YWcgPT0gJ2VwZycpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ2luZm8nXVsnZXBnJ10gPSBlLnRleHQNCgkJCQkJZWxpZihlLnRhZyA9PSAnbG9nbycpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ2luZm8nXVsnbG9nbyddID0gZS50ZXh0DQoJCQkJCWVsaWYoZS50YWcgPT0gJ2xpbmsnKToNCgkJCQkJCWluZm9ybWFjb2VzWydpbmZvJ11bJ2xpbmsnXSA9IGUudGV4dA0KCQkJCQllbGlmKGUudGFnID09ICdsb2dvMicpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ2luZm8nXVsnbG9nbzInXSA9IGUudGV4dA0KCQkJCQllbGlmKGUudGFnID09ICdsaW5rMicpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ2luZm8nXVsnbGluazInXSA9IGUudGV4dA0KCQkJCQllbGlmKGUudGFnID09ICdsb2cnKToNCgkJCQkJCWluZm9ybWFjb2VzWydpbmZvJ11bJ2xvZyddID0gZS50ZXh0DQoJCQkJCWVsaWYoZS50YWcgPT0gJ3VzZXInKToNCgkJCQkJCWluZm9ybWFjb2VzWydpbmZvJ11bJ3VzZXInXSA9IGUudGV4dA0KCQkJCQllbGlmKGUudGFnID09ICdwYXNzd29yZCcpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ2luZm8nXVsncGFzc3dvcmQnXSA9IGUudGV4dA0KCQkJZWxpZihjaGlsZC50YWcgPT0gJ21lbnVzJyk6DQoJCQkJbWVudSA9IHsNCgkJCQkJCSdub21lJzogJycsDQoJCQkJCQknbG9nbyc6ICcnLA0KCQkJCQkJJ2xpbmsnOiAnJywNCgkJCQkJCSd0aXBvJzogJycsDQoJCQkJCQknc2VuaGEnOiAnJywNCgkJCQkJCSdmYW5hcnQnOiAnJw0KCQkJCQl9DQoJCQkJZm9yIGcgaW4gY2hpbGQ6DQoJCQkJCWlmKGcudGFnID09ICdub21lJyk6DQoJCQkJCQltZW51Wydub21lJ10gPSBnLnRleHQJDQoJCQkJCWVsaWYoZy50YWcgPT0gJ2xvZ28nKToNCgkJCQkJCW1lbnVbJ2xvZ28nXSA9IGcudGV4dA0KCQkJCQllbGlmKGcudGFnID09ICdsaW5rJyk6DQoJCQkJCQltZW51WydsaW5rJ10gPSBnLnRleHQNCgkJCQkJZWxpZihnLnRhZyA9PSAndGlwbycpOg0KCQkJCQkJbWVudVsndGlwbyddID0gZy50ZXh0CQ0KCQkJCQllbGlmKGcudGFnID09ICdmYW5hcnQnKToNCgkJCQkJCW1lbnVbJ2ZhbmFydCddID0gZy50ZXh0DQoJCQkJCWVsaWYoZy50YWcgPT0gJ3NlbmhhJyk6DQoJCQkJCQltZW51WydzZW5oYSddID0gaW5mb3JtYWNvZXNbJ3VzZXInXVsnc2VuaGFhZHVsdG8nXQ0KCQkJCWlmIGluZm9ybWFjb2VzWydkYXRhZmltJ11bJ2RhdGEnXSA9PSAiTWVtYnJvIEF0aXZvIFNlbSBEb2FjYW8hIjoNCgkJCQkJaWYgbWVudVsnbm9tZSddICE9ICdBZHVsdG9zJyBhbmQgbWVudVsnbm9tZSddICE9ICdUViBBcmNoaXZlJzoNCgkJCQkJCWluZm9ybWFjb2VzWydtZW51cyddLmFwcGVuZChtZW51KQ0KCQkJCWVsc2U6DQoJCQkJCWlmIG1lbnVbJ25vbWUnXSA9PSAnVFYgQXJjaGl2ZSc6DQoJCQkJCQltZW51Wydub21lJ10gPSBtZW51Wydub21lJ10rIiAoVmVyIG8gcXVlIHBhc3NvdSkiDQoJCQkJCQltZW51Wyd0aXBvJ10gPSAidHZhcmNoaXZlIg0KCQkJCQkJDQoJCQkJCWluZm9ybWFjb2VzWydtZW51cyddLmFwcGVuZChtZW51KQkJDQoJCQllbHNlOg0KCQkJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ07Do28gc2VpIG8gcXVlIGVzdG91IGEgbGVyLicpDQoJZXhjZXB0Og0KCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdOw6NvIGZvaSBwb3Nzw612ZWwgYWJyaXIgYSBww6FnaW5hLiBQb3IgZmF2b3IgdGVudGUgbm92YW1lbnRlLicpDQoJCXJldHVybiBpbmZvcm1hY29lcw0KDQoJcmV0dXJuIGluZm9ybWFjb2VzDQoNCmRlZiBkZWZpbmljb2VzKHVybCx0aXBvdXNlcixzZXJ2dXNlcik6DQoJaWYgdGlwb3VzZXIgIT0gJ1Rlc3RlJyBhbmQgc2VydnVzZXIgIT0gJ1Rlc3RlJzoNCgkJYW5kbWVsaW5rID0gdXJsKydwYW5lbF9hcGkucGhwP3VzZXJuYW1lPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSsnJnBhc3N3b3JkPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX3Bhc3N3b3JkIikNCgkJYWRkRGlyKCdWZXIgSW5mb3JtYWNhbyBkYSBDb250YScsIGFuZG1lbGluaywgTm9uZSwgMzMzNSwgJ0xpc3RhJyxfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2VzdGFkb21lbWJyby5wbmciLCcnLCcnLCcnLCcnLF9fU0lURUFkZG9uX18rIkltYWdlbnMvZXN0YWRvX2ZhbmFydC5wbmciKQ0KCWVsc2U6DQoJCWFkZERpcignQ29udGEgZGUgVGVzdGUnLCAndXJsJywgTm9uZSwgTm9uZSwgJ01pbmlhdHVyYScsIF9fU0lURUFkZG9uX18rIkltYWdlbnMvcmV0cm9jZWRlci5wbmciLCcnLCcnLCcnLCcnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKSkNCglhZGREaXIoJ0xpbXBhciBDYWNoZScsICd5dHl0eScsIE5vbmUsIDUwMDAsICdMaXN0YScsX19TSVRFQWRkb25fXysiSW1hZ2Vucy9kZWZpbmljb2VzLnBuZyIsJycsJycsJycsJycsX19TSVRFQWRkb25fXysiSW1hZ2Vucy9kZWZpbmljb2VzX2ZhbmFydC5wbmciKQ0KCWFkZERpcignTGltcGFyIFRvZGEgYSBDYWNoZScsICdzZGZzZGYnLCBOb25lLCA2MDAwLCAnTGlzdGEnLF9fU0lURUFkZG9uX18rIkltYWdlbnMvZGVmaW5pY29lcy5wbmciLCcnLCcnLCcnLCcnLF9fU0lURUFkZG9uX18rIkltYWdlbnMvZGVmaW5pY29lc19mYW5hcnQucG5nIikNCglhZGREaXIoJ0RlZmluacOnw7VlcyBBZGRvbicsICdzZGZzZGYnLCBOb25lLCAzMDAwLCAnTGlzdGEnLF9fU0lURUFkZG9uX18rIkltYWdlbnMvZGVmaW5pY29lcy5wbmciLCcnLCcnLCcnLCcnLF9fU0lURUFkZG9uX18rIkltYWdlbnMvZGVmaW5pY29lc19mYW5hcnQucG5nIikNCg0KZGVmIGxvZ2luMigpOg0KCXJlc3VsdGFkbyA9IEZhbHNlDQoJdHJ5Og0KCQlwb3N0ID0geyd1c2VybmFtZSc6IF9fQURET05fXy5nZXRTZXR0aW5nKCdlbWFpbCcpLCAncGFzc3dvcmQnOiBfX0FERE9OX18uZ2V0U2V0dGluZygncGFzc3dvcmQnKSwnZ3JhbnRfdHlwZSc6ICdwYXNzd29yZCcsICdjbGllbnRfaWQnOiAna29kaScsICdjbGllbnRfc2VjcmV0JzoncHlSbW1LSzNjYmpvdW9ETUxYTnR0MmVHa3lUVEFHJyB9DQoJCQ0KCQlyZXN1bHRhZG8gPSBhYnJpcl91cmwoX19BUElfU0lURV9fKydsb2dpbicsIHBvc3Q9anNvbi5kdW1wcyhwb3N0KSwgaGVhZGVyPWhlYWRlcnMpDQoJCQ0KCQlpZiByZXN1bHRhZG8gPT0gJ0ROUyc6DQoJCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdUZW0gZGUgYWx0ZXJhciBvcyBETlMgcGFyYSBwb2RlciB1c3VmcnVpciBkbyBhZGRvbi4nKQ0KCQkJcmV0dXJuIEZhbHNlDQoJCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCQkjY29sb2NhciBvIGxvZ2dlZGluDQoJCXRva2VuID0gcmVzdWx0YWRvWydhY2Nlc3NfdG9rZW4nXQ0KCQlyZWZyZXNoID0gcmVzdWx0YWRvWydyZWZyZXNoX3Rva2VuJ10NCgkJaGVhZGVyc04gPSBoZWFkZXJzDQoJCWhlYWRlcnNOWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIHRva2VuDQoJCQ0KCQlyZXN1bHRhZG8gPSBhYnJpcl91cmwoX19BUElfU0lURV9fKydtZScsIGhlYWRlcj1oZWFkZXJzTikNCgkJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJCXRyeToNCgkJCXVzZXJuYW1lID0gcmVzdWx0YWRvWyd1c2VybmFtZSddLmRlY29kZSgndXRmLTgnKQ0KCQlleGNlcHQ6DQoJCQl1c2VybmFtZSA9IHJlc3VsdGFkb1sndXNlcm5hbWUnXS5lbmNvZGUoJ3V0Zi04JykNCgkJDQoJCWlmIHJlc3VsdGFkb1snZW1haWwnXSA9PSBfX0FERE9OX18uZ2V0U2V0dGluZygnZW1haWwnKToNCgkJCV9fQURET05fXy5zZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JywgdG9rZW4pDQoJCQlfX0FERE9OX18uc2V0U2V0dGluZygncmVmcmVzaE1ycGlyYWN5JywgcmVmcmVzaCkNCgkJCV9fQURET05fXy5zZXRTZXR0aW5nKCdsb2dnZWRpbicsIHVzZXJuYW1lKQ0KCQkJcmV0dXJuIFRydWUNCglleGNlcHQ6DQoJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ07Do28gZm9pIHBvc3PDrXZlbCBhYnJpciBhIHDDoWdpbmEuIFBvciBmYXZvciB0ZW50ZSBub3ZhbWVudGUuJykNCgkJcmV0dXJuIEZhbHNlDQoNCmRlZiBtaW5oYUNvbnRhYnVpbGQoKToNCglpZiAobm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9uYW1lJykgb3Igbm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9wYXNzd29yZCcpKToNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnUHJlY2lzYSBkZSBkZWZpbmlyIG8gc2V1IFV0aWxpemFkb3IgZSBTZW5oYScpDQoJCWFicmlyRGVmaW5pbmNvZXNNZXNtbygpDQoJZWxzZToNCgkJY2hlY2tfbG9naW4gPSBsb2dpbigpDQoJCWlmIGNoZWNrX2xvZ2luWydkYXRhZmltJ11bJ2RhdGEnXSA9PSAnJzoNCgkJCWFicmlyRGVmaW5pbmNvZXNNZXNtbygpDQoJCWVsc2U6DQoJCQlfbGlzdGF1c2VyID0gY2hlY2tfbG9naW5bJ3VzZXInXVsnbGlzdGEnXQ0KCQkJYW5kbWVsaW5rID0gX2xpc3RhdXNlcisncGFuZWxfYXBpLnBocD91c2VybmFtZT0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikrJyZwYXNzd29yZD0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpDQoJCQlleGVjdXRlX2FpbmZvKGFuZG1lbGluaykNCg0KZGVmIGxvZ2luUGVzcXVpc2EoKToNCglpZiAobm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9uYW1lJykgb3Igbm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9wYXNzd29yZCcpKToNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnUHJlY2lzYSBkZSBkZWZpbmlyIG8gc2V1IFV0aWxpemFkb3IgZSBTZW5oYScpDQoJCWFicmlyRGVmaW5pbmNvZXNNZXNtbygpDQoJZWxzZToNCgkJY2hlY2tfbG9naW4gPSBsb2dpbigpDQoJCWlmIGNoZWNrX2xvZ2luWydkYXRhZmltJ11bJ2RhdGEnXSA9PSAnJzoNCgkJCWFicmlyRGVmaW5pbmNvZXNNZXNtbygpDQoJCWVsc2U6DQoJCQlfdGlwb3VzZXIgPSBjaGVja19sb2dpblsndXNlciddWyd0aXBvJ10NCgkJCV9zZXJ2dXNlciA9IGNoZWNrX2xvZ2luWyd1c2VyJ11bJ3NlcnZpZG9yJ10NCgkJCV9ub21ldXNlciA9IGNoZWNrX2xvZ2luWyd1c2VyJ11bJ25vbWUnXQ0KCQkJcGVzcXVpc2EoJycsX3NlcnZ1c2VyKQ0KDQpkZWYgYnVpbGRMaXZlaXQodGlwb2xvZ2lhKToNCglpZiAobm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9uYW1lJykgb3Igbm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9wYXNzd29yZCcpKToNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnUHJlY2lzYSBkZSBkZWZpbmlyIG8gc2V1IFV0aWxpemFkb3IgZSBTZW5oYScpDQoJCWFicmlyRGVmaW5pbmNvZXNNZXNtbygpDQoJZWxzZToNCgkJaWYodGlwb2xvZ2lhID09ICdGaWxtZXNMaXZlJykgb3IgKHRpcG9sb2dpYSA9PSAnU2VyaWVzTGl2ZScpIG9yICh0aXBvbG9naWEgPT0gJ0FuaW1lc0xpdmUnKToNCgkJCWNoZWNrX2xvZ2luID0gbG9naW4yKCkNCgkJCWlmIGNoZWNrX2xvZ2luID09IFRydWU6DQoJCQkJY2hlY2tfbG9naW4yID0gbG9naW4oKQ0KCQkJCWlmKHRpcG9sb2dpYSA9PSAnRmlsbWVzTGl2ZScpOg0KCQkJCQlfbGlzdGF1c2VyID0gY2hlY2tfbG9naW4yWyd1c2VyJ11bJ2xpc3RhJ10NCgkJCQkJaWYgdGlwb191c2VyICE9ICdUZXN0ZSc6DQoJCQkJCQlmaWxtaWxpbmsgPSBfbGlzdGF1c2VyKydlbmlnbWEyLnBocD91c2VybmFtZT0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikrJyZwYXNzd29yZD0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpKycmdHlwZT1nZXRfdm9kX2NhdGVnb3JpZXMnDQoJCQkJCQlhZGREaXIoJ0ZpbG1lcyBkYSBMaXN0YScsZmlsbWlsaW5rLE5vbmUsMzMzNywnTWluaWF0dXJhJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZmlsbWVzLnBuZycpLCcnLCcnLCcnLCcnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKSkNCgkJCQkJbWVudUZpbG1lcyhvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZmlsbWVzLnBuZycpLF9fU0lURUFkZG9uX18rJ0ltYWdlbnMvZmlsbWVzX2ZhbmFydC5wbmcnKQ0KCQkJCWVsaWYodGlwb2xvZ2lhID09ICdTZXJpZXNMaXZlJyk6DQoJCQkJCW1lbnVTZXJpZXMob3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Nlcmllcy5wbmcnKSxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL3Nlcmllc19mYW5hcnQucG5nJykNCgkJCQllbGlmKHRpcG9sb2dpYSA9PSAnQW5pbWVzTGl2ZScpOg0KCQkJCQltZW51QW5pbWVzKG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdhbmltZXMucG5nJyksX19TSVRFQWRkb25fXysnSW1hZ2Vucy9zZXJpZXNfZmFuYXJ0LnBuZycpDQoJCWVsc2U6DQoJCQljaGVja19sb2dpbiA9IGxvZ2luKCkNCgkJCWlmIGNoZWNrX2xvZ2luWyd1c2VyJ11bJ25vbWUnXSAhPSAnJzoNCgkJCQlpZiBjaGVja19sb2dpblsnc3VjZXNzbyddWydyZXN1bHRhZG8nXSA9PSAneWVzJzoNCgkJCQkJTWVudV9pbmljaWFsKGNoZWNrX2xvZ2luLFRydWUsdGlwb2xvZ2lhKQ0KCQkJCWVsaWYgY2hlY2tfbG9naW5bJ3N1Y2Vzc28nXVsncmVzdWx0YWRvJ10gPT0gJ3V0aWxpemFkb3InOg0KCQkJCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdVdGlsaXphZG9yIGluY29ycmV0by4nKQ0KCQkJCWVsaWYgY2hlY2tfbG9naW5bJ3N1Y2Vzc28nXVsncmVzdWx0YWRvJ10gPT0gJ3NlbmhhJzoNCgkJCQkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnU2VuaGEgaW5jb3JyZXRhLicpDQoJCQkJZWxpZiBjaGVja19sb2dpblsnc3VjZXNzbyddWydyZXN1bHRhZG8nXSA9PSAnYXRpdm8nOg0KCQkJCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdPIGVzdGFkbyBkbyBzZXUgVXRpbGl6YWRvciBlbmNvbnRyYS1zZSBJbmFjdGl2by4gUGFyYSBzYWJlciBtYWlzIGluZm9ybWHDp8O1ZXMgZW50cmUgZW0gY29udGFjdG8gcGVsbyBlbWFpbCBsaXZlaXRrb2RpQGdtYWlsLmNvbScpDQoJCQkJZWxzZToNCgkJCQkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnTsOjbyBmb2kgcG9zc8OtdmVsIGFicmlyIGEgcMOhZ2luYS4gUG9yIGZhdm9yIHRlbnRlIG5vdmFtZW50ZS4nKQ0KCQkJZWxzZToNCgkJCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdOw6NvIGZvaSBwb3Nzw612ZWwgYWJyaXIgYSBww6FnaW5hLiBQb3IgZmF2b3IgdGVudGUgbm92YW1lbnRlLicpDQoNCmRlZiBhYnJpclZpZGVvQ2x1YmUodXJsLF90aXBvdXNlcik6DQoJYWRkRGlyKCdGaWxtZXMnLHVybCxOb25lLDIxLCdNaW5pYXR1cmEnLF9fU0lURUFkZG9uX18rJ0ltYWdlbnMvZmlsbWUyLnBuZycsJ0ZpbG1lJywnJywnJywnJyxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL2ZpbG1lc19mYW5hcnQucG5nJykJCQkJCQ0KCWFkZERpcignU8OpcmllcycsdXJsLE5vbmUsMjAsJ01pbmlhdHVyYScsX19TSVRFQWRkb25fXysnSW1hZ2Vucy9zZXJpZTEucG5nJywnU2VyaWUnLCcnLCcnLCcnLF9fU0lURUFkZG9uX18rJ0ltYWdlbnMvc2VyaWVzX2ZhbmFydC5wbmcnKQ0KCWFkZERpcignQW5pbWVzJyx1cmwsTm9uZSwyNCwnTWluaWF0dXJhJyxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL2FuaW1lLnBuZycsJ0ZpbG1lJywnJywnJywnJyxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL3Nlcmllc19mYW5hcnQucG5nJykNCgkNCglpZiBfdGlwb3VzZXIgIT0gJ1Rlc3RlJzoNCgkJYWRkRGlyKCdQZXNxdWlzYScsX19BUElfU0lURV9fLE5vbmUsMTIwLCdMaXN0YScsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Blc3F1aXNhLnBuZycpLCdwZXNxdWlzYScsJycsJycsJycsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Z1bmRvX2FkZG9uLnBuZycpKQ0KDQpkZWYgTWVudV9pbmljaWFsKG1lbixidWlsZCx0aXBvKToNCglfdGlwb3VzZXIgPSBtZW5bJ3VzZXInXVsndGlwbyddDQoJX3NlcnZ1c2VyID0gbWVuWyd1c2VyJ11bJ3NlcnZpZG9yJ10NCglfbm9tZXVzZXIgPSBtZW5bJ3VzZXInXVsnbm9tZSddDQoJX2xpc3RhdXNlciA9IG1lblsndXNlciddWydsaXN0YSddDQoJX2xpc3RhdXNlcm5vdmEgPSBtZW5bJ3VzZXInXVsnbGlzdGFub3ZhJ10NCglfZGF0YXVzZXIgPSBtZW5bJ2RhdGFmaW0nXVsnZGF0YSddDQoJX2VwZ3VzZXIgPSBtZW5bJ3VzZXInXVsnZXBnJ10NCgl0aXBvc2VsZWN0ID0gbWVuWyd1c2VyJ11bJ3RpcG9sb2dpYSddDQoJDQoJX3NlbmhhYWR1bHRvcyA9IF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9hZHVsdG9zIikNCglfZmFuYXJ0ID0gJycNCgkNCglwYXNzYW5vdm8gPSBUcnVlDQoJaWYgX3RpcG91c2VyID09ICdUZXN0ZScgYW5kIF9zZXJ2dXNlciA9PSAnVGVzdGUnOg0KCQlwYXNzYW5vdm8gPSBGYWxzZQ0KCQ0KCWlmIGJ1aWxkID09IFRydWUgYW5kIHBhc3Nhbm92byA9PSBGYWxzZToNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnw4kgdW0gdXRpbGl6YWRvciBGcmVlIGxvZ28gbsOjbyB0ZW0gYWNlc3NvIMOhIG5vc3NhIGJ1aWxkIGEgZnVuY2lvbmFyLicpDQoJZWxpZihidWlsZCA9PSBUcnVlKToNCgkJdGlwb2NhbiA9ICcnDQoJCXVybGJ1aWxkID0gJycNCgkJbm9tZWJ1aWxkID0gJycNCgkJc2VuaGFhZHUgPSBtZW5bJ3VzZXInXVsnc2VuaGFhZHVsdG8nXQ0KCQlpZiB0aXBvID09ICdQcmFpYSc6DQoJCQl1cmxidWlsZCA9IF9fU0lURUFkZG9uX18rIkZpY2hlaXJvcy9wcmFpYXNhZGRvbmdyLnR4dCINCgkJCV9mYW5hcnQgPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL25vdmlkYWRlc19mYW5hcnQucG5nIg0KCQkJdGlwb2NhbiA9ICdQcmFpYScNCgkJCW5vbWVidWlsZCA9ICdQcmFpYScNCgkJaWYgdGlwbyA9PSAnUHJvZ3JhbWFzVFYnOg0KCQkJdXJsYnVpbGQgPSBfX1NJVEVBZGRvbl9fKyJGaWNoZWlyb3MvcHJvdGVsZWFkZG9uZ3IudHh0Ig0KCQkJX2ZhbmFydCA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvbm92aWRhZGVzX2ZhbmFydC5wbmciDQoJCQl0aXBvY2FuID0gJ1Byb2dyYW1hc1RWJw0KCQkJbm9tZWJ1aWxkID0gJ1Byb2dyYW1hc1RWJw0KCQkjaWYgX3NlcnZ1c2VyID09ICdUZXN0ZSc6DQoJCSMJdXJsYnVpbGQgPSBfX1NJVEVBZGRvbl9fKyJGaWNoZWlyb3MvcHJhaWFzYWRkb25nci50eHQiDQoJCSNlbGlmKF9zZXJ2dXNlciA9PSAnU2Vydmlkb3IxJyk6DQoJCSMJdXJsYnVpbGQgPSBfX1NJVEVBZGRvbl9fKyJGaWNoZWlyb3MvY2FuYWlzYWRkb25zZXJ2aWRvcjEudHh0Ig0KCQlpZih0aXBvID09ICdDYW5hbCcpOg0KCQkJdGlwb2NhbiA9ICdOb3JtYWwnDQoJCQlub21lYnVpbGQgPSAnQ2FuYWlzIFBUJw0KCQkJX2ZhbmFydCA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvdHZfZmFuYXJ0LnBuZyINCgkJZWxpZih0aXBvID09ICdOb3ZpZGFkZXMnKToNCgkJCXRpcG9jYW4gPSAnbm92aWRhZGVzJw0KCQkJbm9tZWJ1aWxkID0gJ05vdmlkYWRlcycNCgkJCV9mYW5hcnQgPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL25vdmlkYWRlc3R2LnBuZyINCgkJCXVybGJ1aWxkID0gX19TSVRFQWRkb25fXysiRmljaGVpcm9zL25vdmlkYWRlc19mYW5hcnQudHh0Ig0KCQllbGlmKHRpcG8gPT0gJ1BhdHJvY2luYWRvcmVzJyk6DQoJCQl0aXBvY2FuID0gJ3BhdHJvY2luYWRvcmVzJw0KCQkJbm9tZWJ1aWxkID0gJ1BhdHJvY2luYWRvcmVzJw0KCQkJX2ZhbmFydCA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvcGFydGljaXBhLmpwZyINCgkJCXVybGJ1aWxkID0gX19TSVRFQWRkb25fXysiRmljaGVpcm9zL3BhdHJvY2luYWRvcmVzLnR4dCINCgkJDQoJCWlmKHRpcG8gPT0gJ05vdmlkYWRlcycpIG9yICh0aXBvID09ICdQYXRyb2NpbmFkb3JlcycpOg0KCQkJbGlzdGFyX2dydXBvcygnJyx1cmxidWlsZCwnTGlzdGEnLHRpcG9jYW4sX3RpcG91c2VyLF9zZXJ2dXNlcixfZmFuYXJ0KQ0KCQllbHNlOg0KCQkJaWYodGlwbyA9PSAnUHJhaWEnKSBvciAodGlwbyA9PSAnUHJvZ3JhbWFzVFYnKToNCgkJCQlsaXN0YXJfZ3J1cG9zKCcnLHVybGJ1aWxkLCdNaW5pYXR1cmEnLHRpcG9jYW4sX3RpcG91c2VyLF9zZXJ2dXNlcixfZmFuYXJ0KQ0KCQkJCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoaW50KHN5cy5hcmd2WzFdKSxjYWNoZVRvRGlzYz1GYWxzZSkNCgkJCWVsc2U6DQoJCQkJI3VybGJ1aWxkID0gX2xpc3RhdXNlcisnZ2V0LnBocD91c2VybmFtZT0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikrJyZwYXNzd29yZD0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpKycmdHlwZT1tM3VfcGx1cyZvdXRwdXQ9Jyt0aXBvc2VsZWN0CQ0KCQkJCWFicmltM3UyKF9saXN0YXVzZXIsdGlwb3NlbGVjdCkNCgkJCQl4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KGludChzeXMuYXJndlsxXSksY2FjaGVUb0Rpc2M9VHJ1ZSkNCgllbHNlOg0KCQlmb3IgbWVudSBpbiBtZW5bJ21lbnVzJ106DQoJCQlub21lID0gbWVudVsnbm9tZSddDQoJCQlsb2dvID0gbWVudVsnbG9nbyddDQoJCQlsaW5rID0gbWVudVsnbGluayddDQoJCQl0aXBvID0gbWVudVsndGlwbyddDQoJCQlzZW5oYSA9IG1lbnVbJ3NlbmhhJ10NCgkJCWZhbmFydCA9IG1lbnVbJ2ZhbmFydCddDQoJCQlpZiB0aXBvICE9ICdGaWxtZScgYW5kIHRpcG8gIT0gJ1NlcmllJzoNCgkJCQlpZiB0aXBvID09ICdwYXRyb2NpbmFkb3Jlcycgb3IgdGlwbyA9PSAnbm92aWRhZGVzJzoNCgkJCQkJYWRkRGlyKG5vbWUsbGluayxOb25lLDEsJ0xpc3RhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlciwnJyxmYW5hcnQpDQoJCQkJZWxpZiB0aXBvID09ICdBbmltZSc6DQoJCQkJCWFkZERpcihub21lLF9saXN0YXVzZXIsTm9uZSwyOCwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlciwnJyxmYW5hcnQpDQoJCQkJZWxpZiB0aXBvID09ICd0dmFyY2hpdmUnOg0KCQkJCQlpZiBfdGlwb3VzZXIgIT0gJ1Rlc3RlJyBhbmQgX3NlcnZ1c2VyICE9ICdUZXN0ZSc6DQoJCQkJCQlhZGREaXIobm9tZSxfbGlzdGF1c2VyLE5vbmUsMjUsJ01pbmlhdHVyYScsbG9nbywnJywnJywnJywnJyxmYW5hcnQpDQoJCQkJZWxpZiB0aXBvID09ICdkZWZpbmljb2VzJzoNCgkJCQkJYWRkRGlyKG5vbWUsX2xpc3RhdXNlcixOb25lLDI3LCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLCcnLGZhbmFydCkNCgkJCQllbGlmKHRpcG8gPT0gJ3Blc3F1aXNhJyBhbmQgX3RpcG91c2VyICE9ICdUZXN0ZScpOg0KCQkJCQlpZiBfdGlwb3VzZXIgIT0gJ1Rlc3RlJzoNCgkJCQkJCWFkZERpcihub21lLGxpbmssTm9uZSwxMjAsJ0xpc3RhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlciwnJyxmYW5hcnQpDQoJCQkJZWxzZToNCgkJCQkJaWYgX3RpcG91c2VyID09ICdBZG1pbmlzdHJhZG9yJyBvciBfdGlwb3VzZXIgPT0gJ1BhdHJvY2luYWRvcicgb3IgX3RpcG91c2VyID09ICdQYXRyb2NpbmFkb3JQYWdhbnRlJzoNCgkJCQkJCWlmIG5vbWUgPT0gJ1RWcyc6DQoJCQkJCQkJI3VybGxpcyA9IF9saXN0YXVzZXIrJ2dldC5waHA/dXNlcm5hbWU9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fbmFtZSIpKycmcGFzc3dvcmQ9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSsnJnR5cGU9bTN1X3BsdXMmb3V0cHV0PScrdGlwb3NlbGVjdA0KCQkJCQkJCWFkZERpcihub21lLF9saXN0YXVzZXIsdGlwb3NlbGVjdCwzMzMzLCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLF9kYXRhdXNlcixmYW5hcnQpDQoJCQkJCQkJYWRkRGlyKCdUVnMtRnJlZScsbGluayxOb25lLDEsJ01pbmlhdHVyYScsbG9nbyx0aXBvLF90aXBvdXNlcixfc2VydnVzZXIsJycsZmFuYXJ0KQ0KCQkJCQkJZWxzZToNCgkJCQkJCQlhZGREaXIobm9tZSxsaW5rLE5vbmUsMSwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlcixub21lLGZhbmFydCkNCgkJCQkJZWxzZToNCgkJCQkJCWlmIChub21lID09ICdUVnMnIGFuZCBfdGlwb3VzZXIgIT0gJ1Rlc3RlJykgb3IgKG5vbWUgPT0gJ1RWcycgYW5kIF90aXBvdXNlciA9PSAnVGVzdGUnIGFuZCBfc2VydnVzZXIgIT0gJ1Rlc3RlJyk6DQoJCQkJCQkJI3VybGxpcyA9IF9saXN0YXVzZXIrJ2dldC5waHA/dXNlcm5hbWU9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fbmFtZSIpKycmcGFzc3dvcmQ9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSsnJnR5cGU9bTN1X3BsdXMmb3V0cHV0PScrdGlwb3NlbGVjdA0KCQkJCQkJCWFkZERpcihub21lLF9saXN0YXVzZXIsdGlwb3NlbGVjdCwzMzMzLCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLF9kYXRhdXNlcixmYW5hcnQpDQoJCQkJCQllbHNlOg0KCQkJCQkJCWlmIHRpcG8gIT0gJ0FkdWx0bycgb3Igbm9tZSAhPSAnUmFkaW9zJzoNCgkJCQkJCQkJaWYgX3NlcnZ1c2VyID09ICdUZXN0ZSc6DQoJCQkJCQkJCQlhZGREaXIobm9tZSxsaW5rLE5vbmUsMSwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlcixub21lLGZhbmFydCkNCgkJCQkJCQkJZWxzZToNCgkJCQkJCQkJCWFkZERpcihub21lLGxpbmssTm9uZSwxLCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLF9kYXRhdXNlcixmYW5hcnQpDQoJCQkJCQkJZWxzZToNCgkJCQkJCQkJaWYgX3NlcnZ1c2VyID09ICdUZXN0ZSc6DQoJCQkJCQkJCQlhZGREaXIobm9tZSxsaW5rLE5vbmUsMSwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlcixub21lLGZhbmFydCkJDQoJCQ0KCQkjeGJtYy5leGVjdXRlYnVpbHRpbignTm90aWZpY2F0aW9uKCVzLCAlcywgJWksICVzKSclKF9ub21ldXNlciwgVmVyc8OjbyBkbyBhZGRvbjogJytfVkVSU0FPXywgODAwMCwgX0lDT05fKSkNCgkJdGhyZWFkLnN0YXJ0X25ld190aHJlYWQoIG9idGVyX2ZpY2hlaXJvX2VwZywgKCkgKQ0KCQl4Ym1jLmV4ZWN1dGVidWlsdGluKCdOb3RpZmljYXRpb24oJXMsICVzLCAlaSwgJXMpJyUoQWRkb25UaXRsZSwnU2Vjw6fDo28gSW5pY2lhZGE6ICcrX25vbWV1c2VyLCA4MDAwLCBfSUNPTl8pKQ0KCQl2aXN0YV9DYW5haXNfTGlzdGEoKQ0KCQl4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KGludChzeXMuYXJndlsxXSksY2FjaGVUb0Rpc2M9RmFsc2UpDQoJI2NoZWNrX3ZlcnNpb24oKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjCQlDbGVhciBDYWNoZQkJIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQpkZWYgQ0xFQVJDQUNIRSgpOg0KCXhibWNfY2FjaGVfcGF0aCA9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly9ob21lJyksICdjYWNoZScpDQoJaWYgb3MucGF0aC5leGlzdHMoeGJtY19jYWNoZV9wYXRoKT09VHJ1ZToJDQoJCWZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKHhibWNfY2FjaGVfcGF0aCk6DQoJCQlmaWxlX2NvdW50ID0gMA0KCQkJZmlsZV9jb3VudCArPSBsZW4oZmlsZXMpDQoJCQlpZiBmaWxlX2NvdW50ID4gMDoNCgkNCgkJCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCQkJaWYgZGlhbG9nLnllc25vKCJBcGFnYXIgQ2FjaGUgbm8gWEJNQy4iLCBzdHIoZmlsZV9jb3VudCkgKyAiIGZpY2hlaXJvcyBlbmNvbnRyYWRvcy4iLCAiUXVlciBhcGFnYXIgdG9kb3Mgb3MgZmljaGVpcm9zIGVtIGNhY2hlPyIpOg0KCQkJCQ0KCQkJCQlmb3IgZiBpbiBmaWxlczoNCgkJCQkJCXRyeToNCgkJCQkJCQlvcy51bmxpbmsob3MucGF0aC5qb2luKHJvb3QsIGYpKQ0KCQkJCQkJZXhjZXB0Og0KCQkJCQkJCXBhc3MNCgkJCQkJZm9yIGQgaW4gZGlyczoNCgkJCQkJCXRyeToNCgkJCQkJCQlzaHV0aWwucm10cmVlKG9zLnBhdGguam9pbihyb290LCBkKSkNCgkJCQkJCWV4Y2VwdDoNCgkJCQkJCQlwYXNzDQoJCQkJCQkNCgkJCWVsc2U6DQoJCQkJcGFzcw0KCWlmIHhibWMuZ2V0Q29uZFZpc2liaWxpdHkoJ3N5c3RlbS5wbGF0Zm9ybS5BVFYyJyk6DQoJCWF0djJfY2FjaGVfYSA9IG9zLnBhdGguam9pbignL3ByaXZhdGUvdmFyL21vYmlsZS9MaWJyYXJ5L0NhY2hlcy9BcHBsZVRWL1ZpZGVvLycsICdPdGhlcicpDQoJCQ0KCQlmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2FsayhhdHYyX2NhY2hlX2EpOg0KCQkJZmlsZV9jb3VudCA9IDANCgkJCWZpbGVfY291bnQgKz0gbGVuKGZpbGVzKQ0KCQkNCgkJCWlmIGZpbGVfY291bnQgPiAwOg0KDQoJCQkJZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQ0KCQkJCWlmIGRpYWxvZy55ZXNubygiQXBhZ2FyIGZpY2hlaXJvcyBBVFYyLiIsIHN0cihmaWxlX2NvdW50KSArICIgZmljaGVpcm9zIGVuY29udHJhZG9zIGVtICdPdXRyb3MnIiwgIlF1ZXIgYXBhZ2FyIHRvZG9zIG9zIGZpY2hlaXJvcyBlbSBjYWNoZT8iKToNCgkJCQkNCgkJCQkJZm9yIGYgaW4gZmlsZXM6DQoJCQkJCQlvcy51bmxpbmsob3MucGF0aC5qb2luKHJvb3QsIGYpKQ0KCQkJCQlmb3IgZCBpbiBkaXJzOg0KCQkJCQkJc2h1dGlsLnJtdHJlZShvcy5wYXRoLmpvaW4ocm9vdCwgZCkpDQoJCQkJCQkNCgkJCWVsc2U6DQoJCQkJcGFzcw0KCQlhdHYyX2NhY2hlX2IgPSBvcy5wYXRoLmpvaW4oJy9wcml2YXRlL3Zhci9tb2JpbGUvTGlicmFyeS9DYWNoZXMvQXBwbGVUVi9WaWRlby8nLCAnTG9jYWxBbmRSZW50YWwnKQ0KCQkNCgkJZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoYXR2Ml9jYWNoZV9iKToNCgkJCWZpbGVfY291bnQgPSAwDQoJCQlmaWxlX2NvdW50ICs9IGxlbihmaWxlcykNCgkJDQoJCQlpZiBmaWxlX2NvdW50ID4gMDoNCg0KCQkJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJCQlpZiBkaWFsb2cueWVzbm8oIkFwYWdhciBmaWNoZWlyb3MgQVRWMi4iLCBzdHIoZmlsZV9jb3VudCkgKyAiIGZpY2hlaXJvcyBlbmNvbnRyYWRvcyBlbSAnTG9jYWwnIiwgIlF1ZXIgYXBhZ2FyIHRvZG9zIG9zIGZpY2hlaXJvcyBlbSBjYWNoZT8iKToNCgkJCQkNCgkJCQkJZm9yIGYgaW4gZmlsZXM6DQoJCQkJCQlvcy51bmxpbmsob3MucGF0aC5qb2luKHJvb3QsIGYpKQ0KCQkJCQlmb3IgZCBpbiBkaXJzOg0KCQkJCQkJc2h1dGlsLnJtdHJlZShvcy5wYXRoLmpvaW4ocm9vdCwgZCkpDQoJCQkJCQkNCgkJCWVsc2U6DQoJCQkJcGFzcw0KCQkJICAjIFNldCBwYXRoIHRvIEN5ZGlhIEFyY2hpdmVzIGNhY2hlIGZpbGVzDQoJCQkJCQkJIA0KDQoJIyBTZXQgcGF0aCB0byBXaGF0IHRoIEZ1cmsgY2FjaGUgZmlsZXMNCgl3dGZfY2FjaGVfcGF0aCA9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly9wcm9maWxlL2FkZG9uX2RhdGEvcGx1Z2luLnZpZGVvLndoYXR0aGVmdXJrL2NhY2hlJyksICcnKQ0KCWlmIG9zLnBhdGguZXhpc3RzKHd0Zl9jYWNoZV9wYXRoKT09VHJ1ZToJDQoJCWZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKHd0Zl9jYWNoZV9wYXRoKToNCgkJCWZpbGVfY291bnQgPSAwDQoJCQlmaWxlX2NvdW50ICs9IGxlbihmaWxlcykNCgkJDQoJCSMgQ291bnQgZmlsZXMgYW5kIGdpdmUgb3B0aW9uIHRvIGRlbGV0ZQ0KCQkJaWYgZmlsZV9jb3VudCA+IDA6DQoJDQoJCQkJZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQ0KCQkJCWlmIGRpYWxvZy55ZXNubygiQXBhZ2FyIGEgY2FjaGUgV1RGLiIsIHN0cihmaWxlX2NvdW50KSArICIgZmljaGVpcm9zIGVuY29udHJhZG9zLiIsICJRdWVyIGFwYWdhciB0b2RvcyBvcyBmaWNoZWlyb3MgZW0gY2FjaGU/Iik6DQoJCQkJDQoJCQkJCWZvciBmIGluIGZpbGVzOg0KCQkJCQkJb3MudW5saW5rKG9zLnBhdGguam9pbihyb290LCBmKSkNCgkJCQkJZm9yIGQgaW4gZGlyczoNCgkJCQkJCXNodXRpbC5ybXRyZWUob3MucGF0aC5qb2luKHJvb3QsIGQpKQ0KCQkJCQkJDQoJCQllbHNlOg0KCQkJCXBhc3MNCgkJCQkNCgkJCQkjIFNldCBwYXRoIHRvIDRvRCBjYWNoZSBmaWxlcw0KCWNoYW5uZWw0X2NhY2hlX3BhdGg9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly9wcm9maWxlL2FkZG9uX2RhdGEvcGx1Z2luLnZpZGVvLjRvZC9jYWNoZScpLCAnJykNCglpZiBvcy5wYXRoLmV4aXN0cyhjaGFubmVsNF9jYWNoZV9wYXRoKT09VHJ1ZToJDQoJCWZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKGNoYW5uZWw0X2NhY2hlX3BhdGgpOg0KCQkJZmlsZV9jb3VudCA9IDANCgkJCWZpbGVfY291bnQgKz0gbGVuKGZpbGVzKQ0KCQkNCgkJIyBDb3VudCBmaWxlcyBhbmQgZ2l2ZSBvcHRpb24gdG8gZGVsZXRlDQoJCQlpZiBmaWxlX2NvdW50ID4gMDoNCgkNCgkJCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCQkJaWYgZGlhbG9nLnllc25vKCJBcGFnYXIgZmljaGVpcm9zIDRvRCBlbSBjYWNoZS4iLCBzdHIoZmlsZV9jb3VudCkgKyAiIGZpY2hlaXJvcyBlbmNvbnRyYWRvcy4iLCAiUXVlciBhcGFnYXIgdG9kb3Mgb3MgZmljaGVpcm9zIGVtIGNhY2hlPyIpOg0KCQkJCQ0KCQkJCQlmb3IgZiBpbiBmaWxlczoNCgkJCQkJCW9zLnVubGluayhvcy5wYXRoLmpvaW4ocm9vdCwgZikpDQoJCQkJCWZvciBkIGluIGRpcnM6DQoJCQkJCQlzaHV0aWwucm10cmVlKG9zLnBhdGguam9pbihyb290LCBkKSkNCgkJCQkJCQ0KCQkJZWxzZToNCgkJCQlwYXNzDQoJCQkJDQoJCQkJIyBTZXQgcGF0aCB0byBCQkMgaVBsYXllciBjYWNoZSBmaWxlcw0KCWlwbGF5ZXJfY2FjaGVfcGF0aD0gb3MucGF0aC5qb2luKHhibWMudHJhbnNsYXRlUGF0aCgnc3BlY2lhbDovL3Byb2ZpbGUvYWRkb25fZGF0YS9wbHVnaW4udmlkZW8uaXBsYXllci9pcGxheWVyX2h0dHBfY2FjaGUnKSwgJycpDQoJaWYgb3MucGF0aC5leGlzdHMoaXBsYXllcl9jYWNoZV9wYXRoKT09VHJ1ZToJDQoJCWZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKGlwbGF5ZXJfY2FjaGVfcGF0aCk6DQoJCQlmaWxlX2NvdW50ID0gMA0KCQkJZmlsZV9jb3VudCArPSBsZW4oZmlsZXMpDQoJCQ0KCQkjIENvdW50IGZpbGVzIGFuZCBnaXZlIG9wdGlvbiB0byBkZWxldGUNCgkJCWlmIGZpbGVfY291bnQgPiAwOg0KCQ0KCQkJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJCQlpZiBkaWFsb2cueWVzbm8oIkFwYWdhciBmaWNoZWlyb3MgQkJDIGlQbGF5ZXIgZW0gY2FjaGUuIiwgc3RyKGZpbGVfY291bnQpICsgIiBmaWNoZWlyb3MgZW5jb250cmFkb3MuIiwgIlF1ZXIgYXBhZ2FyIHRvZG9zIG9zIGZpY2hlaXJvcyBlbSBjYWNoZT8iKToNCgkJCQkNCgkJCQkJZm9yIGYgaW4gZmlsZXM6DQoJCQkJCQlvcy51bmxpbmsob3MucGF0aC5qb2luKHJvb3QsIGYpKQ0KCQkJCQlmb3IgZCBpbiBkaXJzOg0KCQkJCQkJc2h1dGlsLnJtdHJlZShvcy5wYXRoLmpvaW4ocm9vdCwgZCkpDQoJCQkJCQkNCgkJCWVsc2U6DQoJCQkJcGFzcw0KCQkJCQ0KCQkJCQ0KCQkJCSMgU2V0IHBhdGggdG8gU2ltcGxlIERvd25sb2FkZXIgY2FjaGUgZmlsZXMNCglkb3dubG9hZGVyX2NhY2hlX3BhdGggPSBvcy5wYXRoLmpvaW4oeGJtYy50cmFuc2xhdGVQYXRoKCdzcGVjaWFsOi8vcHJvZmlsZS9hZGRvbl9kYXRhL3NjcmlwdC5tb2R1bGUuc2ltcGxlLmRvd25sb2FkZXInKSwgJycpDQoJaWYgb3MucGF0aC5leGlzdHMoZG93bmxvYWRlcl9jYWNoZV9wYXRoKT09VHJ1ZToJDQoJCWZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKGRvd25sb2FkZXJfY2FjaGVfcGF0aCk6DQoJCQlmaWxlX2NvdW50ID0gMA0KCQkJZmlsZV9jb3VudCArPSBsZW4oZmlsZXMpDQoJCQ0KCQkjIENvdW50IGZpbGVzIGFuZCBnaXZlIG9wdGlvbiB0byBkZWxldGUNCgkJCWlmIGZpbGVfY291bnQgPiAwOg0KCQ0KCQkJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJCQlpZiBkaWFsb2cueWVzbm8oIkFwYWdhciBmaWNoZWlyb3MgU2ltcGxlIERvd25sb2FkZXIgZW0gY2FjaGUuIiwgc3RyKGZpbGVfY291bnQpICsgIiBmaWNoZWlyb3MgZW5jb250cmFkb3MuIiwgIlF1ZXIgYXBhZ2FyIHRvZG9zIG9zIGZpY2hlaXJvcyBlbSBjYWNoZT8iKToNCgkJCQkNCgkJCQkJZm9yIGYgaW4gZmlsZXM6DQoJCQkJCQlvcy51bmxpbmsob3MucGF0aC5qb2luKHJvb3QsIGYpKQ0KCQkJCQlmb3IgZCBpbiBkaXJzOg0KCQkJCQkJc2h1dGlsLnJtdHJlZShvcy5wYXRoLmpvaW4ocm9vdCwgZCkpDQoJCQkJCQkNCgkJCWVsc2U6DQoJCQkJcGFzcw0KCQ0KCWl0dl9jYWNoZV9wYXRoID0gb3MucGF0aC5qb2luKHhibWMudHJhbnNsYXRlUGF0aCgnc3BlY2lhbDovL3Byb2ZpbGUvYWRkb25fZGF0YS9wbHVnaW4udmlkZW8uaXR2L0ltYWdlcycpLCAnJykNCglpZiBvcy5wYXRoLmV4aXN0cyhpdHZfY2FjaGVfcGF0aCk9PVRydWU6CQ0KCQlmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2FsayhpdHZfY2FjaGVfcGF0aCk6DQoJCQlmaWxlX2NvdW50ID0gMA0KCQkJZmlsZV9jb3VudCArPSBsZW4oZmlsZXMpDQoJCQkNCgkJCWlmIGZpbGVfY291bnQgPiAwOg0KCQ0KCQkJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJCQlpZiBkaWFsb2cueWVzbm8oIkFwYWdhciBpdGVtcyBlbSBjYWNoZSIsIHN0cihmaWxlX2NvdW50KSArICIgZmljaGVpcm9zIGVuY29udHJhZG9zLiIsICJRdWVyIGFwYWdhciB0b2RvcyBvcyBmaWNoZWlyb3MgZW0gY2FjaGU/Iik6DQoJCQkJDQoJCQkJCWZvciBmIGluIGZpbGVzOg0KCQkJCQkJb3MudW5saW5rKG9zLnBhdGguam9pbihyb290LCBmKSkNCgkJCQkJZm9yIGQgaW4gZGlyczoNCgkJCQkJCXNodXRpbC5ybXRyZWUob3MucGF0aC5qb2luKHJvb3QsIGQpKQ0KCQkJCQkJDQoJCQllbHNlOg0KCQkJCXBhc3MNCglkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJZGlhbG9nLm9rKEFkZG9uVGl0bGUsICIJCUNhY2hlIGFwYWdhZGEgY29tIHN1Y2Vzc28hIikNCg0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIyMjCSBQdXJnZSBQYWNrYWdlcwkJIyMjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQpkZWYgUFVSR0VQQUNLQUdFUygpOg0KCXBhY2thZ2VzX2NhY2hlX3BhdGggPSB4Ym1jLnRyYW5zbGF0ZVBhdGgob3MucGF0aC5qb2luKCdzcGVjaWFsOi8vaG9tZS9hZGRvbnMvcGFja2FnZXMnLCAnJykpDQoJdHJ5OgkNCgkJZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsocGFja2FnZXNfY2FjaGVfcGF0aCk6DQoJCQlmaWxlX2NvdW50ID0gMA0KCQkJZmlsZV9jb3VudCArPSBsZW4oZmlsZXMpDQoJCQkNCgkJCWlmIGZpbGVfY291bnQgPiAwOg0KCQ0KCQkJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJCQlpZiBkaWFsb2cueWVzbm8oIkV4Y2x1aXIgaW5mb3JtYcOnw6NvIGVtIENhY2hlLiIsIHN0cihmaWxlX2NvdW50KSArICIgZmljaGVpcm9zIGVuY29udHJhZG9zLiIsICJRdWVyIGFwYWdhciB0b2RvcyBvcyBmaWNoZWlyb3M/Iik6DQoJCQkJCQkJDQoJCQkJCWZvciBmIGluIGZpbGVzOg0KCQkJCQkJb3MudW5saW5rKG9zLnBhdGguam9pbihyb290LCBmKSkNCgkJCQkJZm9yIGQgaW4gZGlyczoNCgkJCQkJCXNodXRpbC5ybXRyZWUob3MucGF0aC5qb2luKHJvb3QsIGQpKQ0KCQkJCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCQkJCWRpYWxvZy5vayhBZGRvblRpdGxlLCAiCQlLb2RpIGxpbXBvIGNvbSBzdWNlc3NvLiIpDQoJCQkJZWxzZToNCgkJCQkJCXBhc3MNCgkJCWVsc2U6DQoJCQkJZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQ0KCQkJCWRpYWxvZy5vayhBZGRvblRpdGxlLCAiCQlOw6NvIGZvcmFtIGVuY29udHJhZG9zIGZpY2hlaXJvcyBhIGFwYWdhci4iKQ0KCWV4Y2VwdDogDQoJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJZGlhbG9nLm9rKEFkZG9uVGl0bGUsICJFcnJvIGFvIHRlbnRhciBhcGFnYXIgZmljaGVpcm9zIGVtIGNhY2hlLiIpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIwkJCQkJCQkJCQkJCQlNZW51cwkJCQkJCQkJCQkJCQkgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmRlZiBhYnJpbTN1KHVybCwgZGF0YXVzZXIpOg0KCXRtcExpc3QgPSBbXQ0KCWxpc3QgPSBjb21tb24ubTN1Mmxpc3QodXJsKQ0KCWFkZERpcignQXR1YWxpemFyIExpc3RhJyx1cmwsTm9uZSwzMzMzLCdNaW5pYXR1cmEnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdyZXRyb2NlZGVyLnBuZycpLCcnLCcnLCcnLGRhdGF1c2VyLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdyZXRyb2NlZGVyLnBuZycpKQ0KCWFkZExpbmtDYW5hbCgnVsOtZGVvIEluc3RhbGHDp8OjbyBCdWlsZCcsJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlLz9wYXRoPS9yb290L3ZpZGVvJmFjdGlvbj1wbGF5X3ZpZGVvJnZpZGVvaWQ9UHVseHp0Y0FIa3MmdCcsJycsJycsJycpDQoJYWRkTGlua0NhbmFsKCdEw7p2aWRhczogbGl2ZWl0a29kaUBnbWFpbC5jb20gJywnJywnJywnJywnJykNCglhZGRMaW5rQ2FuYWwoZGF0YXVzZXIsJycsJycsJycsJycpDQoJZm9yIGNoYW5uZWwgaW4gbGlzdDoNCgkJbmFtZSA9IGNvbW1vbi5HZXRFbmNvZGVTdHJpbmcoY2hhbm5lbFsiZGlzcGxheV9uYW1lIl0pDQoJCWltYWdlID0gY2hhbm5lbC5nZXQoInR2Z19sb2dvIiwgIiIpDQoJCXVybCA9IGNvbW1vbi5HZXRFbmNvZGVTdHJpbmcoY2hhbm5lbFsidXJsIl0pDQoJCWlkX2lwID0gY2hhbm5lbC5nZXQoInR2Zy1JRCIsICIiKQ0KCQkNCgkJYWRkTGlua0NhbmFsKG5hbWUsdXJsLGltYWdlLGlkX2lwLCcnKQ0KCQ0KCXZpc3RhX0NhbmFpc19MaXN0YSgpDQoJDQpkZWYgYWJyaW0zdTIodXJsLHRpcG9zZSk6DQoJdmVyc2lvbiA9IF9fQURET05WRVJTSU9OX18NCglrYXN1dGFqYW5pbWk9X19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKQ0KCXNhbGFzb25hPV9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpDQoJbGVoZWt5bGc9dXJsDQoJdmFuZW1ha29vZD1fX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fYWR1bHRvcyIpDQoJdmFuZW1hbHVraz1fX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fYWR1bHRvc19zaW0iKQ0KCQ0KCXRlbGV2aXNpb29uaWxpbmsgPSB1cmwrJ2VuaWdtYTIucGhwP3VzZXJuYW1lPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSsnJnBhc3N3b3JkPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX3Bhc3N3b3JkIikrJyZ0eXBlPWdldF9saXZlX2NhdGVnb3JpZXMnDQoNCglhZGREaXIoJ0F0dWFsaXphciBMaXN0YScsdXJsLHRpcG9zZSwzMzMzLCdNaW5pYXR1cmEnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLCcnLCcnLCcnLCcnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKSkNCglzZWN1cml0eV9jaGVjayh0ZWxldmlzaW9vbmlsaW5rLHRpcG9zZSkNCg0KZGVmIHNlY3VyaXR5X2NoZWNrKHVybCx0aXBvc2UpOg0KCXJlcXVlc3QgPSB1cmxsaWIyLlJlcXVlc3QodXJsLCBoZWFkZXJzPXsiQWNjZXB0IiA6ICJhcHBsaWNhdGlvbi94bWwifSkNCgl1ID0gdXJsbGliMi51cmxvcGVuKHJlcXVlc3QpDQoJdHJlZSA9IEVULnBhcnNlKHUpDQoJcm9vdEVsZW0gPSB0cmVlLmdldHJvb3QoKQ0KCWZvciBjaGFubmVsIGluIHRyZWUuZmluZGFsbCgiY2hhbm5lbCIpOg0KCQlrYW5hbGluaW1pID0gY2hhbm5lbC5maW5kKCJ0aXRsZSIpLnRleHQNCgkJa2FuYWxpbmltaSA9IGJhc2U2NC5iNjRkZWNvZGUoa2FuYWxpbmltaSkNCgkJa2F0ZWdvb3JpYWxpbmsgPSBjaGFubmVsLmZpbmQoInBsYXlsaXN0X3VybCIpLnRleHQNCgkJDQoJCWFkZERpcihrYW5hbGluaW1pLGthdGVnb29yaWFsaW5rLHRpcG9zZSwzMzM4LCdNaW5pYXR1cmEnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLCcnLCcnLCcnLCcnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKSkNCgl2aXN0YV9DYW5haXNfTGlzdGEoKQ0KDQpkZWYgZGV0ZWN0X21vZGlmaWNhdGlvbih1cmwpOg0KCXJlcXVlc3QgPSB1cmxsaWIyLlJlcXVlc3QodXJsLCBoZWFkZXJzPXsiQWNjZXB0IiA6ICJhcHBsaWNhdGlvbi94bWwifSkNCgl1ID0gdXJsbGliMi51cmxvcGVuKHJlcXVlc3QpDQoJdHJlZSA9IEVULnBhcnNlKHUpDQoJcm9vdEVsZW0gPSB0cmVlLmdldHJvb3QoKQ0KCWZvciBjaGFubmVsIGluIHRyZWUuZmluZGFsbCgiY2hhbm5lbCIpOg0KCQlmaWxtaW5pbWkgPSBjaGFubmVsLmZpbmQoInRpdGxlIikudGV4dA0KCQlmaWxtaW5pbWkgPSBiYXNlNjQuYjY0ZGVjb2RlKGZpbG1pbmltaSkNCgkJa2F0ZWdvb3JpYWxpbmsgPSBjaGFubmVsLmZpbmQoInBsYXlsaXN0X3VybCIpLnRleHQNCgkJDQoJCWFkZERpcihmaWxtaW5pbWksa2F0ZWdvb3JpYWxpbmssTm9uZSwzMzM5LCdNaW5pYXR1cmEnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLCcnLCcnLCcnLCcnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKSkNCgl2aXN0YV9DYW5haXNfTGlzdGEoKQ0KDQpkZWYgc3RyZWFtX3ZpZGVvKG5hbWUsdXJsLGltYWdlLHRpcG9zZWxlY3QpOg0KCXZhbmVtYWx1a2s9X19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX2FkdWx0b3Nfc2ltIikNCglpZiB2YW5lbWFsdWtrID09ICJ0cnVlIjoNCgkJdmFuZW1hX2x1a2sobmFtZSkNCglyZXF1ZXN0ID0gdXJsbGliMi5SZXF1ZXN0KHVybCwgaGVhZGVycz17IkFjY2VwdCIgOiAiYXBwbGljYXRpb24veG1sIn0pDQoJdSA9IHVybGxpYjIudXJsb3BlbihyZXF1ZXN0KQ0KCXRyZWUgPSBFVC5wYXJzZSh1KQ0KCXJvb3RFbGVtID0gdHJlZS5nZXRyb290KCkNCglmb3IgY2hhbm5lbCBpbiB0cmVlLmZpbmRhbGwoc3luY19kYXRhKCJZMmhoYm01bGJBPT0iKSk6DQoJCWthbmFsaW5pbWkgPSBjaGFubmVsLmZpbmQoZ2V0X2xpdmUoImRHbDBiR1U9IikpLnRleHQNCgkJa2FuYWxpbmltaSA9IGJhc2U2NC5iNjRkZWNvZGUoa2FuYWxpbmltaSkNCgkJa2FuYWxpbmltaSA9IGthbmFsaW5pbWkucGFydGl0aW9uKCJbIikNCgkJc3RyaWltaWxpbmsgPSBjaGFubmVsLmZpbmQoZ2V0X2xpdmUoImMzUnlaV0Z0WDNWeWJBPT0iKSkudGV4dA0KCQlzdHJpaW1pbGluayA9IHN0cmlpbWlsaW5rLnJlcGxhY2UoJy50cycsJy4nK3RpcG9zZWxlY3QpDQoJCXBpbHQgPSBjaGFubmVsLmZpbmQoImRlc2NfaW1hZ2UiKS50ZXh0DQoJCWthdmEgPSBrYW5hbGluaW1pWzFdK2thbmFsaW5pbWlbMl0NCgkJa2F2YSA9IGthdmEucGFydGl0aW9uKCJdIikNCgkJa2F2YSA9IGthdmFbMl0NCgkJa2F2YSA9IGthdmEucGFydGl0aW9uKCIJIikNCgkJa2F2YSA9IGthdmFbMl0NCgkJc2hvdSA9IGdldF9saXZlKCJXME5QVEU5U0lIZG9hWFJsWFNWeklGc3ZRMDlNVDFKZCIpJShrYW5hbGluaW1pWzBdKStrYXZhDQoJCWtpcmplbGR1cyA9IGNoYW5uZWwuZmluZCgiZGVzY3JpcHRpb24iKS50ZXh0DQoJCWlmIGtpcmplbGR1czoNCgkJCWtpcmplbGR1cyA9IGJhc2U2NC5iNjRkZWNvZGUoa2lyamVsZHVzKQ0KCQkJbnl5ZCA9IGtpcmplbGR1cy5wYXJ0aXRpb24oIigiKQ0KCQkJbnl5ZCA9ICJBZ29yYTogIitueXlkWzBdDQoJCQlqYXJnbWluZSA9IGtpcmplbGR1cy5wYXJ0aXRpb24oIilcbiIpDQoJCQlqYXJnbWluZSA9IGphcmdtaW5lWzJdLnBhcnRpdGlvbigiKCIpDQoJCQlqYXJnbWluZSA9ICJBIHNlZ3VpcjogIitqYXJnbWluZVswXQ0KCQkJa29ra3UgPSBueXlkK2phcmdtaW5lDQoJCWVsc2U6DQoJCQlrb2trdSA9ICIiDQoJCWlmIHBpbHQ6DQoJCQlhZGRMaW5rQ2FuYWxMaXN0YShzaG91LHN0cmlpbWlsaW5rLHBpbHQsa29ra3Usb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2hvbWV0aGVhdGVyLnBuZycpKQ0KCQllbHNlOg0KCQkJYWRkTGlua0NhbmFsTGlzdGEoc2hvdSxzdHJpaW1pbGluayxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnaWNvbi5wbmcnKSxrb2trdSxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnaG9tZXRoZWF0ZXIucG5nJykpDQoJDQoJeGJtY3BsdWdpbi5zZXRDb250ZW50KGludChzeXMuYXJndlsxXSkgLCJlcGlzb2RlcyIpDQoJeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KSIpDQoNCmRlZiBnZXRfbXlhY2NvdW50KG5hbWUsdXJsLGltYWdlKToNCgl2YW5lbWFsdWtrPV9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9hZHVsdG9zX3NpbSIpDQoJaWYgdmFuZW1hbHVrayA9PSAidHJ1ZSI6DQoJCXZhbmVtYV9sdWtrKG5hbWUpDQoJDQoJcmVxdWVzdCA9IHVybGxpYjIuUmVxdWVzdCh1cmwsIGhlYWRlcnM9eyJBY2NlcHQiIDogImFwcGxpY2F0aW9uL3htbCJ9KQ0KCXUgPSB1cmxsaWIyLnVybG9wZW4ocmVxdWVzdCkNCgl0cmVlID0gRVQucGFyc2UodSkNCglyb290RWxlbSA9IHRyZWUuZ2V0cm9vdCgpDQoJZm9yIGNoYW5uZWwgaW4gdHJlZS5maW5kYWxsKCJjaGFubmVsIik6DQoJCXBlYWxraXJpID0gY2hhbm5lbC5maW5kKCJ0aXRsZSIpLnRleHQNCgkJcGVhbGtpcmkgPSBiYXNlNjQuYjY0ZGVjb2RlKHBlYWxraXJpKQ0KCQlwZWFsa2lyaSA9IHBlYWxraXJpLmVuY29kZSgidXRmLTgiKQ0KCQlzdHJpaW1pbGluayA9IGNoYW5uZWwuZmluZCgic3RyZWFtX3VybCIpLnRleHQNCgkJcGlsdCA9IGNoYW5uZWwuZmluZCgiZGVzY19pbWFnZSIpLnRleHQgDQoJCWtpcmplbGR1cyA9IGNoYW5uZWwuZmluZCgiZGVzY3JpcHRpb24iKS50ZXh0DQoJCWlmIGtpcmplbGR1czoNCgkJCWtpcmplbGR1cyA9IGJhc2U2NC5iNjRkZWNvZGUoa2lyamVsZHVzKQ0KCQlpZiBwaWx0Og0KCQkJYWRkTGlua0NhbmFsTGlzdGEocGVhbGtpcmksc3RyaWltaWxpbmsscGlsdCxraXJqZWxkdXMsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3RoZWF0ZXIucG5nJykpDQoJCWVsc2U6DQoJCQlhZGRMaW5rQ2FuYWxMaXN0YShwZWFsa2lyaSxzdHJpaW1pbGluayxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnaWNvbi5wbmcnKSxraXJqZWxkdXMsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3RoZWF0ZXIucG5nJykpDQoJDQoJeGJtY3BsdWdpbi5zZXRDb250ZW50KCBpbnQoc3lzLmFyZ3ZbMV0pICwibW92aWVzIiApDQoJeGJtYy5leGVjdXRlYnVpbHRpbignQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KScpDQoNCmRlZiBhZGRMaW5rQ2FuYWxMaXN0YSh0aXRsZSx1cmwsdGh1bWJuYWlsLHBsb3QsZmFuYXJ0LCBpc1BsYXlhYmxlPVRydWUsIGZvbGRlcj1GYWxzZSk6DQoJb2s9VHJ1ZQ0KCQ0KCWxpc3RpdGVtPXhibWNndWkuTGlzdEl0ZW0odGl0bGUsaWNvbkltYWdlPXRodW1ibmFpbCx0aHVtYm5haWxJbWFnZT10aHVtYm5haWwpDQoJaW5mb19sYWJlbHM9eyJUaXRsZSI6dGl0bGUsIkZpbGVOYW1lIjp0aXRsZSwiUGxvdCI6cGxvdH0NCglsaXN0aXRlbS5zZXRJbmZvKCAidmlkZW8iLCBpbmZvX2xhYmVscyApDQoJaWYgZmFuYXJ0IT0iIjogDQoJCWxpc3RpdGVtLnNldFByb3BlcnR5KCdmYW5hcnRfaW1hZ2UnLGZhbmFydCkNCgkJeGJtY3BsdWdpbi5zZXRQbHVnaW5GYW5hcnQoaW50KHN5cy5hcmd2WzFdKSxmYW5hcnQpDQoJaWYgdXJsLnN0YXJ0c3dpdGgoInBsdWdpbjovLyIpOiANCgkJaXRlbXVybD11cmwNCgkJbGlzdGl0ZW0uc2V0UHJvcGVydHkoJ0lzUGxheWFibGUnLCd0cnVlJykNCgkJeGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLHVybD1pdGVtdXJsLGxpc3RpdGVtPWxpc3RpdGVtLGlzRm9sZGVyPWZvbGRlcikNCgllbGlmIGlzUGxheWFibGU6IA0KCQlsaXN0aXRlbS5zZXRQcm9wZXJ0eSgiVmlkZW8iLCJ0cnVlIikNCgkNCgl1ID0gc3lzLmFyZ3ZbMF0gKyAiP3VybD0iICsgc3RyKHVybCkgKyAiJm1vZGU9MzM0MCZuYW1lPSIgKyBzdHIobmFtZSkgKyAiJmljb25pbWFnZT0iK3N0cihpY29uaW1hZ2UpKyImZmFuYXJ0PSIrc3RyKGZhbmFydCkrIiZwbG90PSIrc3RyKHBsb3QpDQoJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLHVybD11LGxpc3RpdGVtPWxpc3RpdGVtLGlzRm9sZGVyPWZvbGRlcikNCglyZXR1cm4gb2sNCg0KZGVmIHJ1bl9jcm9uam9iKHRpdGxlLHVybCxpbWFnZSxwbG90LGZhbmFydCk6DQoJdmFuZW1hbHVraz1fX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fYWR1bHRvc19zaW0iKQ0KCWlmIHZhbmVtYWx1a2sgPT0gInRydWUiOg0KCQl2YW5lbWFfbHVrayhuYW1lKQ0KCQ0KCXBsYXlsaXN0ID0geGJtYy5QbGF5TGlzdCh4Ym1jLlBMQVlMSVNUX1ZJREVPKQ0KCXBsYXlsaXN0LmNsZWFyKCkNCgkNCglpbmZvX2xhYmVscz17IlRpdGxlIjp0aXRsZSwiRmlsZU5hbWUiOnRpdGxlLCJQbG90IjpwbG90fQ0KCWxpc3RpdGVtPXhibWNndWkuTGlzdEl0ZW0odGl0bGUsaWNvbkltYWdlPWltYWdlLHRodW1ibmFpbEltYWdlPWltYWdlKQ0KCWxpc3RpdGVtLnNldEluZm8oICJ2aWRlbyIsIGluZm9fbGFiZWxzICkNCglwbGF5bGlzdC5hZGQodXJsPXVybCwgbGlzdGl0ZW09bGlzdGl0ZW0sIGluZGV4PTEpDQoJeGJtYy5QbGF5ZXIoKS5wbGF5KHBsYXlsaXN0KQ0KDQpkZWYgc3luY19kYXRhKGNoYW5uZWwpOg0KCXZpZGVvID0gYmFzZTY0LmI2NGRlY29kZShjaGFubmVsKQ0KCXJldHVybiB2aWRlbw0KDQpkZWYgcmVzdGFydF9zZXJ2aWNlKHBhcmFtcyk6DQoJdmFuZW1hbHVraz1fX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fYWR1bHRvc19zaW0iKQ0KCWlmIHZhbmVtYWx1a2sgPT0gInRydWUiOg0KCQlwZWFsa2lyaSA9IHBhcmFtcy5nZXQoc3luY19kYXRhKCJkR2wwYkdVPSIpKQ0KCQl2YW5lbWFfbHVrayhwZWFsa2lyaSkNCglsb3BwbGluayA9IHBhcmFtcy5nZXQodm9kX2NoYW5uZWxzKCJkWEpzIikpDQoJDQoJeGJtY3BsdWdpbi5zZXRSZXNvbHZlZFVybChpbnQoc3lzLmFyZ3ZbMV0pLCBUcnVlLCBsaXN0aXRlbSkNCg0KZGVmIGdyYWJfZXBnKHVybCk6DQoJcmVxID0gdXJsbGliMi5SZXF1ZXN0KHVybCkNCglyZXEuYWRkX2hlYWRlcihzeW5jX2RhdGEoIlZYTmxjaTFCWjJWdWRBPT0iKSAsIHZvZF9jaGFubmVscygiUzI5a2FTQndiSFZuYVc0Z1lua2dUR2wyWlNGMCIpKQ0KCXJlc3BvbnNlID0gdXJsbGliMi51cmxvcGVuKHJlcSkNCglsaW5rPXJlc3BvbnNlLnJlYWQoKQ0KCWpkYXRhID0ganNvbi5sb2FkcyhsaW5rLmRlY29kZSgndXRmOCcpKQ0KCXJlc3BvbnNlLmNsb3NlKCkNCglpZiBqZGF0YToNCgkJcmV0dXJuIGpkYXRhDQpkZWYga29udHJvbGwodXJsKToNCglyYW5kb21zdHJpbmcgPSBncmFiX2VwZyh1cmwpDQoJa2FzdXRhamFpbmZvID0gcmFuZG9tc3RyaW5nW3N5bmNfZGF0YSgiZFhObGNsOXBibVp2IildDQoJa29udHJvbGwgPSBrYXN1dGFqYWluZm9bZ2V0X2xpdmUoIllYVjBhQT09IildDQoJcmV0dXJuIGtvbnRyb2xsDQpkZWYgZ2V0X2xpdmUoY2hhbm5lbCk6DQoJdmlkZW8gPSBiYXNlNjQuYjY0ZGVjb2RlKGNoYW5uZWwpDQoJcmV0dXJuIHZpZGVvDQpkZWYgZXhlY3V0ZV9haW5mbyh1cmwpOg0KCWFuZG1lZCA9IGdyYWJfZXBnKHVybCkNCglrYXN1dGFqYUFuZG1lZCA9IGFuZG1lZFtzeW5jX2RhdGEoImRYTmxjbDlwYm1adiIpXQ0KCXNlaXMgPSBrYXN1dGFqYUFuZG1lZFtnZXRfbGl2ZSgiYzNSaGRIVnoiKV0NCglhZWd1YiA9IGthc3V0YWphQW5kbWVkW3N5bmNfZGF0YSgiWlhod1gyUmhkR1U9IildDQoJaWYgYWVndWI6DQoJCWFlZ3ViID0gZGF0ZXRpbWUuZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChpbnQoYWVndWIpKS5zdHJmdGltZSgnJUg6JU0gJWQuJW0uJVknKQ0KCWVsc2U6DQoJCWFlZ3ViID0gdm9kX2NoYW5uZWxzKCJUbVYyWlhJPSIpIA0KCXJhYmJpdHMgPSBrYXN1dGFqYUFuZG1lZFt2b2RfY2hhbm5lbHMoImFYTmZkSEpwWVd3PSIpXQ0KCWlmIHJhYmJpdHMgPT0gIjAiOg0KCQlyYWJiaXRzID0gc3luY19kYXRhKCJUbTg9IikNCgllbHNlOg0KCQlyYWJiaXRzID0gc3luY19kYXRhKCJXV1Z6IikNCglsZWF2ZW1lYWxvbmUgPSBrYXN1dGFqYUFuZG1lZFtnZXRfbGl2ZSgiYldGNFgyTnZibTVsWTNScGIyNXoiKV0NCglwb2xhcmJlYXJzID0ga2FzdXRhamFBbmRtZWRbc3luY19kYXRhKCJkWE5sY201aGJXVT0iKV0NCgkNCglhZGRMaW5rQ2FuYWxMaXN0YSgiW0NPTE9SID0gd2hpdGVdVXRpbGl6YWRvcjogWy9DT0xPUl0iK3BvbGFyYmVhcnMsIiIsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3RoZWF0ZXIucG5nJykpDQoJDQoJYWRkTGlua0NhbmFsTGlzdGEoIltDT0xPUiA9IHdoaXRlXUVzdGFkbzogWy9DT0xPUl0iK3NlaXMsIiIsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3RoZWF0ZXIucG5nJykpDQoJDQoJYWRkTGlua0NhbmFsTGlzdGEoIltDT0xPUiA9IHdoaXRlXUV4cGlyYTogWy9DT0xPUl0iK2FlZ3ViLCIiLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICd0aGVhdGVyLnBuZycpKQ0KCQ0KCWFkZExpbmtDYW5hbExpc3RhKCJbQ09MT1IgPSB3aGl0ZV1Db250YSBkZSBUZXN0ZTogWy9DT0xPUl0iK3JhYmJpdHMsIiIsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3RoZWF0ZXIucG5nJykpDQoJDQoJYWRkTGlua0NhbmFsTGlzdGEoIltDT0xPUiA9IHdoaXRlXU1heGltbyBkZSBDb25uZWM6IFsvQ09MT1JdIitsZWF2ZW1lYWxvbmUsIiIsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3RoZWF0ZXIucG5nJykpDQoJDQoJdmlzdGFfQ2FuYWlzX0xpc3RhKCkNCg0KZGVmIHZhbmVtYV9sdWtrKG5hbWUpOg0KCWEgPSAnWFhYJywgJ0FkdWx0JywgJ0FkdWx0cycsJ0FEVUxUJywnQURVTFRTJywnYWR1bHQnLCdhZHVsdHMnLCdQb3JuJywnUE9STicsJ3Bvcm4nLCdQb3JuJywneHh4Jw0KCWlmIGFueShzIGluIG5hbWUgZm9yIHMgaW4gYSk6DQoJCXhibWMuZXhlY3V0ZWJ1aWx0aW4oKHUnWEJNQy5Ob3RpZmljYXRpb24oIkNvbnRyb2xvIFBhcmVudGFsIiwgIk8gY2FuYWwgY29udGVtIGNvbnRldWRvIGFkdWx0byIsIDIwMDApJykpDQoJCXRleHQgPSBwbHVnaW50b29scy5rZXlib2FyZF9pbnB1dChkZWZhdWx0X3RleHQ9IiIsIHRpdGxlPSJDb2RpZ28gcGFyYSBjb250cm9sbyBwYXJlbnRhbCIpDQoJCWlmIHRleHQ9PXBsdWdpbnRvb2xzLmdldF9zZXR0aW5nKHN5bmNfZGF0YSgiYkc5bmFXNWZZV1IxYkhSdmN3PT0iKSk6DQoJCSAgcmV0dXJuDQoJCWVsc2U6DQoJCSAgZXhpdCgpDQoJZWxzZToNCgkJbmFtZSA9ICIiDQoNCmRlZiBEb3dubG9hZGVyQ2xhc3ModXJsLGRlc3QpOg0KCWRwID0geGJtY2d1aS5EaWFsb2dQcm9ncmVzcygpDQoJZHAuY3JlYXRlKHN5bmNfZGF0YSgiUjJWMGRHbHVaeUIxY0dSaGRHVT0iKSxnZXRfbGl2ZSgiUkc5M2JteHZZV1JwYm1jPSIpKQ0KCXVybGxpYi51cmxyZXRyaWV2ZSh1cmwsZGVzdCxsYW1iZGEgbmIsIGJzLCBmcywgdXJsPXVybDogX3BiaG9vayhuYixicyxmcyx1cmwsZHApKQ0KDQpkZWYgX3BiaG9vayhudW1ibG9ja3MsIGJsb2Nrc2l6ZSwgZmlsZXNpemUsIHVybD1Ob25lLGRwPU5vbmUpOg0KCXRyeToNCgkJcGVyY2VudCA9IG1pbigobnVtYmxvY2tzKmJsb2Nrc2l6ZSoxMDApL2ZpbGVzaXplLCAxMDApDQoJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJycrcGVyY2VudCkNCgkJZHAudXBkYXRlKHBlcmNlbnQpDQoJZXhjZXB0Og0KCQlwZXJjZW50ID0gMTAwDQoJCWRwLnVwZGF0ZShwZXJjZW50KQ0KCWlmIGRwLmlzY2FuY2VsZWQoKToNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnTyBkb3dubG9hZCBmb2kgY2FuY2VsYWRvLicpDQoJCWRwLmNsb3NlKCkNCg0KZGVmIHZvZF9jaGFubmVscyhjaGFubmVsKToNCgl2aWRlbyA9IGJhc2U2NC5iNjRkZWNvZGUoY2hhbm5lbCkNCglyZXR1cm4gdmlkZW8NCg0KDQoNCmRlZiBQbGF5VXJsKG5hbWUsIHVybCwgaWNvbmltYWdlPU5vbmUpOg0KCWxpc3RpdGVtID0geGJtY2d1aS5MaXN0SXRlbShwYXRoPXVybCwgdGh1bWJuYWlsSW1hZ2U9aWNvbmltYWdlKQ0KCWxpc3RpdGVtLnNldEluZm8odHlwZT0iVmlkZW8iLCBpbmZvTGFiZWxzPXsgIlRpdGxlIjogbmFtZSB9KQ0KCXhibWNwbHVnaW4uc2V0UmVzb2x2ZWRVcmwoaW50KHN5cy5hcmd2WzFdKSwgVHJ1ZSwgbGlzdGl0ZW0pDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIwkJCQkJCQkJCQkJCQlMaXN0YXIgR3J1cG9zCQkJCQkJCQkJCQkgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpkZWYgbGlzdGFyX2dydXBvc19hZHVsdG9zKHVybCxzZW5oYSxlc3RpbG8sdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixmYW5hcnQpOg0KCXBhc3NhID0gVHJ1ZQ0KCWlmIHRpcG9fdXNlciA9PSAnVGVzdGUnOg0KCQlpZiBzZXJ2aWRvcl91c2VyID09ICJUZXN0ZSI6DQoJCQlwYXNzYSA9IEZhbHNlDQoJCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdOw6NvIHRlbSBhY2Vzc28gYSBlc3RlIG1lbnUuIEZhw6dhIGEgc3VhIGRvYcOnw6NvLicpDQoJCWVsc2U6DQoJCQlpZiBzZXJ2aWRvcl91c2VyID09ICdUZXN0ZSc6DQoJCQkJcGFzc2EgPSBGYWxzZQ0KCQkJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ07Do28gdGVtIGFjZXNzbyBhIGVzdGUgbWVudS4gRmHDp2EgYSBzdWEgZG9hw6fDo28uJykJDQoJaWYgcGFzc2E6DQoJCWlmKF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9hZHVsdG9zIikgPT0gJycpOg0KCQkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnUHJlZW5jaGEgbyBjYW1wbyBzZW5oYSBwYXJhIGFkdWx0b3MuJykNCgkJZWxpZihfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fYWR1bHRvcyIpICE9IHNlbmhhKToNCgkJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ1NlbmhhIHBhcmEgYWR1bHRvcyBpbmNvcnJlY3RhLiBWZXJpZmlxdWUgZSB0ZW50ZSBkZSBub3ZvLicpDQoJCWVsc2U6DQoJCQlsaXN0YXJfZ3J1cG9zKCcnLHVybCxlc3RpbG8sdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixmYW5hcnQpDQoNCmRlZiBsaXN0YXJfZ3J1cG9zKG5vbWVfbm92LHVybCxlc3RpbG8sdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixmYW5hcnQpOg0KCWlmIHVybCAhPSAndXJsJzoNCgkJcGFnZV93aXRoX3htbCA9IHVybGxpYjIudXJsb3Blbih1cmwpLnJlYWRsaW5lcygpDQoJCWZvciBsaW5lIGluIHBhZ2Vfd2l0aF94bWw6DQoJCQlvYmplY3RvID0gbGluZS5kZWNvZGUoJ2xhdGluLTEnKS5lbmNvZGUoInV0Zi04IikNCgkJCXBhcmFtcyA9IG9iamVjdG8uc3BsaXQoJywnKQ0KCQkJdHJ5Og0KCQkJCW5vbWVlID0gcGFyYW1zWzBdDQoJCQkJaW1hZyA9IHBhcmFtc1sxXQ0KCQkJCXVybGxsID0gcGFyYW1zWzJdDQoJCQkJZXN0aWwgPSBwYXJhbXNbM10NCgkJCQl1cmxsbHNlcnYxID0gcGFyYW1zWzRdDQoJCQkJdXJsbGxzZXJ2MiA9IHBhcmFtc1s1XQ0KCQkJCXVybGxsc2VydjMgPSBwYXJhbXNbNl0NCgkJCQl1cmxsbHNlcnY0ID0gcGFyYW1zWzddDQoJCQkJdXJsbGxzZXJ2NSA9IHBhcmFtc1s4XQ0KCQkJCXVybGxsc2VydjYgPSBwYXJhbXNbOV0NCgkJCQl1cmxsbHNlcnY3ID0gcGFyYW1zWzEwXQ0KCQkJCXVybGxsc2VydjggPSBwYXJhbXNbMTBdDQoJCQkJcGFyYW1zcyA9IGVzdGlsLnNwbGl0KCdcbicpDQoJCQkJaWYgdGlwb191c2VyID09ICdBZG1pbmlzdHJhZG9yJyBvciB0aXBvX3VzZXIgPT0gJ1BhZ2FudGUnIG9yIHRpcG9fdXNlciA9PSAnUGF0cm9jaW5hZG9yUGFnYW50ZScgb3IgdGlwb191c2VyID09ICdEZXNwb3J0byc6DQoJCQkJCWlmIG5vbWVfbm92ID09ICdUVnMtRnJlZSc6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGwsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjEnOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjEsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjInOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjIsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjMnOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjMsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjQnOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjQsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjUnOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjUsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjYnOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjYsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjcnOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjcsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCQkJZWxzZToNCgkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnY4LE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixub21lX25vdixmYW5hcnQpDQoJCQkJZWxpZiB0aXBvX3VzZXIgPT0gJ1BhdHJvY2luYWRvcic6DQoJCQkJCWlmIG5vbWVfbm92ID09ICdUVnMtRnJlZSc6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGwsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQllbHNlOg0KCQkJCQlpZiB0aXBvX3VzZXIgPT0gJ1Rlc3RlJzoNCgkJCQkJCWlmIHNlcnZpZG9yX3VzZXIgPT0gIlRlc3RlIjoNCgkJCQkJCQlhZGREaXIobm9tZWUsdXJsbGwsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJCWVsc2U6DQoJCQkJCQkJaWYgc2Vydmlkb3JfdXNlciAhPSAnJzoNCgkJCQkJCQkJaWYgc2Vydmlkb3JfdXNlciA9PSAnU2Vydmlkb3IxJzoNCgkJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnYxLE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCQkJCWVsaWYgc2Vydmlkb3JfdXNlciA9PSAnU2Vydmlkb3IyJzoNCgkJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnYyLE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCQkJCWVsaWYgc2Vydmlkb3JfdXNlciA9PSAnU2Vydmlkb3IzJzoNCgkJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnYzLE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCQkJCWVsaWYgc2Vydmlkb3JfdXNlciA9PSAnU2Vydmlkb3I0JzoNCgkJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnY0LE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCQkJCWVsaWYgc2Vydmlkb3JfdXNlciA9PSAnU2Vydmlkb3I1JzoNCgkJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnY1LE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCQkJCWVsaWYgc2Vydmlkb3JfdXNlciA9PSAnU2Vydmlkb3I2JzoNCgkJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnY2LE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCQkJCWVsaWYgc2Vydmlkb3JfdXNlciA9PSAnU2Vydmlkb3I3JzoNCgkJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnY3LE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCQkJCWVsc2U6DQoJCQkJCQkJCQlhZGREaXIobm9tZWUsdXJsbGxzZXJ2OCxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsJycsZmFuYXJ0KQ0KCQkJCQkJCWVsc2U6DQoJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbCxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsJycsZmFuYXJ0KQ0KCQkJCQllbHNlOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsLE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixub21lX25vdixmYW5hcnQpDQoJCQlleGNlcHQ6DQoJCQkJcGFzcw0KCQ0KCWlmIHRpcG8gPT0gJ3BhdHJvY2luYWRvcmVzJyBvciB0aXBvID09ICdub3ZpZGFkZXMnIG9yIHRpcG8gPT0gJ1ByYWlhJyBvciB0aXBvID09ICdwZXNxdWlzYScgb3IgdGlwbyA9PSAnZXN0YWRvJyBvciB0aXBvID09ICdQcm9ncmFtYXNUVicgb3Igbm9tZV9ub3YgPT0gJ0V2ZW50b3MgRGnDoXJpb3MnOg0KCQllc3RpbG9TZWxlY3QgPSByZXR1cm5lc3RpbG8oZXN0aWxvKQ0KCQl4Ym1jLmV4ZWN1dGVidWlsdGluKGVzdGlsb1NlbGVjdCkNCgllbHNlOg0KCQlpZiB0aXBvID09ICdGaWxtZScgb3IgdGlwbyA9PSAnU2VyaWUnOg0KCQkJdmlzdGFfZmlsbWVzU2VyaWVzKCkNCgkJZWxzZToNCgkJCXZpc3RhX0NhbmFpcygpCQ0KCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoaW50KHN5cy5hcmd2WzFdKSxjYWNoZVRvRGlzYz1GYWxzZSkNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCQkJCQkJCU1lbnUgVFYgQXJxdWl2bwkJCQkJCQkJCQkJICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQpkZWYgbGlzdGF0dmFyY2hpdmUodXJsKToNCgllbmRlcmVjbyA9IHVybCsiL3BhbmVsX2FwaS5waHA/dXNlcm5hbWU9IitfX0FERE9OX18uZ2V0U2V0dGluZygnbG9naW5fbmFtZScpKyImcGFzc3dvcmQ9IitfX0FERE9OX18uZ2V0U2V0dGluZygnbG9naW5fcGFzc3dvcmQnKSsiJmFjdGlvbj1nZXRfbGl2ZV9zdHJlYW1zIg0KCWlJaUlJSWkgPSB1cmxsaWIyLnVybG9wZW4oZW5kZXJlY28pDQoJb29vMDBPT09vb08JPSBqc29uLmxvYWQoaUlpSUlJaSkNCglPMDBPT09vT29vME8gPSBvb28wME9PT29vT1snYXZhaWxhYmxlX2NoYW5uZWxzJ10NCglmb3IJTzAwME9PbzAwb28JaW4JTzAwT09Pb09vbzBPLnZhbHVlcygpOg0KCQlvbzBPT28gPSBPMDAwT09vMDBvb1sndHZfYXJjaGl2ZSddDQoJCWlmKG9vME9PbyA9PSAxKToNCgkJCW5hbWV0dj1PMDAwT09vMDBvb1snbmFtZSddDQoJCQlzdHJlYW1faWQ9TzAwME9PbzAwb29bJ3N0cmVhbV9pZCddDQoJCQlsb2dvX3R2PU8wMDBPT28wMG9vWydzdHJlYW1faWNvbiddDQoJCQlkdXJhdGlvbiA9IE8wMDBPT28wMG9vWyd0dl9hcmNoaXZlX2R1cmF0aW9uJ10NCgkJCQ0KCQkJYWRkTGlua0dydXBvKG5hbWV0dixsb2dvX3R2LHN0cmVhbV9pZCx1cmwsZHVyYXRpb24sb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Z1bmRvX2FkZG9uLnBuZycpLDEpDQoNCmRlZiBsaXN0YXR2YXJjaGl2ZWNhbmFpcyhuYW1lLHN0cmVhbV9pZCx1cmwsZHVyYXRpb24saWNvbmltYWdlLGZhbmFydCk6DQoJZW5kZXJlY28gPSB1cmwrIi9wYW5lbF9hcGkucGhwP3VzZXJuYW1lPSIrX19BRERPTl9fLmdldFNldHRpbmcoJ2xvZ2luX25hbWUnKSsiJnBhc3N3b3JkPSIrX19BRERPTl9fLmdldFNldHRpbmcoJ2xvZ2luX3Bhc3N3b3JkJykrIiZhY3Rpb249Z2V0X2VwZyZzdHJlYW1faWQ9IitzdHJlYW1faWQNCglpSWlJSUlpCT0JdXJsbGliMgkudXJsb3BlbihlbmRlcmVjbykNCglpaWlJMTEJPQlqc29uLmxvYWQoaUlpSUlJaSkNCglpaUlpSQk9CWRhdGV0aW1lLmRhdGV0aW1lLnV0Y25vdygpIC0gZGF0ZXRpbWUudGltZWRlbHRhKGRheXM9aW50KGR1cmF0aW9uKSkNCglvMDBvb29PME9vCT1jYWxlbmRhci50aW1lZ20oaWlJaUkudGltZXR1cGxlKCkpDQoJbzAwb29vTzBPbwk9aW50KG8wMG9vb08wT28pDQoJbzBPME9PTzBPb28JPXRpbWUudGltZSgpDQoJbzBPME9PTzBPb28JPWludChvME8wT09PME9vbykNCgkNCglmb3IJaWlJaUlJMQlpbglpaWlJMTEJOg0KCQl0aXRsZV90diA9IGlpSWlJSTFbJ3RpdGxlJ10NCgkJdGl0bGVfdHY9YmFzZTY0LmI2NGRlY29kZSh0aXRsZV90dikNCgkJc3RhcnQJPSBpbnQoaWlJaUlJMVsnc3RhcnQnXSkNCgkJZW5kCT0gaW50KGlpSWlJSTFbJ2VuZCddKQ0KCQlzZWd1bmRvID0gMC4wMTY2NjY2NjY3DQoJCQ0KCQlkdXJhY2FvID0gaW50KChlbmQtc3RhcnQpKnNlZ3VuZG8pDQoJCQ0KCQlpZihzdGFydCA+IG8wMG9vb08wT28gYW5kIHN0YXJ0IDwgbzBPME9PTzBPb28pOg0KCQkJaWYgOTAgLSA5MDoJT29vMAklCU9vMG9vTzBvbzBvTwkvCU9vMG9PMG9vbw0KCQkJSUlpID0gZGF0ZXRpbWUuZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChpbnQoc3RhcnQpKS5zdHJmdGltZSgnJWQuJW0gJUg6JU0nKQ0KCQkJaTFJaWkxaTFJID0gZGF0ZXRpbWUuZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcChpbnQoc3RhcnQpKS5zdHJmdGltZSgnJVktJW0tJWQ6JUg6JU0nKQ0KCQkJdGl0bGVfdHYgPSBJSWkgKyAiICIgKyB0aXRsZV90dg0KCQkJZW5kZXJlY28gPSB1cmwrIi9zdHJlYW1pbmcvdGltZXNoaWZ0LnBocD91c2VybmFtZT0iK19fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9uYW1lJykrIiZwYXNzd29yZD0iK19fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9wYXNzd29yZCcpKyImc3RyZWFtPSIrc3RyZWFtX2lkKyImc3RhcnQ9IitpMUlpaTFpMUkrIiZkdXJhdGlvbj0iK3N0cihkdXJhY2FvKQ0KCQkJDQoJCQlhZGRMaW5rQ2FuYWwodGl0bGVfdHYsZW5kZXJlY28saWNvbmltYWdlLCcwMDAxJywnJykNCg0KZGVmIGFkZExpbmtHcnVwbyh0aXRsZSx0aHVtYm5haWwsc3RyZWFtX2lkLHVybCxkdXJhdGlvbixmYW5hcnQsdHlwZSk6DQoJb2s9VHJ1ZQ0KCQ0KCWxpc3RpdGVtPXhibWNndWkuTGlzdEl0ZW0odGl0bGUsaWNvbkltYWdlPXRodW1ibmFpbCx0aHVtYm5haWxJbWFnZT10aHVtYm5haWwpDQoJaW5mb19sYWJlbHM9eyJUaXRsZSI6dGl0bGUsIkZpbGVOYW1lIjp0aXRsZX0NCglsaXN0aXRlbS5zZXRJbmZvKCAidmlkZW8iLCBpbmZvX2xhYmVscyApDQoJbGlzdGl0ZW0uc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScsZmFuYXJ0KQ0KCXhibWNwbHVnaW4uc2V0UGx1Z2luRmFuYXJ0KGludChzeXMuYXJndlsxXSksZmFuYXJ0KQ0KCQ0KCXUgPSBzeXMuYXJndlswXSArICI/dXJsPSIgKyBzdHIodXJsKSArICImbW9kZT0yNiZuYW1lPSIgKyBzdHIodGl0bGUpICsgIiZpY29uaW1hZ2U9IitzdHIodGh1bWJuYWlsKSsiJmZhbmFydD0iK3N0cihmYW5hcnQpKyImc3RyZWFtX2lkPSIrc3RyKHN0cmVhbV9pZCkrIiZkdXJhdGlvbj0iK2R1cmF0aW9uDQoJDQoJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLHVybD11LGxpc3RpdGVtPWxpc3RpdGVtLGlzRm9sZGVyPVRydWUpDQoJDQoJcmV0dXJuIG9rDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIwkJCQkJCQkJCQkJCQlMaXN0YXIgQ2FuYWlzCQkJCQkJCQkJCQkgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpkZWYgbGlzdGFyX2NhbmFpc191cmwobm9tZSx1cmwsZXN0aWxvLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsZmFuYXJ0LHRpcHBvbyxhZHVsdG9zPUZhbHNlKToNCglpZiB1cmwgIT0gJ25hZGEnOg0KCQlwYWdlX3dpdGhfeG1sID0gdXJsbGliMi51cmxvcGVuKHVybCkucmVhZGxpbmVzKCkNCgkJcGFzc2FlcGcgPSBUcnVlDQoJCWlmIHRpcHBvbyA9PSAnRGVzcG9ydG8nIG9yIHRpcHBvbyA9PSAnQ3JpYW5jYScgb3IgdGlwcG9vID09ICdDYW5hbCcgb3IgdGlwcG9vID09ICdEb2N1bWVudGFyaW8nIG9yIHRpcHBvbyA9PSAnTXVzaWNhJyBvciB0aXBwb28gPT0gJ0ZpbG1lJyBvciB0aXBwb28gPT0gJ05vdGljaWEnIG9yIHRpcHBvbyA9PSAnVFZzJzoNCgkJCWlmKF9fRVBHX18gIT0gJycpOg0KCQkJCXVybHFxcSA9IHVybGxpYi51cmxvcGVuKF9fRVBHX18pDQoJCQkJY29kaWdvID0gdXJscXFxLnJlYWQoKQ0KCQkJCXVybHFxcS5jbG9zZQ0KCQkJZWxzZToNCgkJCQlwYXNzYWVwZyA9IEZhbHNlDQoJDQoJCXRzID0gdGltZS50aW1lKCkNCgkJc3QgPSBpbnQoZGF0ZXRpbWUuZGF0ZXRpbWUuZnJvbXRpbWVzdGFtcCh0cykuc3RyZnRpbWUoJyVZJW0lZCVIJU0lUycpKQ0KCQlpZiB0aXBvID09ICdGaWxtZScgb3IgdGlwbyA9PSAnU2VyaWUnOg0KCQkJcmVmcmVzID0gJyoqJw0KCQllbHNlOg0KCQkJcmVmcmVzID0gJywnDQoJCWZvciBsaW5lIGluIHBhZ2Vfd2l0aF94bWw6DQoJCQl0b3RhbCA9IGxlbihsaW5lKQ0KCQkJb2JqZWN0byA9IGxpbmUuZGVjb2RlKCdsYXRpbi0xJykuZW5jb2RlKCJ1dGYtOCIpDQoJCQlwYXJhbXMgPSBvYmplY3RvLnNwbGl0KHJlZnJlcykJDQoJCQl0cnk6DQoJCQkJbm9tZWUgPSBwYXJhbXNbMF0NCgkJCQlydG1wID0gcGFyYW1zWzJdLnJlcGxhY2UoJyBydG1wJywncnRtcCcpLnJlcGxhY2UoJyBydHNwJywncnRzcCcpLnJlcGxhY2UoJyBodHRwJywnaHR0cCcpLnJlcGxhY2UoJ3V0aWxpemFkb3JsaXZlaXQnLF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikpLnJlcGxhY2UoJ3NlbmhhbGl2ZWl0JyxfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSkNCgkJCQlpbWcgPSBwYXJhbXNbMV0ucmVwbGFjZSgnIHJ0bXAnLCdydG1wJykucmVwbGFjZSgnIHJ0c3AnLCdydHNwJykucmVwbGFjZSgnIGh0dHAnLCdodHRwJykNCgkJCQlncnVwID0gcGFyYW1zWzNdDQoJCQkJaWRfaXQgPSBwYXJhbXNbNF0ucnN0cmlwKCkNCgkJCQlpZF9wID0gcGFyYW1zWzVdDQoJCQkJc3J0X2YgPSAnJw0KCQkJCWRlc2NyaSA9ICcnDQoJCQkJX2ZhbmFydCA9ICcnDQoJCQkJDQoJCQkJcGVzcXlvID0gcnRtcC5zcGxpdCgnaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0nKQ0KCQkJCXRvdGFsMiA9IGxlbihwZXNxeW8pDQoJCQkJaWYgdG90YWwyID4gMToNCgkJCQkJcnRtcCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS8/cGF0aD0vcm9vdC92aWRlbyZhY3Rpb249cGxheV92aWRlbyZ2aWRlb2lkPScrcGVzcXlvWzFdDQoJCQkJDQoJCQkJaWYgZ3J1cCA9PSBub21lOg0KCQkJCQlwcm9ncmFtYSA9ICcnDQoJCQkJCWlmIHRpcHBvbyA9PSAnRGVzcG9ydG8nIG9yIHRpcHBvbyA9PSAnQ3JpYW5jYScgb3IgdGlwcG9vID09ICdDYW5hbCcgb3IgdGlwcG9vID09ICdEb2N1bWVudGFyaW8nIG9yIHRpcHBvbyA9PSAnTXVzaWNhJyBvciB0aXBwb28gPT0gJ0ZpbG1lJyBvciB0aXBwb28gPT0gJ05vdGljaWEnIG9yIHRpcHBvbyA9PSAnVFZzJzoNCgkJCQkJCWlmIGlkX2l0ICE9ICcnOg0KCQkJCQkJCWlmIHBhc3NhZXBnOg0KCQkJCQkJCQl0d3J2ID0gVGhyZWFkV2l0aFJldHVyblZhbHVlKHRhcmdldD1nZXRQcm9ncmFtYWNhb0RpYXJpYSwgYXJncz0oaWRfaXQsIHN0LGNvZGlnbykpDQoJCQkJCQkJCXR3cnYuc3RhcnQoKQ0KCQkJCQkJCQlwcm9ncmFtYSA9IHR3cnYuam9pbigpDQoJCQkJCQ0KCQkJCQlpZiBwcm9ncmFtYSAhPSAnJzoNCgkJCQkJCW5vbWV3cCA9IG5vbWVlICsgIiB8ICIrIHByb2dyYW1hDQoJCQkJCWVsc2U6DQoJCQkJCQlub21ld3AgPSBub21lZQ0KCQkJCQkNCgkJCQkJaWYJdGlwbyA9PSAnRmlsbWUnIG9yIHRpcG8gPT0gJ1NlcmllJzoNCgkJCQkJCXNydF9mID0gcGFyYW1zWzZdDQoJCQkJCQlhbm8gPSBwYXJhbXNbN10NCgkJCQkJCXJlYWxpemFkb3IgPSAnRGlyZWN0b3I6ICcrcGFyYW1zWzhdDQoJCQkJCQlkZXNjcmkgPSBwYXJhbXNbOV0NCgkJCQkJCWRldGFsaGVzMSA9IGdydXANCgkJCQkJCWFyZ3VtZW50byA9IEFkZG9uVGl0bGUNCgkJCQkJCXBsb3QgPSAnRW5yZWRvOiAnK2Rlc2NyaQ0KCQkJCQkJZGV0YWxoZXMyID0gYW5vDQoJCQkJCQlpbWRiID0gJzQ1MTAzOTgnDQoJCQkJCQl2b3RlcyA9ICc1IGVzdHJlbGFzJw0KCQkJCQkJaW5mb0xhYmVscyA9IHsndGl0bGUnOm5vbWV3cCwgJ3Bsb3QnOnBsb3QsICd3cml0ZXInOiBhcmd1bWVudG8sICdkaXJlY3Rvcic6cmVhbGl6YWRvciwgJ2dlbnJlJzpkZXRhbGhlczEsICd5ZWFyJzogZGV0YWxoZXMyLCAnYWlyZWQnOmRldGFsaGVzMiwgJ0lNREJOdW1iZXInOmltZGIsICd2b3Rlcyc6dm90ZXMsICJjcmVkaXRzIjogbm9tZXdwfQ0KCQkJCQllbHNlOg0KCQkJCQkJaW5mb0xhYmVscyA9IHsidGl0bGUiOiBub21ld3AsICJnZW5yZSI6IHRpcG8sICJjcmVkaXRzIjogbm9tZXdwfQ0KCQkJCQkNCgkJCQkJDQoJCQkJCWFkZExpbmsobm9tZXdwLHJ0bXAsaW1nLGlkX2l0LHNydF9mLGRlc2NyaSx0aXBvLHRpcG9fdXNlcixpZF9wLGluZm9MYWJlbHMsZmFuYXJ0LHRpcHBvbyxhZHVsdG9zLHRvdGFsKQkJCQkNCgkJCWV4Y2VwdDoNCgkJCQlwYXNzDQoJCQ0KCQkjX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnVGlwbzogJyt0aXBvKQ0KCQlpZiB0aXBvID09ICdwYXRyb2NpbmFkb3Jlcycgb3IgdGlwbyA9PSAnbm92aWRhZGVzJyBvciB0aXBvID09ICdQcmFpYScgb3IgdGlwbyA9PSAncGVzcXVpc2EnIG9yIHRpcG8gPT0gJ2VzdGFkbycgb3IgdGlwbyA9PSAnUHJvZ3JhbWFzVFYnIG9yIG5vbWUgPT0gJ0V2ZW50b3MgRGnDoXJpb3MnOg0KCQkJZXN0aWxvU2VsZWN0ID0gcmV0dXJuZXN0aWxvKGVzdGlsbykNCgkJCXhibWMuZXhlY3V0ZWJ1aWx0aW4oZXN0aWxvU2VsZWN0KQ0KCQllbHNlOg0KCQkJaWYgdGlwbyA9PSAnRmlsbWUnIG9yIHRpcG8gPT0gJ1NlcmllJzoNCgkJCQl2aXN0YV9maWxtZXNTZXJpZXMoKQ0KCQkJZWxzZToNCgkJCQl2aXN0YV9DYW5haXMoKQ0KCQ0KCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoaW50KHN5cy5hcmd2WzFdKSxjYWNoZVRvRGlzYz1GYWxzZSkNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCQkJCQkJCUVQRwkJCQkJCQkJCQkJCQkgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpkZWYgb2J0ZXJfZmljaGVpcm9fZXBnKCk6DQoJaWYgbm90IHhibWN2ZnMuZXhpc3RzKF9fRk9MREVSX0VQR19fKToNCgkJeGJtY3Zmcy5ta2RpcnMoX19GT0xERVJfRVBHX18pDQoNCgl1bmNvbXByZXNzZWRfcGF0aCA9IG9zLnBhdGguam9pbihfX0ZPTERFUl9FUEdfXywgJ2VwZy54bWwnKQ0KCXVybCA9IHVybGxpYi51cmxvcGVuKF9fRVBHX18pDQoJY29kaWdvID0gdXJsLnJlYWQoKQ0KCXVybC5jbG9zZQ0KCQ0KCW9wZW4odW5jb21wcmVzc2VkX3BhdGgsICd3Jykud3JpdGUoY29kaWdvKQ0KDQpkZWYgZ2V0UHJvZ3JhbWFjYW9EaWFyaWEoaWRDYW5hbCwgZGlhaG9yYSwgY29kaWdvKToNCglzb3VyY2UgPSByZS5jb21waWxlKCc8cHJvZ3JhbW1lIHN0YXJ0PSIoLis/KSBcKzAxMDAiIHN0b3A9IiguKz8pIFwrMDEwMCIgY2hhbm5lbD0iJytpZENhbmFsKyciPlxzKzx0aXRsZSBsYW5nPSJwdCI+KC4rPyk8XC90aXRsZT4nKS5maW5kYWxsKGNvZGlnbykNCg0KCXByb2dyYW1hID0gJycNCg0KCWZvciBzdGFydCwgc3RvcCwgcHJvZ3JhbWExICBpbiBzb3VyY2U6DQoNCgkJaWYoaW50KHN0YXJ0KSA8IGRpYWhvcmEgYW5kIGludChzdG9wKSA+IGRpYWhvcmEpOg0KCQkJcHJvZ3JhbWEgPSBwcm9ncmFtYTENCglyZXR1cm4gcHJvZ3JhbWENCg0KDQpkZWYgcHJvZ3JhbWFjYW9fY2FuYWwoaWRDYW5hbCk6DQoJdXJsID0gdXJsbGliLnVybG9wZW4oX19FUEdfXykNCgljb2RpZ28gPSB1cmwucmVhZCgpDQoJdXJsLmNsb3NlDQoJDQoJdHMgPSB0aW1lLnRpbWUoKQ0KCXN0ID0gaW50KGRhdGV0aW1lLmRhdGV0aW1lLmZyb210aW1lc3RhbXAodHMpLnN0cmZ0aW1lKCclWSVtJWQnKSkNCg0KCWRpYWhvcmEgPSBpbnQoc3RyKHN0KSsnMDYwMDAwJykNCglkaWFhbWFuaGEgPSBpbnQoc3RyKHN0KzEpKycwNjAwMDAnKQ0KDQoJc291cmNlID0gcmUuY29tcGlsZSgnPHByb2dyYW1tZSBzdGFydD0iKC4rPykgXCswMTAwIiBzdG9wPSIoLis/KSBcKzAxMDAiIGNoYW5uZWw9IicraWRDYW5hbCsnIj5ccys8dGl0bGUgbGFuZz0icHQiPiguKz8pPFwvdGl0bGU+JykuZmluZGFsbChjb2RpZ28pDQoNCglwcm9ncmFtYSA9ICcnDQoNCgl0aXRsZXM9WydbQl1bQ09MT1Igd2hpdGVdUHJvZ3JhbWHDp8OjbzpbL0NPTE9SXVsvQl0nXQ0KDQoJDQoJZm9yIHN0YXJ0LCBzdG9wLCBwcm9ncmFtYTEgaW4gc291cmNlOg0KDQoJCXN0YXJ0MSA9IHJlLmNvbXBpbGUoJyhbMC05XXs0fVswLTFdWzAtOV1bMC0zXVswLTldKShbMC05XXsyfSkoWzAtOV17Mn0pKFswLTldezJ9KScpLmZpbmRhbGwoc3RhcnQpDQoJCXN0b3AxID0gcmUuY29tcGlsZSgnKFswLTldezR9WzAtMV1bMC05XVswLTNdWzAtOV0pKFswLTldezJ9KShbMC05XXsyfSkoWzAtOV17Mn0pJykuZmluZGFsbChzdG9wKQ0KDQoJCWlmKGludChzdGFydCkgPiBkaWFob3JhIGFuZCBpbnQoc3RhcnQpIDwgZGlhYW1hbmhhICk6DQoJCQl0aXRsZXMuYXBwZW5kKCdcbltCXSVzOiVzIC0+ICVzOiVzWy9CXSAtICVzJyAlIChzdGFydDFbMF1bMV0sIHN0YXJ0MVswXVsyXSwgc3RvcDFbMF1bMV0sIHN0b3AxWzBdWzJdLCBwcm9ncmFtYTEpKQ0KDQoNCglwcm9ncmFtYWNhbyA9ICdcbicuam9pbih0aXRsZXMpDQoJdHJ5Og0KCQl4Ym1jLmV4ZWN1dGVidWlsdGluKCJBY3RpdmF0ZVdpbmRvdygxMDE0NykiKQ0KCQl3aW5kb3cgPSB4Ym1jZ3VpLldpbmRvdygxMDE0NykNCgkJeGJtYy5zbGVlcCgxMDApDQoJCXdpbmRvdy5nZXRDb250cm9sKDEpLnNldExhYmVsKEFkZG9uVGl0bGUpDQoJCXdpbmRvdy5nZXRDb250cm9sKDUpLnNldFRleHQocHJvZ3JhbWFjYW8pDQoJZXhjZXB0Og0KCQlwYXNzDQoNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVEhSRUFEUyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmZyb20gdGhyZWFkaW5nIGltcG9ydCBUaHJlYWQNCg0KY2xhc3MgVGhyZWFkV2l0aFJldHVyblZhbHVlKFRocmVhZCk6DQoJZGVmIF9faW5pdF9fKHNlbGYsIGdyb3VwPU5vbmUsIHRhcmdldD1Ob25lLCBuYW1lPU5vbmUsDQoJCQkJIGFyZ3M9KCksIGt3YXJncz17fSwgVmVyYm9zZT1Ob25lKToNCgkJVGhyZWFkLl9faW5pdF9fKHNlbGYsIGdyb3VwLCB0YXJnZXQsIG5hbWUsIGFyZ3MsIGt3YXJncywgVmVyYm9zZSkNCgkJc2VsZi5fcmV0dXJuID0gTm9uZQ0KCWRlZiBydW4oc2VsZik6DQoJCWlmIHNlbGYuX1RocmVhZF9fdGFyZ2V0IGlzIG5vdCBOb25lOg0KCQkJc2VsZi5fcmV0dXJuID0gc2VsZi5fVGhyZWFkX190YXJnZXQoKnNlbGYuX1RocmVhZF9fYXJncywNCgkJCQkJCQkJCQkJCSoqc2VsZi5fVGhyZWFkX19rd2FyZ3MpDQoJZGVmIGpvaW4oc2VsZik6DQoJCVRocmVhZC5qb2luKHNlbGYpDQoJCXJldHVybiBzZWxmLl9yZXR1cm4NCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCQkJCQkJQWRkb24gRmlsbWVzIGUgU2VyaWVzCQkJCQkJCQkJICAjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KZGVmIGxpc3RhbWVudXNzZXJpZXMobm9tZV9ub3YsdXJsLGVzdGlsbyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLGljb25pbWFnZSxmYW5hcnQpOg0KCWNoZWNrX2xvZ2luID0gbG9naW4yKCkNCglpZiBjaGVja19sb2dpbiA9PSBUcnVlOg0KCQltZW51U2VyaWVzKG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdzZXJpZXMucG5nJyksX19TSVRFQWRkb25fXysnSW1hZ2Vucy9zZXJpZXNfZmFuYXJ0LnBuZycpDQoJZWxzZToNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnRXJybyBhIGZhemVyIGxvZ2luIG5lc3RhIHBhcnRlLiBUZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZS4nKQ0KDQpkZWYgbGlzdGFtZW51c2ZpbG1lcyhub21lX25vdix1cmwsZXN0aWxvLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsaWNvbmltYWdlLGZhbmFydCk6DQoJY2hlY2tfbG9naW4gPSBsb2dpbjIoKQ0KCWlmIGNoZWNrX2xvZ2luID09IFRydWU6DQoJCWRhdGFiYXNlID0gRGF0YWJhc2UuaXNFeGlzdHMoKQ0KCQlpZiB0aXBvX3VzZXIgIT0gJ1Rlc3RlJzoNCgkJCWZpbG1pbGluayA9IHVybCsnZW5pZ21hMi5waHA/dXNlcm5hbWU9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fbmFtZSIpKycmcGFzc3dvcmQ9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSsnJnR5cGU9Z2V0X3ZvZF9jYXRlZ29yaWVzJw0KCQkJYWRkRGlyKCdGaWxtZXMgZGEgTGlzdGEnLGZpbG1pbGluayxOb25lLDMzMzcsJ01pbmlhdHVyYScsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ZpbG1lcy5wbmcnKSwnJywnJywnJywnJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJykpDQoJCW1lbnVGaWxtZXMob3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ZpbG1lcy5wbmcnKSxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL2ZpbG1lc19mYW5hcnQucG5nJykNCgllbHNlOg0KCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdFcnJvIGEgZmF6ZXIgbG9naW4gbmVzdGEgcGFydGUuIFRlbnRlIG5vdmFtZW50ZSBtYWlzIHRhcmRlLicpDQoNCmRlZiBsaXN0YW1lbnVzYW5pbWVzKG5vbWVfbm92LHVybCxlc3RpbG8sdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixpY29uaW1hZ2UsZmFuYXJ0KToNCgljaGVja19sb2dpbiA9IGxvZ2luMigpDQoJaWYgY2hlY2tfbG9naW4gPT0gVHJ1ZToNCgkJbWVudUFuaW1lcyhvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnYW5pbWVzLnBuZycpLF9fU0lURUFkZG9uX18rJ0ltYWdlbnMvc2VyaWVzX2ZhbmFydC5wbmcnKQ0KCWVsc2U6DQoJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ0Vycm8gYSBmYXplciBsb2dpbiBuZXN0YSBwYXJ0ZS4gVGVudGUgbm92YW1lbnRlIG1haXMgdGFyZGUuJykNCg0KZGVmIG1lbnVGaWxtZXMoaWNvbmltYWdlLGZhbmFydCk6DQoJZXZlbnRvID0gZ2V0RXZlbnRvcygpDQoJaWYgZXZlbnRvOg0KCQlhZGREaXIyKCdbQl0nK2V2ZW50bysnWy9CXScsIF9fQVBJX1NJVEVfXysnZXZlbnRvLzEnLCAxMTEsICdmaWxtZXMnLCBpY29uaW1hZ2UsIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCgkJYWRkRGlyMignICcsICcnLCAwLCAnJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ25hZGEucG5nJyksIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCglhZGREaXIyKCdUb2RvcyBvcyBGaWxtZXMnLCBfX0FQSV9TSVRFX18rJ2ZpbG1lcycsIDExMSwgJ2ZpbG1lcycsIGljb25pbWFnZSwgMSwgTm9uZSwgTm9uZSwgZmFuYXJ0KQ0KCWFkZERpcjIoJ0ZpbG1lcyBlbSBEZXN0YXF1ZScsICBfX0FQSV9TSVRFX18rJ2ZpbG1lcy9kZXN0YXF1ZScsIDExMSwgJ2ZpbG1lcycsIGljb25pbWFnZSwgMSwgTm9uZSwgTm9uZSwgZmFuYXJ0KQ0KCWFkZERpcjIoJ0ZpbG1lcyBwb3IgQW5vJywgX19BUElfU0lURV9fKydmaWxtZXMvYW5vJywgMTE5LCAnbGlzdGFnZW1Bbm9zJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Fuby5wbmcnKSwgMSwgTm9uZSwgTm9uZSwgZmFuYXJ0KQ0KCWFkZERpcjIoJ0ZpbG1lcyBwb3IgR2VuZXJvJywgX19BUElfU0lURV9fKydmaWxtZXMvY2F0ZWdvcmlhJywgMTE4LCAnbGlzdGFnZW1HZW5lcm9zJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2dlbmVyby5wbmcnKSwgMSwgTm9uZSwgTm9uZSwgZmFuYXJ0KQ0KDQoJdmlzdGFfbWVudSgpDQoNCmRlZiBtZW51U2VyaWVzKGljb25pbWFnZSxmYW5hcnQpOg0KCWRhdGFiYXNlID0gRGF0YWJhc2UuaXNFeGlzdHMoKQ0KCWFkZERpcjIoJ1RvZGFzIGFzIFNlcmllcycsIF9fQVBJX1NJVEVfXysnc2VyaWVzJywgMTIzLCAnc2VyaWVzJywgaWNvbmltYWdlLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoJYWRkRGlyMignU2VyaWVzIGVtIERlc3RhcXVlJywgIF9fQVBJX1NJVEVfXysnc2VyaWVzL2Rlc3RhcXVlJywgMTIzLCAnc2VyaWVzJywgaWNvbmltYWdlLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoJYWRkRGlyMignU2VyaWVzIHBvciBBbm8nLCBfX0FQSV9TSVRFX18rJ3Nlcmllcy9hbm8nLCAxMTksICdsaXN0YWdlbUFub3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnYW5vLnBuZycpLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoJYWRkRGlyMignU2VyaWVzIHBvciBHZW5lcm8nLCBfX0FQSV9TSVRFX18rJ3Nlcmllcy9jYXRlZ29yaWEnLCAxMTgsICdsaXN0YWdlbUdlbmVyb3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZ2VuZXJvLnBuZycpLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoNCgl2aXN0YV9tZW51KCkNCg0KZGVmIG1lbnVBbmltZXMoaWNvbmltYWdlLGZhbmFydCk6DQoJZGF0YWJhc2UgPSBEYXRhYmFzZS5pc0V4aXN0cygpDQoJYWRkRGlyMignVG9kb3Mgb3MgQW5pbWVzJywgX19BUElfU0lURV9fKydhbmltZXMnLCAxMjMsICdhbmltZXMnLCBpY29uaW1hZ2UsIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCglhZGREaXIyKCdBbmltZXMgZW0gRGVzdGFxdWUnLCAgX19BUElfU0lURV9fKydhbmltZXMvZGVzdGFxdWUnLCAxMjMsICdhbmltZXMnLCBpY29uaW1hZ2UsIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCglhZGREaXIyKCdBbmltZXMgcG9yIEFubycsIF9fQVBJX1NJVEVfXysnYW5pbWVzL2FubycsIDExOSwgJ2xpc3RhZ2VtQW5vcycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdhbm8ucG5nJyksIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCglhZGREaXIyKCdBbmltZXMgcG9yIEdlbmVybycsIF9fQVBJX1NJVEVfXysnYW5pbWVzL2NhdGVnb3JpYScsIDExOCwgJ2xpc3RhZ2VtR2VuZXJvcycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdnZW5lcm8ucG5nJyksIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCg0KCXZpc3RhX21lbnUoKQ0KDQpkZWYgcmVtb3ZlckFjZW50b3ModHh0LCBlbmNvZGluZz0ndXRmLTgnKToNCglyZXR1cm4gbm9ybWFsaXplKCdORktEJywgdHh0LmRlY29kZShlbmNvZGluZykpLmVuY29kZSgnQVNDSUknLCdpZ25vcmUnKQ0KDQpkZWYgZmlsbWVzKHVybCwgcGFnaW5hKToNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCglyZXN1bHRhZG8gPSBhYnJpcl91cmwodXJsLCBoZWFkZXI9aGVhZGVycykNCglpZiByZXN1bHRhZG8gPT0gJ0ROUyc6DQoJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCXJldHVybiBGYWxzZQ0KCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCWZvciBpIGluIHJlc3VsdGFkb1snZGF0YSddOg0KCQljYXRlZ29yaWEgPSBpWydjYXRlZ29yaWExJ10NCgkJaWYgaVsnY2F0ZWdvcmlhMiddICE9ICcnOg0KCQkJY2F0ZWdvcmlhICs9ICcsJytpWydjYXRlZ29yaWEyJ10NCgkJaWYgaVsnY2F0ZWdvcmlhMyddICE9ICcnOg0KCQkJY2F0ZWdvcmlhICs9ICcsJytpWydjYXRlZ29yaWEzJ10NCgkJdmlzdG8gPSBGYWxzZQ0KCQlwdCA9ICcnDQoJCWNvciA9ICJ3aGl0ZSINCgkJYnIgPSAnJw0KCQlpZiAnQnJhc2lsZWlybycgaW4gY2F0ZWdvcmlhOg0KCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQlpZiAnUG9ydHUnIGluIGNhdGVnb3JpYToNCgkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJaWYgJ1BUJyBpbiBpWydJTUJEJ106DQoJCQlpWydJTUJEJ10gPSByZS5jb21waWxlKCcoLis/KVBUJykuZmluZGFsbChpWydJTUJEJ10pWzBdDQoJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCWlmIGlbJ3Zpc3RvJ10gPT0gMToNCgkJCXZpc3RvID0gVHJ1ZQ0KDQoJCWluZm9MYWJlbHMgPSB7J1RpdGxlJzogaVsnbm9tZV9pbmdsZXMnXSwgJ1llYXInOiBpWydhbm8nXSwgJ0dlbnJlJzogY2F0ZWdvcmlhLCAnUGxvdCc6IGlbJ2Rlc2NyaWNhb192aWRlbyddLCAnQ2FzdCc6aVsnYXRvcmVzJ10uc3BsaXQoJywnKSwgJ1RyYWlsZXInOiBpWyd0cmFpbGVyJ10sICdEaXJlY3Rvcic6IGlbJ2RpcmV0b3InXSwgJ1JhdGluZyc6IGlbJ2ltZGJSYXRpbmcnXSwgJ0lNREJOdW1iZXInOiBpWydJTUJEJ10gfQ0KCQkNCgkJdHJ5Og0KCQkJbm9tZSA9IGlbJ25vbWVfaW5nbGVzJ10uZGVjb2RlKCd1dGYtOCcpDQoJCWV4Y2VwdDoNCgkJCW5vbWUgPSBpWydub21lX2luZ2xlcyddLmVuY29kZSgndXRmLTgnKQ0KCQlpZiAnaHR0cCcgbm90IGluIGlbJ2ZvdG8nXToNCgkJCWlbJ2ZvdG8nXSA9IF9fQVBJX18rJ2ltYWdlcy9jYXBhcy8nK2lbJ2ZvdG8nXS5zcGxpdCgnLycpWy0xXQ0KCQkJI2lbJ2ZvdG8nXSA9IGlbJ2ZvdG8nXS5yZXBsYWNlKCdQVCcsJycpDQoJCQ0KCQlub21lZWUgPSAnW0NPTE9SICcrY29yKyddJytwdCticityZW1vdmVyQWNlbnRvcyhub21lKSsnICgnK2lbJ2FubyddKycpWy9DT0xPUl0nDQoJCXVybG5vbyA9IF9fQVBJX1NJVEVfXysnZmlsbWUvJytzdHIoaVsnaWRfdmlkZW8nXSkNCgkJZm90b29vID0gaVsnZm90byddDQoJCSNpWydiYWNrZ3JvdW5kJ10gPSBpWydiYWNrZ3JvdW5kJ10ucmVwbGFjZSgnUFQnLCcnKQ0KCQlpWydiYWNrZ3JvdW5kJ10gPSAnaW1hZ2VzL2JhY2tncm91bmQvJytpWydJTUJEJ10rJy5qcGcnDQoJCWZhbmFydHR0ID0gX19BUElfXytpWydiYWNrZ3JvdW5kJ10NCgkJYWRkVmlkZW8obm9tZWVlLCB1cmxub28sIDExMywgZm90b29vLHZpc3RvLCAnZmlsbWUnLCAwLCAwLCBpbmZvTGFiZWxzLCBmYW5hcnR0dCwgdHJhaWxlcj1pWyd0cmFpbGVyJ10pDQoJCQ0KCWN1cnJlbnQgPSByZXN1bHRhZG9bJ21ldGEnXVsncGFnaW5hdGlvbiddWydjdXJyZW50X3BhZ2UnXQ0KCXRvdGFsID0gcmVzdWx0YWRvWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsndG90YWxfcGFnZXMnXQ0KCXRyeTogcHJveGltbyA9IHJlc3VsdGFkb1snbWV0YSddWydwYWdpbmF0aW9uJ11bJ2xpbmtzJ11bJ25leHQnXQ0KCWV4Y2VwdDogcGFzcyANCglpZiBjdXJyZW50IDwgdG90YWw6DQoJCWFkZERpcjIoJ1Byw7N4aW1hIHDDoWdpbmEgKCcrc3RyKGN1cnJlbnQpKycvJytzdHIodG90YWwpKycpJywgcHJveGltbywgMTExLCAnZmlsbWVzJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Byb3hpbW8ucG5nJyksMSkNCgl2aXN0YV9maWxtZXNTZXJpZXMoKQ0KDQpkZWYgc2VyaWVzKHVybCk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJcmVzdWx0YWRvID0gYWJyaXJfdXJsKHVybCwgaGVhZGVyPWhlYWRlcnMpDQoJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdUZW0gZGUgYWx0ZXJhciBvcyBETlMgcGFyYSBwb2RlciB1c3VmcnVpciBkbyBhZGRvbi4nKQ0KCQlyZXR1cm4gRmFsc2UNCglyZXN1bHRhZG8gPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCglpZiAnc2VyaWUnIGluIHVybDoNCgkJdGlwbyA9ICdzZXJpZScNCgllbGlmICdhbmltZScgaW4gdXJsOg0KCQl0aXBvID0gJ2FuaW1lJw0KCWZvciBpIGluIHJlc3VsdGFkb1snZGF0YSddOg0KCQljYXRlZ29yaWEgPSBpWydjYXRlZ29yaWExJ10NCgkJaWYgaVsnY2F0ZWdvcmlhMiddICE9ICcnOg0KCQkJY2F0ZWdvcmlhICs9ICcsJytpWydjYXRlZ29yaWEyJ10NCgkJaWYgaVsnY2F0ZWdvcmlhMyddICE9ICcnOg0KCQkJY2F0ZWdvcmlhICs9ICcsJytpWydjYXRlZ29yaWEzJ10NCgkJYnIgPSAnJw0KCQlwdCA9ICcnDQoJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQliciA9ICdbQl1bQ09MT1IgZ3JlZW5dQlsvQ09MT1JdW0NPTE9SIHllbGxvd11SWy9DT0xPUl06IFsvQl0nDQoJCWlmICdQb3J0dScgaW4gY2F0ZWdvcmlhOg0KCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQlpZiAnUFQnIGluIGlbJ0lNQkQnXToNCgkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJaW5mb0xhYmVscyA9IHsnVGl0bGUnOiBpWydub21lX2luZ2xlcyddLCAnWWVhcic6IGlbJ2FubyddLCAnR2VucmUnOiBjYXRlZ29yaWEsICdQbG90JzogaVsnZGVzY3JpY2FvX3ZpZGVvJ10sICdDYXN0JzppWydhdG9yZXMnXS5zcGxpdCgnLCcpLCAnVHJhaWxlcic6IGlbJ3RyYWlsZXInXSwgJ0RpcmVjdG9yJzogaVsnZGlyZXRvciddLCAnUmF0aW5nJzogaVsnaW1kYlJhdGluZyddLCAnQ29kZSc6IGlbJ0lNQkQnXSB9DQoJDQoJCXRyeToNCgkJCW5vbWUgPSBpWydub21lX2luZ2xlcyddLmRlY29kZSgndXRmLTgnKQ0KCQlleGNlcHQ6DQoJCQlub21lID0gaVsnbm9tZV9pbmdsZXMnXS5lbmNvZGUoJ3V0Zi04JykNCgkJaWYgJ2h0dHAnIG5vdCBpbiBpWydmb3RvJ106DQoJCQlpWydmb3RvJ10gPSBfX0FQSV9fKydpbWFnZXMvY2FwYXMvJytpWydmb3RvJ10uc3BsaXQoJy8nKVstMV0NCgkJCSNpWydmb3RvJ10gPSBpWydmb3RvJ10ucmVwbGFjZSgnUFQnLCcnKQ0KCQlpZiBpWyd2aXN0byddID09IDE6DQoJCQl2aXN0bz1UcnVlDQoJCWVsc2U6DQoJCQl2aXN0bz1GYWxzZQ0KCQkNCgkJDQoJCW5vbWVlZSA9IHB0K2JyK3JlbW92ZXJBY2VudG9zKG5vbWUpKycgKCcraVsnYW5vJ10rJyknDQoJCWZvdG9vbyA9IGlbJ2ZvdG8nXQ0KCQkjaVsnYmFja2dyb3VuZCddID0gaVsnYmFja2dyb3VuZCddLnJlcGxhY2UoJ1BUJywnJykNCgkJaVsnYmFja2dyb3VuZCddID0gJ2ltYWdlcy9iYWNrZ3JvdW5kLycraVsnSU1CRCddKycuanBnJw0KCQlmYW5hcnR0dCA9IF9fQVBJX18raVsnYmFja2dyb3VuZCddDQoJCWFkZERpcjIobm9tZWVlLCBfX0FQSV9TSVRFX18rdGlwbysnLycrc3RyKGlbJ2lkX3ZpZGVvJ10pLCAxMTQsICd0ZW1wb3JhZGFzJywgZm90b29vLCB0aXBvPSdzZXJpZScsIGluZm9MYWJlbHM9aW5mb0xhYmVscyxwb3N0ZXI9ZmFuYXJ0dHQsdmlzdG89dmlzdG8pDQoJDQoJY3VycmVudCA9IHJlc3VsdGFkb1snbWV0YSddWydwYWdpbmF0aW9uJ11bJ2N1cnJlbnRfcGFnZSddDQoJdG90YWwgPSByZXN1bHRhZG9bJ21ldGEnXVsncGFnaW5hdGlvbiddWyd0b3RhbF9wYWdlcyddDQoJdHJ5OiBwcm94aW1vID0gcmVzdWx0YWRvWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsnbGlua3MnXVsnbmV4dCddDQoJZXhjZXB0OiBwYXNzIA0KCWlmIGN1cnJlbnQgPCB0b3RhbDoNCgkJYWRkRGlyMignUHJveGltYSBwYWdpbmEgKCcrc3RyKGN1cnJlbnQpKycvJytzdHIodG90YWwpKycpJywgcHJveGltbywgMTIzLCAnc2VyaWVzJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Byb3hpbW8ucG5nJykpDQoJDQoJdmlzdGFfZmlsbWVzU2VyaWVzKCkNCg0KZGVmIGdldFNlYXNvbnModXJsKToNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCglyZXN1bHRhZG8gPSBhYnJpcl91cmwodXJsLCBoZWFkZXI9aGVhZGVycykNCglpZiByZXN1bHRhZG8gPT0gJ0ROUyc6DQoJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCXJldHVybiBGYWxzZQ0KCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCWo9MQ0KCXdoaWxlIGogPD0gcmVzdWx0YWRvWyd0ZW1wb3JhZGFzJ106DQoJCWFkZERpcjIoIltCXVRlbXBvcmFkYVsvQl0gIitzdHIoaiksIHVybCsnL3RlbXBvcmFkYS8nK3N0cihqKSwgMTE1LCAnZXBpc29kaW9zJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywndGVtcG9yYWRhcycsICd0ZW1wb3JhZGEnK3N0cihqKSsnLnBuZycpLHBvc3Rlcj1fX0FQSV9fK3Jlc3VsdGFkb1snYmFja2dyb3VuZCddKQ0KCQlqKz0xDQoJDQoJdmlzdGFfdGVtcG9yYWRhcygpDQoNCmRlZiBnZXRFcGlzb2Rlcyh1cmwpOg0KCWhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJXMnICUgX19BRERPTl9fLmdldFNldHRpbmcoJ3Rva2VuTXJwaXJhY3knKQ0KCXJlc3VsdGFkbyA9IGFicmlyX3VybCh1cmwsIGhlYWRlcj1oZWFkZXJzKQ0KCWlmIHJlc3VsdGFkbyA9PSAnRE5TJzoNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJaWYgJ3NlcmllJyBpbiB1cmw6DQoJCXRpcG8gPSAnc2VyaWUnDQoJZWxpZiAnYW5pbWUnIGluIHVybDoNCgkJdGlwbyA9ICdhbmltZScNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCglyZXN1bHRhZG9TID0gYWJyaXJfdXJsKF9fQVBJX1NJVEVfXyt0aXBvKycvJyt1cmwuc3BsaXQoJy8nKVs1XSwgaGVhZGVyPWhlYWRlcnMpDQoJcmVzdWx0YWRvUyA9IGpzb24ubG9hZHMocmVzdWx0YWRvUykNCglmb3IgaSBpbiByZXN1bHRhZG9bJ2RhdGEnXToNCgkJaWYgaVsnVVJMJ10gPT0gJycgYW5kIGlbJ1VSTDInXSA9PSAnJzoNCgkJCWNvbnRpbnVlDQoJCXB0ID0gJycNCgkJY2F0ZWdvcmlhID0gcmVzdWx0YWRvU1snY2F0ZWdvcmlhMSddDQoJCWlmIHJlc3VsdGFkb1NbJ2NhdGVnb3JpYTInXSAhPSAnJzoNCgkJCWNhdGVnb3JpYSArPSAnLCcrcmVzdWx0YWRvU1snY2F0ZWdvcmlhMiddDQoJCWlmIHJlc3VsdGFkb1NbJ2NhdGVnb3JpYTMnXSAhPSAnJzoNCgkJCWNhdGVnb3JpYSArPSAnLCcrcmVzdWx0YWRvU1snY2F0ZWdvcmlhMyddDQoJCWluZm9MYWJlbHMgPSB7J1RpdGxlJzogaVsnbm9tZV9lcGlzb2RpbyddLCAnQ29kZSc6IGlbJ0lNQkQnXSwgJ0VwaXNvZGUnOiBpWydlcGlzb2RpbyddLCAnU2Vhc29uJzogaVsndGVtcG9yYWRhJ10gfQ0KCQl0cnk6DQoJCQlub21lID0gaVsnbm9tZV9lcGlzb2RpbyddLmRlY29kZSgndXRmLTgnKQ0KCQlleGNlcHQ6DQoJCQlub21lID0gaVsnbm9tZV9lcGlzb2RpbyddLmVuY29kZSgndXRmLTgnKQ0KCQliciA9ICcnDQoJCWZpbmFsID0gJycNCgkJc2VtTGVnZW5kYSA9ICcnDQoJCWlmIGlbJ2ZpbXRlbXBvcmFkYSddID09IDE6DQoJCQlmaW5hbCA9ICdbQl1GaW5hbCBkYSBUZW1wb3JhZGEgWy9CXScNCgkJaWYgaVsnc2VtbGVnZW5kYSddID09IDE6DQoJCQlzZW1MZWdlbmRhID0gJ1tDT0xPUiByZWRdW0JdUy8gTEVHRU5EQSBbL0JdWy9DT0xPUl0nDQoJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQliciA9ICdbQl1bQ09MT1IgZ3JlZW5dQlsvQ09MT1JdW0NPTE9SIHllbGxvd11SWy9DT0xPUl06IFsvQl0nDQoJCWlmICdQb3J0dScgaW4gY2F0ZWdvcmlhOg0KCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQlpZiAnUFQnIGluIGlbJ0lNQkQnXToNCgkJCWlbJ0lNQkQnXSA9IHJlLmNvbXBpbGUoJyguKz8pUFQnKS5maW5kYWxsKGlbJ0lNQkQnXSlbMF0NCgkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJdmlzdG8gPSBGYWxzZQ0KCQljb3IgPSAnd2hpdGUnDQoJCWlmIGlbJ3Zpc3RvJ10gPT0gMToNCgkJCXZpc3RvID0gVHJ1ZQkNCgkJDQoJCWltYWdlbSA9ICcnDQoJCWlmIGlbJ2ltYWdlbSddID09IDE6DQoJCQlpbWFnZW0gPSBfX0FQSV9fKydpbWFnZXMvc2VyaWVzLycraVsnSU1CRCddKycuanBnJw0KCQllbGlmIGlbJ2ltYWdlbSddID09IDA6DQoJCQlpbWFnZW0gPSBfX0FQSV9fKydpbWFnZXMvY2FwYXMvJytpWydpbWRiU2VyaWUnXSsnLmpwZycNCgkJDQoJCSNpbWFnZW0gPSBpbWFnZW0ucmVwbGFjZSgnUFQnLCcnKQ0KCQkjaVsnYmFja2dyb3VuZCddID0gaVsnYmFja2dyb3VuZCddLnJlcGxhY2UoJ1BUJywnJykNCgkJaVsnYmFja2dyb3VuZCddID0gJ2ltYWdlcy9iYWNrZ3JvdW5kLycraVsnSU1CRCddKycuanBnJw0KCQlmYW5hcnR0dCA9IF9fQVBJX18raVsnYmFja2dyb3VuZCddDQoJCQ0KCQlub21lZWUgPSBwdCticitmaW5hbCtzZW1MZWdlbmRhKydbQ09MT1IgJytjb3IrJ11bQl1FcGlzb2RpbyAnK3N0cihpWydlcGlzb2RpbyddKSsnWy9CXVsvQ09MT1JdICcrcmVtb3ZlckFjZW50b3Mobm9tZSkNCgkJDQoJCWFkZFZpZGVvKG5vbWVlZSwgX19BUElfU0lURV9fK3RpcG8rJy8nK3N0cihpWydpZF9zZXJpZSddKSsnL2VwaXNvZGlvLycrc3RyKGlbJ2lkX2VwaXNvZGlvJ10pLCAxMTMsIGltYWdlbSwgdmlzdG8sICdlcGlzb2RpbycsIGlbJ3RlbXBvcmFkYSddLCBpWydlcGlzb2RpbyddLCBpbmZvTGFiZWxzLCBmYW5hcnR0dCkNCgkNCgl2aXN0YV9lcGlzb2Rpb3MoKQ0KDQpkZWYgZ2V0R2VuZXJvcyh1cmwpOg0KCWhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJXMnICUgX19BRERPTl9fLmdldFNldHRpbmcoJ3Rva2VuTXJwaXJhY3knKQ0KCXJlc3VsdGFkbyA9IGFicmlyX3VybChfX0FQSV9TSVRFX18rJ2NhdGVnb3JpYXMnLCBoZWFkZXI9aGVhZGVycykNCglpZiByZXN1bHRhZG8gPT0gJ0ROUyc6DQoJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCXJldHVybiBGYWxzZQ0KCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KDQoJZm9yIGkgaW4gcmVzdWx0YWRvOg0KCQlpZiBpWydpZF9jYXRlZ29yaWEnXSA9PSAwOg0KCQkJY29udGludWUNCgkJaWYgJ2ZpbG1lJyBub3QgaW4gdXJsIGFuZCBpWyd0aXBvJ10gPT0gMToNCgkJCWNvbnRpbnVlDQoJCWFkZERpcjIoaVsnY2F0ZWdvcmlhcyddLCB1cmwrJy8nK3N0cihpWydpZF9jYXRlZ29yaWEnXSksIDEyMiwgJ2NhdGVnb3JpYXMnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZ2VuZXJvLnBuZycpKQ0KCQ0KCXZpc3RhX21lbnUoKQ0KDQpkZWYgY2F0ZWdvcmlhcyh1cmwpOg0KCWhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJXMnICUgX19BRERPTl9fLmdldFNldHRpbmcoJ3Rva2VuTXJwaXJhY3knKQ0KCXJlc3VsdGFkbyA9IGFicmlyX3VybCh1cmwsIGhlYWRlcj1oZWFkZXJzKQ0KCWlmIHJlc3VsdGFkbyA9PSAnRE5TJzoNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJcmVzdWx0YWRvYSA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCQ0KCWZvciBpIGluIHJlc3VsdGFkb2FbImRhdGEiXToNCgkJaWYgJ2ZpbG1lJyBpbiB1cmw6DQoJCQlyZXN1bHRhZG8gPSBhYnJpcl91cmwoX19BUElfU0lURV9fKydmaWxtZS8nK3N0cihpWydpZF92aWRlbyddKSwgaGVhZGVyPWhlYWRlcnMpDQoJCQlyZXN1bHRhZG8gPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCgkJCWNhdGVnb3JpYSA9IHJlc3VsdGFkb1snY2F0ZWdvcmlhMSddDQoJCQlpZiByZXN1bHRhZG9bJ2NhdGVnb3JpYTInXSAhPSAnJzoNCgkJCQljYXRlZ29yaWEgKz0gJywnK3Jlc3VsdGFkb1snY2F0ZWdvcmlhMiddDQoJCQlpZiByZXN1bHRhZG9bJ2NhdGVnb3JpYTMnXSAhPSAnJzoNCgkJCQljYXRlZ29yaWEgKz0gJywnK3Jlc3VsdGFkb1snY2F0ZWdvcmlhMyddDQoJCQkNCgkJCXRyeToNCgkJCQlub21lID0gcmVzdWx0YWRvWydub21lX2luZ2xlcyddLmRlY29kZSgndXRmLTgnKQ0KCQkJZXhjZXB0Og0KCQkJCW5vbWUgPSByZXN1bHRhZG9bJ25vbWVfaW5nbGVzJ10uZW5jb2RlKCd1dGYtOCcpDQoJCQlpZiAnaHR0cCcgbm90IGluIHJlc3VsdGFkb1snZm90byddOg0KCQkJCXJlc3VsdGFkb1snZm90byddID0gX19BUElfXysnaW1hZ2VzL2NhcGFzLycrcmVzdWx0YWRvWydmb3RvJ10uc3BsaXQoJy8nKVstMV0NCgkJCXB0ID0gJycNCgkJCWJyID0gJycNCgkJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BvcnR1JyBpbiBjYXRlZ29yaWE6DQoJCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQkJY29yID0gIndoaXRlIg0KCQkJaWYgJ1BUJyBpbiByZXN1bHRhZG9bJ0lNQkQnXToNCgkJCQlyZXN1bHRhZG9bJ0lNQkQnXSA9IHJlLmNvbXBpbGUoJyguKz8pUFQnKS5maW5kYWxsKHJlc3VsdGFkb1snSU1CRCddKVswXQ0KCQkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJCXZpc3RvID0gRmFsc2UNCgkJCQ0KCQkJaW5mb0xhYmVscyA9IHsnVGl0bGUnOiByZXN1bHRhZG9bJ25vbWVfaW5nbGVzJ10sICdZZWFyJzogcmVzdWx0YWRvWydhbm8nXSwgJ0dlbnJlJzogY2F0ZWdvcmlhLCAnUGxvdCc6cmVzdWx0YWRvWydkZXNjcmljYW9fdmlkZW8nXSwgJ0Nhc3QnOnJlc3VsdGFkb1snYXRvcmVzJ10uc3BsaXQoJywnKSwgJ1RyYWlsZXInOiByZXN1bHRhZG9bJ3RyYWlsZXInXSwgJ0RpcmVjdG9yJzogcmVzdWx0YWRvWydkaXJldG9yJ10sICdSYXRpbmcnOiByZXN1bHRhZG9bJ2ltZGJSYXRpbmcnXSwgJ0lNREJOdW1iZXInOiByZXN1bHRhZG9bJ0lNQkQnXSB9DQoJCQlub21lZWUgPSAnW0NPTE9SICcrY29yKyddJytwdCticityZW1vdmVyQWNlbnRvcyhub21lKSsnICgnK3Jlc3VsdGFkb1snYW5vJ10rJylbL0NPTE9SXScNCgkJCXVybG5vbyA9IF9fQVBJX1NJVEVfXysnZmlsbWUvJytzdHIocmVzdWx0YWRvWydpZF92aWRlbyddKQ0KCQkJDQoJCQlmb3Rvb28gPSByZXN1bHRhZG9bJ2ZvdG8nXQ0KCQkJI2ZvdG9vbyA9IGZvdG9vby5yZXBsYWNlKCdQVCcsJycpDQoJCQkjcmVzdWx0YWRvWydiYWNrZ3JvdW5kJ10gPSByZXN1bHRhZG9bJ2JhY2tncm91bmQnXS5yZXBsYWNlKCdQVCcsJycpDQoJCQlyZXN1bHRhZG9bJ2JhY2tncm91bmQnXSA9ICdpbWFnZXMvYmFja2dyb3VuZC8nK3Jlc3VsdGFkb1snSU1CRCddKycuanBnJw0KCQkJZmFuYXJ0dHQgPSBfX0FQSV9fK3Jlc3VsdGFkb1snYmFja2dyb3VuZCddDQoJCQkNCgkJCWFkZFZpZGVvKG5vbWVlZSwgdXJsbm9vLCAxMTMsIGZvdG9vbyx2aXN0bywgJ3BsYXllcicsIDAsIDAsIGluZm9MYWJlbHMsIGZhbmFydHR0LCB0cmFpbGVyPXJlc3VsdGFkb1sndHJhaWxlciddKQ0KCQllbGlmICdzZXJpZScgaW4gdXJsIG9yICdhbmltZScgaW4gdXJsOg0KCQkJY29yID0gIndoaXRlIg0KCQkJaWYgJ3NlcmllJyBpbiB1cmw6DQoJCQkJdGlwbyA9ICdzZXJpZScNCgkJCWVsaWYgJ2FuaW1lJyBpbiB1cmw6DQoJCQkJdGlwbyA9ICdhbmltZScNCgkJCXJlc3VsdGFkbyA9IGFicmlyX3VybChfX0FQSV9TSVRFX18rdGlwbysnLycrc3RyKGlbJ2lkX3ZpZGVvJ10pLCBoZWFkZXI9aGVhZGVycykNCgkJCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCQkJY2F0ZWdvcmlhID0gcmVzdWx0YWRvWydjYXRlZ29yaWExJ10NCgkJCWlmIHJlc3VsdGFkb1snY2F0ZWdvcmlhMiddICE9ICcnOg0KCQkJCWNhdGVnb3JpYSArPSAnLCcrcmVzdWx0YWRvWydjYXRlZ29yaWEyJ10NCgkJCWlmIHJlc3VsdGFkb1snY2F0ZWdvcmlhMyddICE9ICcnOg0KCQkJCWNhdGVnb3JpYSArPSAnLCcrcmVzdWx0YWRvWydjYXRlZ29yaWEzJ10NCgkJCXB0ID0gJycNCgkJCWJyID0gJycNCgkJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BvcnR1JyBpbiBjYXRlZ29yaWE6DQoJCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BUJyBpbiByZXN1bHRhZG9bJ0lNQkQnXToNCgkJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCQl0cnk6DQoJCQkJbm9tZSA9IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXS5kZWNvZGUoJ3V0Zi04JykNCgkJCWV4Y2VwdDoNCgkJCQlub21lID0gcmVzdWx0YWRvWydub21lX2luZ2xlcyddLmVuY29kZSgndXRmLTgnKQ0KCQkJaWYgJ2h0dHAnIG5vdCBpbiByZXN1bHRhZG9bJ2ZvdG8nXToNCgkJCQlyZXN1bHRhZG9bJ2ZvdG8nXSA9IF9fQVBJX1NJVEVfXysnaW1hZ2VzL2NhcGFzLycrcmVzdWx0YWRvWydmb3RvJ10uc3BsaXQoJy8nKVstMV0NCgkJCXZpc3RvID0gRmFsc2UNCgkJCWlmIHJlc3VsdGFkb1sndmlzdG8nXSA9PSAxOg0KCQkJCXZpc3RvPVRydWUNCgkJCQ0KCQkJaW5mb0xhYmVscyA9IHsnVGl0bGUnOiByZXN1bHRhZG9bJ25vbWVfaW5nbGVzJ10sICdZZWFyJzogcmVzdWx0YWRvWydhbm8nXSwgJ0dlbnJlJzogY2F0ZWdvcmlhLCAnUGxvdCc6IHJlc3VsdGFkb1snZGVzY3JpY2FvX3ZpZGVvJ10sICdDYXN0JzpyZXN1bHRhZG9bJ2F0b3JlcyddLnNwbGl0KCcsJyksICdUcmFpbGVyJzogcmVzdWx0YWRvWyd0cmFpbGVyJ10sICdEaXJlY3Rvcic6IHJlc3VsdGFkb1snZGlyZXRvciddLCAnUmF0aW5nJzogcmVzdWx0YWRvWydpbWRiUmF0aW5nJ10sICdDb2RlJzogcmVzdWx0YWRvWydJTUJEJ10gfQ0KCQkJDQoJCQlmb3Rvb28gPSByZXN1bHRhZG9bJ2ZvdG8nXQ0KCQkJI2ZvdG9vbyA9IGZvdG9vby5yZXBsYWNlKCdQVCcsJycpDQoJCQkjcmVzdWx0YWRvWydiYWNrZ3JvdW5kJ10gPSByZXN1bHRhZG9bJ2JhY2tncm91bmQnXS5yZXBsYWNlKCdQVCcsJycpDQoJCQlyZXN1bHRhZG9bJ2JhY2tncm91bmQnXSA9ICdpbWFnZXMvYmFja2dyb3VuZC8nK3Jlc3VsdGFkb1snSU1CRCddKycuanBnJw0KCQkJZmFuYXJ0dHQgPSBfX0FQSV9fK3Jlc3VsdGFkb1snYmFja2dyb3VuZCddDQoJCQkNCgkJCW5vbWVlZSA9IHB0K2JyK3JlbW92ZXJBY2VudG9zKG5vbWUpKycgKCcrcmVzdWx0YWRvWydhbm8nXSsnKScNCgkJCWFkZERpcjIobm9tZWVlLCBfX0FQSV9TSVRFX18rdGlwbysnLycrc3RyKHJlc3VsdGFkb1snaWRfdmlkZW8nXSksIDExNCwgJ3RlbXBvcmFkYXMnLCBmb3Rvb28sIHRpcG89J3NlcmllJywgaW5mb0xhYmVscz1pbmZvTGFiZWxzLHBvc3Rlcj1mYW5hcnR0dCx2aXN0bz12aXN0bykNCgkNCgljdXJyZW50ID0gcmVzdWx0YWRvYVsnbWV0YSddWydwYWdpbmF0aW9uJ11bJ2N1cnJlbnRfcGFnZSddDQoJdG90YWwgPSByZXN1bHRhZG9hWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsndG90YWxfcGFnZXMnXQ0KCXRyeTogcHJveGltbyA9IHJlc3VsdGFkb2FbJ21ldGEnXVsncGFnaW5hdGlvbiddWydsaW5rcyddWyduZXh0J10NCglleGNlcHQ6IHBhc3MgDQoJaWYgY3VycmVudCA8IHRvdGFsOg0KCQlhZGREaXIyKCdQcsOzeGltYSBww6FnaW5hICgnK3N0cihjdXJyZW50KSsnLycrc3RyKHRvdGFsKSsnKScsIHByb3hpbW8sIDEyMSwgJ2Fub3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAncHJveGltby5wbmcnKSwxKQ0KCQ0KCXZpc3RhX2ZpbG1lc1NlcmllcygpDQoNCmRlZiBnZXRZZWFycyh1cmwpOg0KCWFub3MgPSBbDQoJCQknMjAxNycsDQoJCQknMjAxNicsDQoJCQknMjAxNScsDQoJCQknMjAxNCcsDQoJCQknMjAxMycsDQoJCQknMjAxMicsDQoJCQknMjAxMScsDQoJCQknMjAxMCcsDQoJCQknMjAwOScsDQoJCQknMjAwOCcsDQoJCQknMjAwNycsDQoJCQknMjAwNicsDQoJCQknMjAwMC0yMDA1JywNCgkJCScxOTkwLTE5OTknLA0KCQkJJzE5ODAtMTk4OScsDQoJCQknMTk3MC0xOTc5JywNCgkJCScxOTYwLTE5NjknLA0KCQkJJzE5NTAtMTk1OScsDQoJCQknMTkwMC0xOTQ5Jw0KCQldDQoJZm9yIGkgaW4gYW5vczoNCgkJYWRkRGlyMihpLCB1cmwrJy8nK2ksIDEyMSwgJ2Fub3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnYW5vLnBuZycpKQ0KCQkNCgl2aXN0YV9tZW51KCkNCg0KZGVmIGFub3ModXJsKToNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCglyZXN1bHRhZG8gPSBhYnJpcl91cmwodXJsLCBoZWFkZXI9aGVhZGVycykNCglpZiByZXN1bHRhZG8gPT0gJ0ROUyc6DQoJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCXJldHVybiBGYWxzZQ0KCXJlc3VsdGFkb2EgPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCgkNCglmb3IgaSBpbiByZXN1bHRhZG9hWyJkYXRhIl06DQoJCWlmICdmaWxtZScgaW4gdXJsOg0KCQkJcmVzdWx0YWRvID0gYWJyaXJfdXJsKF9fQVBJX1NJVEVfXysnZmlsbWUvJytzdHIoaVsnaWRfdmlkZW8nXSksIGhlYWRlcj1oZWFkZXJzKQ0KCQkJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJCQljYXRlZ29yaWEgPSByZXN1bHRhZG9bJ2NhdGVnb3JpYTEnXQ0KCQkJaWYgcmVzdWx0YWRvWydjYXRlZ29yaWEyJ10gIT0gJyc6DQoJCQkJY2F0ZWdvcmlhICs9ICcsJytyZXN1bHRhZG9bJ2NhdGVnb3JpYTInXQ0KCQkJaWYgcmVzdWx0YWRvWydjYXRlZ29yaWEzJ10gIT0gJyc6DQoJCQkJY2F0ZWdvcmlhICs9ICcsJytyZXN1bHRhZG9bJ2NhdGVnb3JpYTMnXQ0KCQkJDQoJCQl2aXN0byA9IEZhbHNlDQoJCQlwdCA9ICcnDQoJCQliciA9ICcnDQoJCQlpZiAnQnJhc2lsZWlybycgaW4gY2F0ZWdvcmlhOg0KCQkJCWJyID0gJ1tCXVtDT0xPUiBncmVlbl1CWy9DT0xPUl1bQ09MT1IgeWVsbG93XVJbL0NPTE9SXTogWy9CXScNCgkJCWlmICdQb3J0dScgaW4gY2F0ZWdvcmlhOg0KCQkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJCWNvciA9ICJ3aGl0ZSINCgkJCWlmICdQVCcgaW4gaVsnSU1CRCddOg0KCQkJCWlbJ0lNQkQnXSA9IHJlLmNvbXBpbGUoJyguKz8pUFQnKS5maW5kYWxsKGlbJ0lNQkQnXSlbMF0NCgkJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCQlpZiBpWyd2aXN0byddID09IDE6DQoJCQkJdmlzdG8gPSBUcnVlDQoJCQkNCgkJCXRyeToNCgkJCQlub21lID0gcmVzdWx0YWRvWydub21lX2luZ2xlcyddLmRlY29kZSgndXRmLTgnKQ0KCQkJZXhjZXB0Og0KCQkJCW5vbWUgPSByZXN1bHRhZG9bJ25vbWVfaW5nbGVzJ10uZW5jb2RlKCd1dGYtOCcpDQoJCQlpZiAnaHR0cCcgbm90IGluIHJlc3VsdGFkb1snZm90byddOg0KCQkJCXJlc3VsdGFkb1snZm90byddID0gX19BUElfXysnaW1hZ2VzL2NhcGFzLycrcmVzdWx0YWRvWydmb3RvJ10uc3BsaXQoJy8nKVstMV0NCgkNCgkJCWluZm9MYWJlbHMgPSB7J1RpdGxlJzogcmVzdWx0YWRvWydub21lX2luZ2xlcyddLCAnWWVhcic6IHJlc3VsdGFkb1snYW5vJ10sICdHZW5yZSc6IGNhdGVnb3JpYSwgJ1Bsb3QnOnJlc3VsdGFkb1snZGVzY3JpY2FvX3ZpZGVvJ10sICdDYXN0JzpyZXN1bHRhZG9bJ2F0b3JlcyddLnNwbGl0KCcsJyksICdUcmFpbGVyJzogcmVzdWx0YWRvWyd0cmFpbGVyJ10sICdEaXJlY3Rvcic6IHJlc3VsdGFkb1snZGlyZXRvciddLCAnUmF0aW5nJzogcmVzdWx0YWRvWydpbWRiUmF0aW5nJ10sICdJTURCTnVtYmVyJzogcmVzdWx0YWRvWydJTUJEJ10gfQ0KCQkJbm9tZWVlID0gJ1tDT0xPUiAnK2NvcisnXScrcHQrYnIrcmVtb3ZlckFjZW50b3Mobm9tZSkrJyAoJytpWydhbm8nXSsnKVsvQ09MT1JdJw0KCQkJdXJsbm9vID0gX19BUElfU0lURV9fKydmaWxtZS8nK3N0cihyZXN1bHRhZG9bJ2lkX3ZpZGVvJ10pDQoJCQkNCgkJCWZvdG9vbyA9IHJlc3VsdGFkb1snZm90byddDQoJCQlmb3Rvb28gPSBmb3Rvb28ucmVwbGFjZSgnUFQnLCcnKQ0KCQkJcmVzdWx0YWRvWydiYWNrZ3JvdW5kJ10gPSByZXN1bHRhZG9bJ2JhY2tncm91bmQnXS5yZXBsYWNlKCdQVCcsJycpDQoJCQlmYW5hcnR0dCA9IF9fQVBJX18rcmVzdWx0YWRvWydiYWNrZ3JvdW5kJ10NCgkJCQ0KCQkJYWRkVmlkZW8obm9tZWVlLCB1cmxub28sIDExMywgZm90b29vLHZpc3RvLCAncGxheWVyJywgMCwgMCwgaW5mb0xhYmVscywgZmFuYXJ0dHQsIHRyYWlsZXI9cmVzdWx0YWRvWyd0cmFpbGVyJ10pDQoJCWVsaWYgJ3NlcmllJyBpbiB1cmwgb3IgJ2FuaW1lJyBpbiB1cmw6DQoJCQljb3IgPSAid2hpdGUiDQoJCQlpZiAnc2VyaWUnIGluIHVybDoNCgkJCQl0aXBvID0gJ3NlcmllJw0KCQkJZWxpZiAnYW5pbWUnIGluIHVybDoNCgkJCQl0aXBvID0gJ2FuaW1lJw0KCQkJcmVzdWx0YWRvID0gYWJyaXJfdXJsKF9fQVBJX1NJVEVfXyt0aXBvKycvJytzdHIoaVsnaWRfdmlkZW8nXSksIGhlYWRlcj1oZWFkZXJzKQ0KCQkJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJCQljYXRlZ29yaWEgPSByZXN1bHRhZG9bJ2NhdGVnb3JpYTEnXQ0KCQkJaWYgcmVzdWx0YWRvWydjYXRlZ29yaWEyJ10gIT0gJyc6DQoJCQkJY2F0ZWdvcmlhICs9ICcsJytyZXN1bHRhZG9bJ2NhdGVnb3JpYTInXQ0KCQkJaWYgcmVzdWx0YWRvWydjYXRlZ29yaWEzJ10gIT0gJyc6DQoJCQkJY2F0ZWdvcmlhICs9ICcsJytyZXN1bHRhZG9bJ2NhdGVnb3JpYTMnXQ0KCQkJcHQ9JycNCgkJCWJyID0gJycNCgkJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BvcnR1JyBpbiBjYXRlZ29yaWE6DQoJCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BUJyBpbiByZXN1bHRhZG9bJ0lNQkQnXToNCgkJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCQl0cnk6DQoJCQkJbm9tZSA9IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXS5kZWNvZGUoJ3V0Zi04JykNCgkJCWV4Y2VwdDoNCgkJCQlub21lID0gcmVzdWx0YWRvWydub21lX2luZ2xlcyddLmVuY29kZSgndXRmLTgnKQ0KCQkJaWYgJ2h0dHAnIG5vdCBpbiByZXN1bHRhZG9bJ2ZvdG8nXToNCgkJCQlyZXN1bHRhZG9bJ2ZvdG8nXSA9IF9fQVBJX18rJ2ltYWdlcy9jYXBhcy8nK3Jlc3VsdGFkb1snZm90byddLnNwbGl0KCcvJylbLTFdDQoJCQlpZiByZXN1bHRhZG9bJ3Zpc3RvJ10gPT0gMToNCgkJCQl2aXN0bz1UcnVlDQoJCQllbHNlOg0KCQkJCXZpc3RvPUZhbHNlDQoJCQlpbmZvTGFiZWxzID0geydUaXRsZSc6IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXSwgJ1llYXInOiByZXN1bHRhZG9bJ2FubyddLCAnR2VucmUnOiBjYXRlZ29yaWEsICdQbG90JzogcmVzdWx0YWRvWydkZXNjcmljYW9fdmlkZW8nXSwgJ0Nhc3QnOnJlc3VsdGFkb1snYXRvcmVzJ10uc3BsaXQoJywnKSwgJ1RyYWlsZXInOiByZXN1bHRhZG9bJ3RyYWlsZXInXSwgJ0RpcmVjdG9yJzogcmVzdWx0YWRvWydkaXJldG9yJ10sICdSYXRpbmcnOiByZXN1bHRhZG9bJ2ltZGJSYXRpbmcnXSwgJ0NvZGUnOiByZXN1bHRhZG9bJ0lNQkQnXSB9DQoJCQkNCgkJCWZvdG9vbyA9IHJlc3VsdGFkb1snZm90byddDQoJCQlmb3Rvb28gPSBmb3Rvb28ucmVwbGFjZSgnUFQnLCcnKQ0KCQkJcmVzdWx0YWRvWydiYWNrZ3JvdW5kJ10gPSByZXN1bHRhZG9bJ2JhY2tncm91bmQnXS5yZXBsYWNlKCdQVCcsJycpDQoJCQlmYW5hcnR0dCA9IF9fQVBJX18rcmVzdWx0YWRvWydiYWNrZ3JvdW5kJ10NCgkJCQ0KCQkJbm9tZWVlID0gcHQrYnIrcmVtb3ZlckFjZW50b3Mobm9tZSkrJyAoJytpWydhbm8nXSsnKScNCgkJCWFkZERpcjIobm9tZWVlLCBfX0FQSV9TSVRFX18rdGlwbysnLycrc3RyKHJlc3VsdGFkb1snaWRfdmlkZW8nXSksIDExNCwgJ3RlbXBvcmFkYXMnLCBmb3Rvb28sIHRpcG89J3NlcmllJywgaW5mb0xhYmVscz1pbmZvTGFiZWxzLHBvc3Rlcj1mYW5hcnR0dCx2aXN0bz12aXN0bykNCgkNCgljdXJyZW50ID0gcmVzdWx0YWRvYVsnbWV0YSddWydwYWdpbmF0aW9uJ11bJ2N1cnJlbnRfcGFnZSddDQoJdG90YWwgPSByZXN1bHRhZG9hWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsndG90YWxfcGFnZXMnXQ0KCXRyeTogcHJveGltbyA9IHJlc3VsdGFkb2FbJ21ldGEnXVsncGFnaW5hdGlvbiddWydsaW5rcyddWyduZXh0J10NCglleGNlcHQ6IHBhc3MgDQoJaWYgY3VycmVudCA8IHRvdGFsOg0KCQlhZGREaXIyKCdQcsOzeGltYSBww6FnaW5hICgnK3N0cihjdXJyZW50KSsnLycrc3RyKHRvdGFsKSsnKScsIHByb3hpbW8sIDEyMSwgJ2Fub3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAncHJveGltby5wbmcnKSwxKQ0KCQ0KCXZpc3RhX2ZpbG1lc1NlcmllcygpDQoNCmRlZiBnZXRFdmVudG9zKCk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJDQoJcmVzdWx0YWRvID0gYWJyaXJfdXJsKF9fQVBJX1NJVEVfXysnZXZlbnRvcycsIGhlYWRlcj1oZWFkZXJzKQ0KCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCXRyeToNCgkJaWYgcmVzdWx0YWRvWydjb2RpZ28nXSA9PSAyMDQ6DQoJCQlyZXR1cm4gRmFsc2UNCglleGNlcHQ6DQoJCXBhc3MNCglyZXR1cm4gcmVzdWx0YWRvWydkYXRhJ11bJ25vbWUnXQ0KCQkNCgkJDQpkZWYgcGxheWVyKG5hbWUsdXJsLGljb25pbWFnZSx0ZW1wb3JhZGEsZXBpc29kaW8sc2VyaWVOb21lKToNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCglyZXN1bHRhZG8gPSBhYnJpcl91cmwodXJsLCBoZWFkZXI9aGVhZGVycykNCglpZiByZXN1bHRhZG8gPT0gJ0ROUyc6DQoJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCXJldHVybiBGYWxzZQ0KCQ0KCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCWluZm9sYWJlbHMgPSBkaWN0KCkNCg0KCXBhc3RhRGF0YSA9ICcnDQoJaWYgJ2ZpbG1lJyBpbiB1cmw6DQoJCWluZm9sYWJlbHNbJ0NvZGUnXSA9IHJlc3VsdGFkb1snSU1CRCddDQoJCWluZm9sYWJlbHNbJ1llYXInXSA9IHJlc3VsdGFkb1snYW5vJ10NCgkJaWRWaWRlbyA9IHJlc3VsdGFkb1snaWRfdmlkZW8nXQ0KCQlub21lID0gcmVzdWx0YWRvWydub21lX2luZ2xlcyddDQoJCXRlbXBvcmFkYSA9IDANCgkJZXBpc29kaW8gPSAwDQoJZWxzZToNCgkJaWRWaWRlbyA9IHJlc3VsdGFkb1snaWRfc2VyaWUnXQ0KCQlub21lID0gcmVzdWx0YWRvWydub21lX2VwaXNvZGlvJ10NCgkJdGVtcG9yYWRhID0gcmVzdWx0YWRvWyd0ZW1wb3JhZGEnXQ0KCQllcGlzb2RpbyA9IHJlc3VsdGFkb1snZXBpc29kaW8nXQ0KDQoJbWVuc2FnZW1wcm9ncmVzc28gPSB4Ym1jZ3VpLkRpYWxvZ1Byb2dyZXNzKCkNCgltZW5zYWdlbXByb2dyZXNzby5jcmVhdGUoQWRkb25UaXRsZSwgdSdBYnJpciBlbWlzc8OjbycsJ1BvciBmYXZvciBhZ3VhcmRlLi4uJykNCgltZW5zYWdlbXByb2dyZXNzby51cGRhdGUoMjUsICIiLCB1J09idGVyIHZpZGVvIGUgbGVnZW5kYScsICIiKQ0KDQoJc3RyZWFtLCBsZWdlbmRhLCBleHRfZyA9IGdldFN0cmVhbUxlZ2VuZGEocmVzdWx0YWRvKQ0KDQoJbWVuc2FnZW1wcm9ncmVzc28udXBkYXRlKDUwLCAiIiwgdSdQcmVwYXJhLXRlLCB2YWkgY29tZcOnYXIhJywgIiIpDQoNCglwbGF5bGlzdCA9IHhibWMuUGxheUxpc3QoMSkNCglwbGF5bGlzdC5jbGVhcigpDQoJbGlzdGl0ZW0gPSB4Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT0iRGVmYXVsdFZpZGVvLnBuZyIsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCg0KCWxpc3RpdGVtLnNldEluZm8odHlwZT0iVmlkZW8iLCBpbmZvTGFiZWxzPWluZm9sYWJlbHMpDQoJbGlzdGl0ZW0uc2V0UHJvcGVydHkoJ21pbWV0eXBlJywgJ3ZpZGVvL3gtbXN2aWRlbycpDQoJbGlzdGl0ZW0uc2V0UHJvcGVydHkoJ0lzUGxheWFibGUnLCAndHJ1ZScpDQoJDQoJbGlzdGl0ZW0uc2V0UGF0aChwYXRoPXN0cmVhbSkNCglwbGF5bGlzdC5hZGQoc3RyZWFtLCBsaXN0aXRlbSkNCgl4Ym1jcGx1Z2luLnNldFJlc29sdmVkVXJsKGludChzeXMuYXJndlsxXSksIFRydWUsIGxpc3RpdGVtKQ0KCW1lbnNhZ2VtcHJvZ3Jlc3NvLnVwZGF0ZSg3NSwgIiIsIHUnQm9hIFNlc3PDo28hISEnLCAiIikNCg0KCWlmIHN0cmVhbSA9PSBGYWxzZToNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnTyBzZXJ2aWRvciBlc2NvbGhpZG8gbsOjbyBkaXNwb27DrXZlbCwgZXNjb2xoYSBvdXRybyBvdSB0ZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZS4nKQ0KCWVsc2U6DQoJCSNfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdTdHJlYW06ICcrc3RyZWFtKQ0KCQlwbGF5ZXJfbXIgPSBQbGF5ZXIuUGxheWVyKHVybD11cmwsIGlkRmlsbWU9aWRWaWRlbywgcGFzdGFEYXRhPV9fUEFTVEFfREFET1NfXywgdGVtcG9yYWRhPXRlbXBvcmFkYSwgZXBpc29kaW89ZXBpc29kaW8sIG5vbWU9bmFtZSwgbG9nbz1vcy5wYXRoLmpvaW4oX19BRERPTl9GT0xERVJfXywnaWNvbi5wbmcnKSkNCgkJDQoJCW1lbnNhZ2VtcHJvZ3Jlc3NvLmNsb3NlKCkNCgkJcGxheWVyX21yLnBsYXkocGxheWxpc3QpDQoJCXBsYXllcl9tci5zZXRTdWJ0aXRsZXMobGVnZW5kYSkNCg0KCQl3aGlsZSBwbGF5ZXJfbXIucGxheWluZzoNCgkJCXhibWMuc2xlZXAoNTAwMCkNCgkJCSNwbGF5ZXJfbXIudHJhY2tlclRlbXBvKCkNCg0KZGVmIGdldFN0cmVhbUxlZ2VuZGEocmVzdWx0YWRvKToNCglpID0gMA0KCXNlcnZpZG9yZXMgPSBbXQ0KCXRpdHVsb3MgPSBbXQ0KCW5vbWUgPSAnJw0KCWlmIHJlc3VsdGFkb1snVVJMJ10gIT0gJyc6DQoJCWkrPTENCgkJc2Vydmlkb3Jlcy5hcHBlbmQocmVzdWx0YWRvWydVUkwnXSkNCgkJaWYgJ29wZW5sb2FkJyBpbiByZXN1bHRhZG9bJ1VSTCddOg0KCQkJbm9tZSA9ICJPcGVuTG9hZCINCgkJZWxpZiAndmlkemknIGluIHJlc3VsdGFkb1snVVJMJ106DQoJCQlub21lID0gJ1ZpZHppJw0KCQllbGlmICdnb29nbGUnIGluIHJlc3VsdGFkb1snVVJMJ10gb3IgJ2Nsb3VkLm1haWwucnUnIGluIHJlc3VsdGFkb1snVVJMJ106DQoJCQlub21lID0gQWRkb25UaXRsZQ0KCQllbGlmICd1cHRvc3RyZWFtLmNvbScgaW4gcmVzdWx0YWRvWydVUkwnXToNCgkJCW5vbWUgPSAnVXBUb1N0cmVhbScNCgkJZWxpZiAncmFwaWR2aWRlby5jb20nIGluIHJlc3VsdGFkb1snVVJMJ10gb3IgJ3JhcHR1JyBpbiByZXN1bHRhZG9bJ1VSTCddOg0KCQkJbm9tZSA9ICdSYXBpZFZpZGVvJw0KCQl0aXR1bG9zLmFwcGVuZCgnU2Vydmlkb3IgIyVzOiAlcycgJSAoaSwgbm9tZSkpDQoJaWYgcmVzdWx0YWRvWydVUkwyJ10gIT0gJyc6DQoJCWkrPTENCgkJc2Vydmlkb3Jlcy5hcHBlbmQocmVzdWx0YWRvWydVUkwyJ10pDQoJCWlmICdvcGVubG9hZCcgaW4gcmVzdWx0YWRvWydVUkwyJ106DQoJCQlub21lID0gIk9wZW5Mb2FkIg0KCQllbGlmICd2aWR6aScgaW4gcmVzdWx0YWRvWydVUkwyJ106DQoJCQlub21lID0gJ1ZpZHppJw0KCQllbGlmICdnb29nbGUnIGluIHJlc3VsdGFkb1snVVJMMiddIG9yICdjbG91ZC5tYWlsLnJ1JyBpbiByZXN1bHRhZG9bJ1VSTDInXToNCgkJCW5vbWUgPSBBZGRvblRpdGxlDQoJCWVsaWYgJ3VwdG9zdHJlYW0uY29tJyBpbiByZXN1bHRhZG9bJ1VSTDInXToNCgkJCW5vbWUgPSAnVXBUb1N0cmVhbScNCgkJZWxpZiAncmFwaWR2aWRlby5jb20nIGluIHJlc3VsdGFkb1snVVJMMiddIG9yICdyYXB0dScgaW4gcmVzdWx0YWRvWydVUkwyJ106DQoJCQlub21lID0gJ1JhcGlkVmlkZW8nDQoJCXRpdHVsb3MuYXBwZW5kKCdTZXJ2aWRvciAjJXM6ICVzJyAlIChpLCBub21lKSkNCgl0cnk6DQoJCWlmIHJlc3VsdGFkb1snVVJMMyddICE9ICcnOg0KCQkJaSs9MQ0KCQkJc2Vydmlkb3Jlcy5hcHBlbmQocmVzdWx0YWRvWydVUkwzJ10pDQoJCQlpZiAnb3BlbmxvYWQnIGluIHJlc3VsdGFkb1snVVJMMyddOg0KCQkJCW5vbWUgPSAiT3BlbkxvYWQiDQoJCQllbGlmICd2aWR6aScgaW4gcmVzdWx0YWRvWydVUkwzJ106DQoJCQkJbm9tZSA9ICdWaWR6aScNCgkJCWVsaWYgJ2dvb2dsZScgaW4gcmVzdWx0YWRvWydVUkwzJ10gb3IgJ2Nsb3VkLm1haWwucnUnIGluIHJlc3VsdGFkb1snVVJMMyddOg0KCQkJCW5vbWUgPSBBZGRvblRpdGxlDQoJCQllbGlmICd1cHRvc3RyZWFtLmNvbScgaW4gcmVzdWx0YWRvWydVUkwzJ106DQoJCQkJbm9tZSA9ICdVcFRvU3RyZWFtJw0KCQkJZWxpZiAncmFwaWR2aWRlby5jb20nIGluIHJlc3VsdGFkb1snVVJMMyddIG9yICdyYXB0dScgaW4gcmVzdWx0YWRvWydVUkwzJ106DQoJCQkJbm9tZSA9ICdSYXBpZFZpZGVvJw0KCQkJdGl0dWxvcy5hcHBlbmQoJ1NlcnZpZG9yICMlczogJXMnICUgKGksIG5vbWUpKQ0KCWV4Y2VwdDoNCgkJcGFzcw0KCXRyeToNCgkJaWYgcmVzdWx0YWRvWydVUkw0J10gIT0gJyc6DQoJCQlpKz0xDQoJCQlzZXJ2aWRvcmVzLmFwcGVuZChyZXN1bHRhZG9bJ1VSTDQnXSkNCgkJCWlmICdvcGVubG9hZCcgaW4gcmVzdWx0YWRvWydVUkw0J106DQoJCQkJbm9tZSA9ICJPcGVuTG9hZCINCgkJCWVsaWYgJ3ZpZHppJyBpbiByZXN1bHRhZG9bJ1VSTDQnXToNCgkJCQlub21lID0gJ1ZpZHppJw0KCQkJZWxpZiAnZ29vZ2xlJyBpbiByZXN1bHRhZG9bJ1VSTDQnXSBvciAnY2xvdWQubWFpbC5ydScgaW4gcmVzdWx0YWRvWydVUkw0J106DQoJCQkJbm9tZSA9IEFkZG9uVGl0bGUNCgkJCWVsaWYgJ3VwdG9zdHJlYW0uY29tJyBpbiByZXN1bHRhZG9bJ1VSTDQnXToNCgkJCQlub21lID0gJ1VwVG9TdHJlYW0nDQoJCQllbGlmICdyYXBpZHZpZGVvLmNvbScgaW4gcmVzdWx0YWRvWydVUkw0J10gb3IgJ3JhcHR1JyBpbiByZXN1bHRhZG9bJ1VSTDQnXToNCgkJCQlub21lID0gJ1JhcGlkVmlkZW8nDQoJCQl0aXR1bG9zLmFwcGVuZCgnU2Vydmlkb3IgIyVzOiAlcycgJSAoaSwgbm9tZSkpDQoJZXhjZXB0Og0KCQlwYXNzDQoJbGVnZW5kYSA9ICcnDQoJc3RyZWFtID0gJycNCglpZiAnOi8vJyBpbiByZXN1bHRhZG9bJ2xlZ2VuZGEnXSBvciByZXN1bHRhZG9bJ2xlZ2VuZGEnXSA9PSAnJzoNCgkJbGVnZW5kYSA9IF9fQVBJX18rJ3N1YnMvJXMuc3J0JyAlIHJlc3VsdGFkb1snSU1CRCddDQoJZWxpZiByZXN1bHRhZG9bJ2xlZ2VuZGEnXSAhPSAnJzoNCgkJaWYgbm90ICcuc3J0JyBpbiByZXN1bHRhZG9bJ2xlZ2VuZGEnXToNCgkJCXJlc3VsdGFkb1snbGVnZW5kYSddID0gcmVzdWx0YWRvWydsZWdlbmRhJ10rJy5zcnQnDQoJCWxlZ2VuZGEgPSBfX0FQSV9fKydzdWJzLyVzJyAlIHJlc3VsdGFkb1snbGVnZW5kYSddDQoJdHJ5Og0KCQlpZiByZXN1bHRhZG9bJ3NlbWxlZ2VuZGEnXSA9PSAxOg0KCQkJbGVnZW5kYSA9ICcnDQoJZXhjZXB0Og0KCQlwYXNzDQoJZXh0X2cgPSAnY29pc28nDQoJbGVnZW5kYUF1eCA9IGxlZ2VuZGENCglzZXJ2aWRvciA9IDANCglpZiBsZW4odGl0dWxvcykgPiAxOg0KCQlzZXJ2aWRvciA9IHhibWNndWkuRGlhbG9nKCkuc2VsZWN0KCdFc2NvbGhhIG8gc2Vydmlkb3InLCB0aXR1bG9zKQ0KCWVsc2U6DQoJCXNlcnZpZG9yID0gMA0KCQ0KCWlmICd2aWR6aScgaW4gc2Vydmlkb3Jlc1tzZXJ2aWRvcl06DQoJCXZpZHppID0gVVJMUmVzb2x2ZXJNZWRpYS5WaWR6aShzZXJ2aWRvcmVzW3NlcnZpZG9yXSkNCgkJc3RyZWFtID0gdmlkemkuZ2V0TWVkaWFVcmwoKQ0KCQlsZWdlbmRhID0gdmlkemkuZ2V0U3VidGl0bGUoKQ0KCWVsaWYgJ3VwdG9zdHJlYW0uY29tJyBpbiBzZXJ2aWRvcmVzW3NlcnZpZG9yXToNCgkJc3RyZWFtID0gVVJMUmVzb2x2ZXJNZWRpYS5VcFRvU3RyZWFtKHNlcnZpZG9yZXNbc2Vydmlkb3JdKS5nZXRNZWRpYVVybCgpDQoJZWxpZiAnc2VydmVyLm1ycGlyYWN5LndpbicgaW4gc2Vydmlkb3Jlc1tzZXJ2aWRvcl06DQoJCXN0cmVhbSA9IHNlcnZpZG9yZXNbc2Vydmlkb3JdDQoJZWxpZiAnb3BlbmxvYWQnIGluIHNlcnZpZG9yZXNbc2Vydmlkb3JdOg0KCQlzdHJlYW0gPSBVUkxSZXNvbHZlck1lZGlhLk9wZW5Mb2FkKHNlcnZpZG9yZXNbc2Vydmlkb3JdKS5nZXRNZWRpYVVybCgpDQoJCWxlZ2VuZGEgPSBVUkxSZXNvbHZlck1lZGlhLk9wZW5Mb2FkKHNlcnZpZG9yZXNbc2Vydmlkb3JdKS5nZXRTdWJ0aXRsZSgpDQoJCWlmIG5vdCAnLnZ0dCcgaW4gbGVnZW5kYToNCgkJCWxlZ2VuZGEgPSBsZWdlbmRhQXV4DQoJZWxpZiAnZHJpdmUuZ29vZ2xlLmNvbS8nIGluIHNlcnZpZG9yZXNbc2Vydmlkb3JdOg0KCQlzdHJlYW0sIGV4dF9nID0gVVJMUmVzb2x2ZXJNZWRpYS5Hb29nbGVWaWRlbyhzZXJ2aWRvcmVzW3NlcnZpZG9yXSkuZ2V0TWVkaWFVcmwoKQ0KCWVsaWYgJ2Nsb3VkLm1haWwucnUnIGluIHNlcnZpZG9yZXNbc2Vydmlkb3JdOg0KCQlzdHJlYW0sIGV4dF9nID0gVVJMUmVzb2x2ZXJNZWRpYS5DbG91ZE1haWxSdShzZXJ2aWRvcmVzW3NlcnZpZG9yXSkuZ2V0TWVkaWFVcmwoKQ0KCWVsaWYgJ3JhcGlkdmlkZW8uY29tJyBpbiBzZXJ2aWRvcmVzW3NlcnZpZG9yXSBvciAncmFwdHUnIGluIHNlcnZpZG9yZXNbc2Vydmlkb3JdOg0KCQlyYXBpZCA9IFVSTFJlc29sdmVyTWVkaWEuUmFwaWRWaWRlbyhzZXJ2aWRvcmVzW3NlcnZpZG9yXSkNCgkJc3RyZWFtID0gcmFwaWQuZ2V0TWVkaWFVcmwoKQ0KCQlsZWdlbmRhID0gcmFwaWQuZ2V0TGVnZW5kYSgpDQoJDQoJcmV0dXJuIHN0cmVhbSwgbGVnZW5kYSwgZXh0X2cNCg0KDQpkZWYgcGVzcXVpc2EodXJsLHNlcnZ1c3MpOg0KCWNvZGlnb19mb250ZSA9ICcnDQoJZGFkb3MgPSAnJw0KCW5ldCA9IE5ldCgpDQoJbmV0LnNldF9jb29raWVzKF9fQ09PS0lFX0ZJTEVfXykNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCgl0YWJlbGEgPSAnJw0KCXN0clBlc3F1aXNhID0gJycNCglmaWNoZWlybyA9ICcnDQoJaWYgJ2ZpbG1lcycgaW4gdXJsOg0KCQlmaWNoZWlybyA9IG9zLnBhdGguam9pbihfX1BBU1RBX0RBRE9TX18sJ2ZpbG1lc19wZXNxdWlzYS5saXZlaXQnKQ0KCQl0aXBvID0gMA0KCWVsaWYgJ3NlcmllcycgaW4gdXJsOg0KCQlmaWNoZWlybyA9IG9zLnBhdGguam9pbihfX1BBU1RBX0RBRE9TX18sJ3Nlcmllc19wZXNxdWlzYS5saXZlaXQnKQ0KCQl0aXBvID0gMQ0KCWVsaWYgJ2FuaW1lcycgaW4gdXJsOg0KCQlmaWNoZWlybyA9IG9zLnBhdGguam9pbihfX1BBU1RBX0RBRE9TX18sJ2FuaW1lc19wZXNxdWlzYS5saXZlaXQnKQ0KCQl0aXBvID0gMg0KCQ0KCWlmICdwYWdlJyBub3QgaW4gdXJsOg0KCQkjdGlwbyA9IHhibWNndWkuRGlhbG9nKCkuc2VsZWN0KHUnT25kZSBxdWVyIHBlc3F1aXNhcj8nLCBbJ0ZpbG1lcycsICdTZXJpZXMnLCAnQW5pbWVzJywgJ0NhbmFpcycsICdQcmFpYXMnLCAnUsOhZGlvcyddKQ0KCQl0aXBvID0geGJtY2d1aS5EaWFsb2coKS5zZWxlY3QodSdPbmRlIHF1ZXIgcGVzcXVpc2FyPycsIFsnRmlsbWVzJywgJ1NlcmllcycsICdBbmltZXMnXSkNCgkJdGVjbGFkbyA9IHhibWMuS2V5Ym9hcmQoJycsICdPIHF1ZSBxdWVyIHBlc3F1aXNhcj8nKQ0KCQlpZiB0aXBvID09IDA6DQoJCQl1cmwgPSBfX0FQSV9TSVRFX18rJ2ZpbG1lcy9wZXNxdWlzYScNCgkJCWZpY2hlaXJvID0gb3MucGF0aC5qb2luKF9fUEFTVEFfREFET1NfXywnZmlsbWVzX3Blc3F1aXNhLmxpdmVpdCcpDQoJCWVsaWYgdGlwbyA9PSAxOg0KCQkJdXJsID0gX19BUElfU0lURV9fKydzZXJpZXMvcGVzcXVpc2EnDQoJCQlmaWNoZWlybyA9IG9zLnBhdGguam9pbihfX1BBU1RBX0RBRE9TX18sJ3Nlcmllc19wZXNxdWlzYS5saXZlaXQnKQ0KCQllbGlmIHRpcG8gPT0gMjoNCgkJCXVybCA9IF9fQVBJX1NJVEVfXysnYW5pbWVzL3Blc3F1aXNhJw0KCQkJZmljaGVpcm8gPSBvcy5wYXRoLmpvaW4oX19QQVNUQV9EQURPU19fLCdhbmltZXNfcGVzcXVpc2EubGl2ZWl0JykNCgkJZWxpZiB0aXBvID09IDMgb3IgIHRpcG8gPT0gNCBvciB0aXBvID09IDU6DQoJCQl1cmwgPSBfX1NJVEVCRF9fKydzZWFyY2gucGhwJw0KCQkJaWYgdGlwbyA9PSAzOg0KCQkJCXRhYmVsYSA9ICdjYW5haXNfa29kaScNCgkJCQlmaWNoZWlybyA9IG9zLnBhdGguam9pbihfX1BBU1RBX0RBRE9TX18sJ2NhbmFpcy5saXZlaXQnKQ0KCQkJZWxpZiB0aXBvID09IDQ6DQoJCQkJdGFiZWxhID0gJ3ByYWlhc19rb2RpJw0KCQkJCWZpY2hlaXJvID0gb3MucGF0aC5qb2luKF9fUEFTVEFfREFET1NfXywncHJhaWFzLmxpdmVpdCcpDQoJCQllbGlmIHRpcG8gPT0gNToNCgkJCQl0YWJlbGEgPSAncmFkaW9zX2tvZGknDQoJCQkJZmljaGVpcm8gPSBvcy5wYXRoLmpvaW4oX19QQVNUQV9EQURPU19fLCdyYWRpb3MubGl2ZWl0JykNCgkJCWVsc2U6DQoJCQkJdGFiZWxhID0gJ3Byb2dyYW1hc19rb2RpJw0KCQkJCWZpY2hlaXJvID0gb3MucGF0aC5qb2luKF9fUEFTVEFfREFET1NfXywncHJvZ3JhbWFzLmxpdmVpdCcpDQoJCQ0KCQlpZiBmaWNoZWlybyAhPSAnJzoNCgkJCWlmIHhibWN2ZnMuZXhpc3RzKGZpY2hlaXJvKToNCgkJCQlmID0gb3BlbihmaWNoZWlybywgInIiKQ0KCQkJCXRleHRvID0gZi5yZWFkKCkNCgkJCQl0ZWNsYWRvLnNldERlZmF1bHQodGV4dG8pDQoJCQl0ZWNsYWRvLmRvTW9kYWwoKQ0KDQoJCWlmIHRlY2xhZG8uaXNDb25maXJtZWQoKToNCgkJCXN0clBlc3F1aXNhID0gdGVjbGFkby5nZXRUZXh0KCkNCgkJCWRhZG9zID0geydwZXNxdWlzYSc6IHN0clBlc3F1aXNhfQ0KCQkJdHJ5Og0KCQkJCWYgPSBvcGVuKGZpY2hlaXJvLCBtb2RlPSJ3IikNCgkJCQlmLndyaXRlKHN0clBlc3F1aXNhKQ0KCQkJCWYuY2xvc2UoKQ0KCQkJZXhjZXB0Og0KCQkJCXRyYWNlYmFjay5wcmludF9leGMoKQ0KCQkJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ07Do28gZ3Jhdm91IG8gY29udGV1ZG8gZW0gJytmaWNoZWlybykNCgkJCQ0KCQkJaWYgc3RyUGVzcXVpc2EgPT0gJyc6DQoJCQkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnSW5zaXJhIGFsZ28gbmEgcGVzcXVpc2EuJykNCgkJCQlhZGREaXIyKCdBbHRlcmFyIFBlc3F1aXNhJywgJ3VybCcsIDcwMDAsICcnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAncGVzcXVpc2EucG5nJyksIDApDQoJCQllbHNlOg0KCQkJCXJlc3VsdGFkbyA9IGFicmlyX3VybCh1cmwscG9zdD1qc29uLmR1bXBzKGRhZG9zKSwgaGVhZGVyPWhlYWRlcnMpDQoJZWxzZToNCgkJaWYgZmljaGVpcm8gIT0gJyc6DQoJCQlpZiB4Ym1jdmZzLmV4aXN0cyhmaWNoZWlybyk6DQoJCQkJZiA9IG9wZW4oZmljaGVpcm8sICJyIikNCgkJCQl0ZXh0byA9IGYucmVhZCgpDQoJCQlkYWRvcyA9IHsncGVzcXVpc2EnOiB0ZXh0b30NCgkJCXJlc3VsdGFkbyA9IGFicmlyX3VybCh1cmwscG9zdD1qc29uLmR1bXBzKGRhZG9zKSwgaGVhZGVyPWhlYWRlcnMpDQoJDQoJaWYgc3RyUGVzcXVpc2EgIT0gJyc6DQoJCWlmIHJlc3VsdGFkbyA9PSAnRE5TJzoNCgkJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCQlyZXR1cm4gRmFsc2UNCgkJDQoJCWlmIHRpcG8gPT0gMyBvciAgdGlwbyA9PSA0IG9yIHRpcG8gPT0gNToNCgkJCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoaW50KHN5cy5hcmd2WzFdKSxjYWNoZVRvRGlzYz1GYWxzZSkNCgkJCWlmIHN0clBlc3F1aXNhID09ICcnOg0KCQkJCV9fQUxFUlRBX18oQWRkb25UaXRsZSwgJ0luc2lyYSBhbGdvIG5hIHBlc3F1aXNhLicpDQoJCQkJYWRkRGlyMignQWx0ZXJhciBQZXNxdWlzYScsICd1cmwnLCA3MDAwLCAnJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Blc3F1aXNhLnBuZycpLCAwKQ0KCQkJZWxzZToNCgkJCQlkYWRvcyA9IHsnc2VhcmNoQm94Jzogc3RyUGVzcXVpc2EsICd0YWJlbGEnOiB0YWJlbGF9DQoJCQkJY29kaWdvX2ZvbnRlID0gbmV0Lmh0dHBfUE9TVCh1cmwsIGZvcm1fZGF0YT1kYWRvcywgaGVhZGVycz1fX0hFQURFUlNfXykuY29udGVudC5kZWNvZGUoJ2xhdGluLTEnKS5lbmNvZGUoInV0Zi04IikNCgkJCQlpbmZvcm1hID0gew0KCQkJCQkJJ3NlcnZpZG9yJyA6IHsNCgkJCQkJCQknbm9tZSc6ICcnLA0KCQkJCQkJCSdzZXJ2JzogJycNCgkJCQkJCX0sDQoJCQkJCQknc2Vydmlkb3Jlcyc6IFtdLA0KCQkJCQkJJ2NhbmFpcyc6IFtdDQoJCQkJCX0NCgkJCQlzdWNlc3NvID0gJ25vJw0KCQkJCWVsZW1zID0gRVQuZnJvbXN0cmluZyhjb2RpZ29fZm9udGUpDQoJCQkJDQoJCQkJZm9yIGNoaWxkZWUgaW4gZWxlbXM6DQoJCQkJCWlmKGNoaWxkZWUudGFnID09ICdzZXJ2aWRvcmVzJyk6DQoJCQkJCQlzZXJ2aWRvciA9IHsNCgkJCQkJCQknbm9tZSc6ICcnLA0KCQkJCQkJCSdsaW5rJzogJycNCgkJCQkJCX0NCgkJCQkJCWZvciBnZyBpbiBjaGlsZGVlOgkNCgkJCQkJCQlpZihnZy50YWcgPT0gJ05vbWUnKToNCgkJCQkJCQkJc2Vydmlkb3JbJ25vbWUnXSA9IGdnLnRleHQJDQoJCQkJCQkJZWxpZihnZy50YWcgPT0gJ1NlcnZpZG9yJyk6DQoJCQkJCQkJCXNlcnZpZG9yWydsaW5rJ10gPSBnZy50ZXh0CQkNCgkJCQkJCQlpbmZvcm1hWydzZXJ2aWRvcmVzJ10uYXBwZW5kKHNlcnZpZG9yKQ0KCQkJCQkNCgkJCQlmb3Igc2VydnZ2diBpbiBpbmZvcm1hWydzZXJ2aWRvcmVzJ106DQoJCQkJCWlmKHNlcnZ2dnZbJ25vbWUnXSA9PSBzZXJ2dXNzKToNCgkJCQkJCWluZm9ybWFbJ3NlcnZpZG9yJ11bJ25vbWUnXSA9IHNlcnZ2dnZbJ25vbWUnXQ0KCQkJCQkJaW5mb3JtYVsnc2Vydmlkb3InXVsnc2VydiddID0gc2VydnZ2dlsnbGluayddCQkJDQoJCQkJDQoJCQkJZm9yIGNoaWxkIGluIGVsZW1zOg0KCQkJCQlpZihjaGlsZC50YWcgPT0gJ3N1Y2Vzc28nKToNCgkJCQkJCXN1Y2Vzc28gPSBjaGlsZC50ZXh0DQoJCQkJCWVsaWYoY2hpbGQudGFnID09ICdjYW5haXMnKToNCgkJCQkJCWNhbmFsID0gew0KCQkJCQkJCSdub21lJzogJycsDQoJCQkJCQkJJ2xvZ28nOiAnJywNCgkJCQkJCQknbGluayc6ICcnLA0KCQkJCQkJCSdncnVwbyc6ICcnLA0KCQkJCQkJCSdub21laWQnOiAnJywNCgkJCQkJCQknaWRub3ZvJzogJycNCgkJCQkJCX0NCgkJCQkJCWFkaWNpb25hID0gVHJ1ZQ0KCQkJCQkJcGFnYW50ZSA9IEZhbHNlDQoJCQkJCQlmb3IgZyBpbiBjaGlsZDoNCgkJCQkJCQlhZGljaW9uYSA9IFRydWUNCgkJCQkJCQlpZihnLnRhZyA9PSAnTm9tZScpOg0KCQkJCQkJCQljYW5hbFsnbm9tZSddID0gZy50ZXh0DQoJCQkJCQkJZWxpZihnLnRhZyA9PSAnSW1hZ2VtJyk6DQoJCQkJCQkJCWNhbmFsWydsb2dvJ10gPSBnLnRleHQNCgkJCQkJCQllbGlmKGcudGFnID09ICdQYWdhbnRlJyk6DQoJCQkJCQkJCWlmKGcudGV4dCA9PSAndHJ1ZScpOg0KCQkJCQkJCQkJcGFnYW50ZSA9IFRydWUNCgkJCQkJCQllbGlmKGcudGFnID09ICdVcmwnKToNCgkJCQkJCQkJdXJsY2hhbWEgPSBnLnRleHQuc3BsaXQoJzsnKQ0KCQkJCQkJCQl1cmxub28gPSBnLnRleHQNCgkJCQkJCQkJdHJ5Og0KCQkJCQkJCQkJaWYoc2VydnVzcyA9PSAnU2Vydmlkb3IxJyk6DQoJCQkJCQkJCQkJdXJsbm9vID0gdXJsY2hhbWFbMF0NCgkJCQkJCQkJCWVsaWYoc2VydnVzcyA9PSAnU2Vydmlkb3IyJyk6DQoJCQkJCQkJCQkJdXJsbm9vID0gdXJsY2hhbWFbMV0NCgkJCQkJCQkJCWVsaWYoc2VydnVzcyA9PSAnU2Vydmlkb3IzJyk6DQoJCQkJCQkJCQkJdXJsbm9vID0gdXJsY2hhbWFbMl0NCgkJCQkJCQkJCWVsaWYoc2VydnVzcyA9PSAnU2Vydmlkb3I0Jyk6DQoJCQkJCQkJCQkJdXJsbm9vID0gdXJsY2hhbWFbM10NCgkJCQkJCQkJCWVsaWYoc2VydnVzcyA9PSAnU2Vydmlkb3I1Jyk6DQoJCQkJCQkJCQkJdXJsbm9vID0gdXJsY2hhbWFbNF0NCgkJCQkJCQkJCWVsaWYoc2VydnVzcyA9PSAnU2Vydmlkb3I2Jyk6DQoJCQkJCQkJCQkJdXJsbm9vID0gdXJsY2hhbWFbNV0NCgkJCQkJCQkJCWVsaWYoc2VydnVzcyA9PSAnU2Vydmlkb3I3Jyk6DQoJCQkJCQkJCQkJdXJsbm9vID0gdXJsY2hhbWFbNl0NCgkJCQkJCQkJCWVsaWYoc2VydnVzcyA9PSAnU2Vydmlkb3I4Jyk6DQoJCQkJCQkJCQkJdXJsbm9vID0gdXJsY2hhbWFbN10NCgkJCQkJCQkJCQ0KCQkJCQkJCQkJaWYodXJsbm9vID09ICduYWRhJyk6DQoJCQkJCQkJCQkJYWRpY2lvbmEgPSBGYWxzZQ0KCQkJCQkJCQkJZWxzZToNCgkJCQkJCQkJCQlpZiBwYWdhbnRlOg0KCQkJCQkJCQkJCQljYW5hbFsnbGluayddID0gaW5mb3JtYVsnc2Vydmlkb3InXVsnc2VydiddKydsaXZlL3V0aWxpemFkb3JsaXZlaXQvc2VuaGFsaXZlaXQvJyt1cmxub28NCgkJCQkJCQkJCQllbHNlOg0KCQkJCQkJCQkJCQljYW5hbFsnbGluayddID0gdXJsbm9vDQoJCQkJCQkJCWV4Y2VwdDoNCgkJCQkJCQkJCWNhbmFsWydsaW5rJ10gPSBnLnRleHQNCgkJCQkJCQllbGlmKGcudGFnID09ICdHcnVwbycpOg0KCQkJCQkJCQljYW5hbFsnZ3J1cG8nXSA9IGcudGV4dA0KCQkJCQkJCWVsaWYoZy50YWcgPT0gJ05vbWVJRCcpOg0KCQkJCQkJCQljYW5hbFsnbm9tZWlkJ10gPSBnLnRleHQNCgkJCQkJCQllbGlmKGcudGFnID09ICdJRCcpOg0KCQkJCQkJCQljYW5hbFsnaWRub3ZvJ10gPSBnLnRleHQNCgkJCQkJCWlmIGFkaWNpb25hOg0KCQkJCQkJCWluZm9ybWFbJ2NhbmFpcyddLmFwcGVuZChjYW5hbCkNCg0KCQkJCWlmIHN1Y2Vzc28gPT0gJ3llcyc6DQoJCQkJCWFkZERpcjIoJ0FsdGVyYXIgUGVzcXVpc2EnLCAndXJsJywgNzAwMCwgJycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdwZXNxdWlzYS5wbmcnKSwgMCkNCgkJCQkJZm9yIGNhbm4gaW4gaW5mb3JtYVsnY2FuYWlzJ106DQoJCQkJCQlub21lZSA9IGNhbm5bJ25vbWUnXQ0KCQkJCQkJaW1nID0gY2FublsnbG9nbyddDQoJCQkJCQlydG1wID0gY2FublsnbGluayddLnJlcGxhY2UoJyBydG1wJywncnRtcCcpLnJlcGxhY2UoJyBydHNwJywncnRzcCcpLnJlcGxhY2UoJyBodHRwJywnaHR0cCcpLnJlcGxhY2UoJ3V0aWxpemFkb3JsaXZlaXQnLF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikpLnJlcGxhY2UoJ3NlbmhhbGl2ZWl0JyxfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSkNCgkJCQkJCWdydXAgPSBjYW5uWydncnVwbyddDQoJCQkJCQlpZF9pdCA9IGNhbm5bJ25vbWVpZCddDQoJCQkJCQlpZF9wID0gY2FublsnaWRub3ZvJ10NCgkJCQkJCXNydF9mID0gJycNCgkJCQkJCWRlc2NyaSA9ICcnDQoJCQkJCQkNCgkJCQkJCWFkZExpbmsyKG5vbWVlLHJ0bXAsJ2h0dHA6Ly9saXZlaXRrb2RpLmNvbS9Mb2dvcy8nK2ltZykNCgkJCQkJDQoJCQkJCXZpc3RhX0NhbmFpcygpDQoJCQkJDQoJCWVsc2U6DQoJCQlyZXN1bHRhZG8gPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCgkJCWlmIHJlc3VsdGFkb1snZGF0YSddICE9ICcnOg0KCQkJCWlmIHRpcG8gPT0gMDoNCgkJCQkJZm9yIGkgaW4gcmVzdWx0YWRvWydkYXRhJ106DQoJCQkJCQljYXRlZ29yaWEgPSBpWydjYXRlZ29yaWExJ10NCgkJCQkJCWlmIGlbJ2NhdGVnb3JpYTInXSAhPSAnJzoNCgkJCQkJCQljYXRlZ29yaWEgKz0gJywnK2lbJ2NhdGVnb3JpYTInXQ0KCQkJCQkJaWYgaVsnY2F0ZWdvcmlhMyddICE9ICcnOg0KCQkJCQkJCWNhdGVnb3JpYSArPSAnLCcraVsnY2F0ZWdvcmlhMyddDQoJCQkJCQlpbmZvTGFiZWxzID0geydUaXRsZSc6IGlbJ25vbWVfaW5nbGVzJ10sICdZZWFyJzogaVsnYW5vJ10sICdHZW5yZSc6IGNhdGVnb3JpYSwgJ1Bsb3QnOiBpWydkZXNjcmljYW9fdmlkZW8nXSwgJ0Nhc3QnOmlbJ2F0b3JlcyddLnNwbGl0KCcsJyksICdUcmFpbGVyJzogaVsndHJhaWxlciddLCAnRGlyZWN0b3InOiBpWydkaXJldG9yJ10sICdSYXRpbmcnOiBpWydpbWRiUmF0aW5nJ10sICdJTURCTnVtYmVyJzogaVsnSU1CRCddIH0JCQkJDQoJCQkJCQl0cnk6DQoJCQkJCQkJbm9tZSA9IGlbJ25vbWVfaW5nbGVzJ10uZGVjb2RlKCd1dGYtOCcpDQoJCQkJCQlleGNlcHQ6DQoJCQkJCQkJbm9tZSA9IGlbJ25vbWVfaW5nbGVzJ10uZW5jb2RlKCd1dGYtOCcpDQoJCQkJCQlwdCA9ICcnDQoJCQkJCQliciA9ICcnDQoJCQkJCQlpZiAnQnJhc2lsZWlybycgaW4gY2F0ZWdvcmlhOg0KCQkJCQkJCWJyID0gJ1tCXVtDT0xPUiBncmVlbl1CWy9DT0xPUl1bQ09MT1IgeWVsbG93XVJbL0NPTE9SXTogWy9CXScNCgkJCQkJCWlmICdQb3J0dScgaW4gY2F0ZWdvcmlhOg0KCQkJCQkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJCQkJCWNvciA9ICJ3aGl0ZSINCgkJCQkJCWlmICdodHRwJyBub3QgaW4gaVsnZm90byddOg0KCQkJCQkJCWlbJ2ZvdG8nXSA9IF9fQVBJX18rJ2ltYWdlcy9jYXBhcy8nK2lbJ2ZvdG8nXS5zcGxpdCgnLycpWy0xXQ0KCQkJCQkJaWYgJ1BUJyBpbiBpWydJTUJEJ106DQoJCQkJCQkJaVsnSU1CRCddID0gcmUuY29tcGlsZSgnKC4rPylQVCcpLmZpbmRhbGwoaVsnSU1CRCddKVswXQ0KCQkJCQkJCXB0ID0gJ1tCXVBUOiBbL0JdJw0KCQkJCQkJdmlzdG8gPSBGYWxzZQ0KCQkJCQkJDQoJCQkJCQlub21lZWUgPSBwdCtyZW1vdmVyQWNlbnRvcyhub21lKSsnICgnK2lbJ2FubyddKycpJw0KCQkJCQkJdXJsbm9vID0gX19BUElfU0lURV9fKydmaWxtZS8nK3N0cihpWydpZF92aWRlbyddKQ0KCQkJCQkJZm90b29vID0gaVsnZm90byddDQoJCQkJCQlmYW5hcnR0dCA9IF9fQVBJX18raVsnYmFja2dyb3VuZCddDQoJCQkJCQlhZGRWaWRlbyhub21lZWUsIHVybG5vbywgMTEzLCBmb3Rvb28sdmlzdG8sICdmaWxtZScsIDAsIDAsIGluZm9MYWJlbHMsIGZhbmFydHR0LCB0cmFpbGVyPWlbJ3RyYWlsZXInXSkNCgkJCQllbGlmIHRpcG8gPT0gMSBvciB0aXBvID09IDI6DQoJCQkJCWZvciBpIGluIHJlc3VsdGFkb1snZGF0YSddOg0KCQkJCQkJY2F0ZWdvcmlhID0gaVsnY2F0ZWdvcmlhMSddDQoJCQkJCQlpZiBpWydjYXRlZ29yaWEyJ10gIT0gJyc6DQoJCQkJCQkJY2F0ZWdvcmlhICs9ICcsJytpWydjYXRlZ29yaWEyJ10NCgkJCQkJCWlmIGlbJ2NhdGVnb3JpYTMnXSAhPSAnJzoNCgkJCQkJCQljYXRlZ29yaWEgKz0gJywnK2lbJ2NhdGVnb3JpYTMnXQ0KCQkJCQkJcHQgPSAnJw0KCQkJCQkJYnIgPSAnJw0KCQkJCQkJaWYgJ0JyYXNpbGVpcm8nIGluIGNhdGVnb3JpYToNCgkJCQkJCQliciA9ICdbQl1bQ09MT1IgZ3JlZW5dQlsvQ09MT1JdW0NPTE9SIHllbGxvd11SWy9DT0xPUl06IFsvQl0nDQoJCQkJCQlpZiAnUG9ydHUnIGluIGNhdGVnb3JpYToNCgkJCQkJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCQkJCQlpbmZvTGFiZWxzID0geydUaXRsZSc6IGlbJ25vbWVfaW5nbGVzJ10sICdZZWFyJzogaVsnYW5vJ10sICdHZW5yZSc6IGNhdGVnb3JpYSwgJ1Bsb3QnOiBpWydkZXNjcmljYW9fdmlkZW8nXSwgJ0Nhc3QnOmlbJ2F0b3JlcyddLnNwbGl0KCcsJyksICdUcmFpbGVyJzogaVsndHJhaWxlciddLCAnRGlyZWN0b3InOiBpWydkaXJldG9yJ10sICdSYXRpbmcnOiBpWydpbWRiUmF0aW5nJ10sICdDb2RlJzogaVsnSU1CRCddIH0NCgkJCQkJCWNvciA9ICJ3aGl0ZSINCgkJCQkJCWlmICdQVCcgaW4gaVsnSU1CRCddOg0KCQkJCQkJCWlbJ0lNQkQnXSA9IHJlLmNvbXBpbGUoJyguKz8pUFQnKS5maW5kYWxsKGlbJ0lNQkQnXSlbMF0NCgkJCQkJCQlwdCA9ICdbQl1QVDogWy9CXScNCgkJCQkJCXRyeToNCgkJCQkJCQlub21lID0gaVsnbm9tZV9pbmdsZXMnXS5kZWNvZGUoJ3V0Zi04JykNCgkJCQkJCWV4Y2VwdDoNCgkJCQkJCQlub21lID0gaVsnbm9tZV9pbmdsZXMnXS5lbmNvZGUoJ3V0Zi04JykNCgkJCQkJCWlmICdodHRwJyBub3QgaW4gaVsnZm90byddOg0KCQkJCQkJCWlbJ2ZvdG8nXSA9X19BUElfXysnaW1hZ2VzL2NhcGFzLycraVsnZm90byddLnNwbGl0KCcvJylbLTFdDQoJCQkJCQlpZiB0aXBvID09IDE6DQoJCQkJCQkJbGluayA9ICdzZXJpZScNCgkJCQkJCWVsaWYgdGlwbyA9PSAyOg0KCQkJCQkJCWxpbmsgPSAnYW5pbWUnDQoJCQkJCQl2aXN0bz1GYWxzZQkNCgkJCQkJCW5vbWVlZSA9IHB0K3JlbW92ZXJBY2VudG9zKG5vbWUpKycgKCcraVsnYW5vJ10rJyknDQoJCQkJCQl1cmxub28gPSBfX0FQSV9TSVRFX18rbGluaysnLycrc3RyKGlbJ2lkX3ZpZGVvJ10pDQoJCQkJCQlmb3Rvb28gPSBpWydmb3RvJ10NCgkJCQkJCWZhbmFydHR0ID0gX19BUElfXytpWydiYWNrZ3JvdW5kJ10NCgkJCQkJCWFkZERpcjIobm9tZWVlLCB1cmxub28sIDExNCwgJ3RlbXBvcmFkYXMnLCBmb3Rvb28sIHRpcG89J3NlcmllJywgaW5mb0xhYmVscz1pbmZvTGFiZWxzLHBvc3Rlcj1mYW5hcnR0dCx2aXN0bz12aXN0bykNCg0KCQkJCWN1cnJlbnQgPSByZXN1bHRhZG9bJ21ldGEnXVsncGFnaW5hdGlvbiddWydjdXJyZW50X3BhZ2UnXQ0KCQkJCXRvdGFsID0gcmVzdWx0YWRvWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsndG90YWxfcGFnZXMnXQ0KCQkJCXRyeTogcHJveGltbyA9IHJlc3VsdGFkb1snbWV0YSddWydwYWdpbmF0aW9uJ11bJ2xpbmtzJ11bJ25leHQnXQ0KCQkJCWV4Y2VwdDogcGFzcyANCgkJCQlpZiBjdXJyZW50IDwgdG90YWw6DQoJCQkJCWFkZERpcjIoJ1Byb3hpbWEgcGFnaW5hICgnK3N0cihjdXJyZW50KSsnLycrc3RyKHRvdGFsKSsnKScsIHByb3hpbW8sIDEyMCwgJ3Blc3F1aXNhJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Byb3hpbW8ucG5nJykpDQoJCQkJZWxzZToNCgkJCQkJeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pLGNhY2hlVG9EaXNjPUZhbHNlKQ0KCQkJCXZpc3RhX2ZpbG1lc1NlcmllcygpDQoNCg0KZGVmIGRvd25sb2FkKHVybCxuYW1lLCB0ZW1wb3JhZGEsZXBpc29kaW8sc2VyaWVOb21lKToNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCglsaW5rcyA9IHVybC5zcGxpdCgnLycpDQoJaWYgJ2ZpbG1lJyBpbiB1cmw6DQoJCWlkX3ZpZGVvID0gbGlua3NbLTFdDQoJCXRpcG8gPSAwDQoJZWxpZiAnc2VyaWUnIGluIHVybDoNCgkJaWRfdmlkZW8gPSBsaW5rc1s1XQ0KCQl0ZW1wb3JhZGEgPSBsaW5rc1s3XQ0KCQllcGlzb2RpbyA9IGxpbmtzWy0xXQ0KCQl0aXBvID0gMQ0KCWVsaWYgJ2FuaW1lJyBpbiB1cmw6DQoJCWlkX3ZpZGVvID0gbGlua3NbNV0NCgkJdGVtcG9yYWRhID0gbGlua3NbN10NCgkJZXBpc29kaW8gPSBsaW5rc1stMV0NCgkJdGlwbyA9IDINCg0KCXJlc3VsdGFkbyA9IGFicmlyX3VybCh1cmwsIGhlYWRlcj1oZWFkZXJzKQ0KCWlmIHJlc3VsdGFkbyA9PSAnRE5TJzoNCgkJX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJDQoJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoNCglzdHJlYW0sIGxlZ2VuZGEsIGV4dF9nID0gZ2V0U3RyZWFtTGVnZW5kYShyZXN1bHRhZG8pDQoNCglmb2xkZXIgPSB4Ym1jLnRyYW5zbGF0ZVBhdGgoX19BRERPTl9fLmdldFNldHRpbmcoJ3Bhc3RhRG93bmxvYWRzJykpDQoJaWYoZm9sZGVyID09ICdFc2NvbGhhIGEgcGFzdGEgcGFyYSBEb3dubG9hZCcpOg0KCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdTZWxlY2Npb25lIHVtYSBwYXN0YSBwcmltZWlybyBubyBzdWJtZW51IENyZWTDqm5jaWFpcyBvdSBuYXMgQ29uZmlndXJhw6fDtWVzIGRvIEFkZG9uLicpDQoJZWxzZToNCgkJaWYgdGlwbyA+IDA6DQoJCQlpZiB0aXBvID09IDE6DQoJCQkJcmVzdWx0YWRvYSA9IGFicmlyX3VybChfX0FQSV9TSVRFX18rJ3NlcmllLycraWRfdmlkZW8sIGhlYWRlcj1oZWFkZXJzKQ0KCQkJZWxpZiB0aXBvID09IDI6DQoJCQkJcmVzdWx0YWRvYSA9IGFicmlyX3VybChfX0FQSV9TSVRFX18rJ2FuaW1lLycraWRfdmlkZW8sIGhlYWRlcj1oZWFkZXJzKQ0KCQkJcmVzdWx0YWRvYSA9IGpzb24ubG9hZHMocmVzdWx0YWRvYSkNCgkJCWlmIG5vdCB4Ym1jdmZzLmV4aXN0cyhvcy5wYXRoLmpvaW4oZm9sZGVyLCdzZXJpZXMnKSk6DQoJCQkJeGJtY3Zmcy5ta2RpcnMob3MucGF0aC5qb2luKGZvbGRlciwnc2VyaWVzJykpDQoJCQlpZiBub3QgeGJtY3Zmcy5leGlzdHMob3MucGF0aC5qb2luKGZvbGRlciwnc2VyaWVzJyxyZXN1bHRhZG9hWydub21lX2luZ2xlcyddKSk6DQoJCQkJeGJtY3Zmcy5ta2RpcnMob3MucGF0aC5qb2luKGZvbGRlciwnc2VyaWVzJyxyZXN1bHRhZG9hWydub21lX2luZ2xlcyddKSkNCgkJCWlmIG5vdCB4Ym1jdmZzLmV4aXN0cyhvcy5wYXRoLmpvaW4oZm9sZGVyLCdzZXJpZXMnLHJlc3VsdGFkb2FbJ25vbWVfaW5nbGVzJ10sIlRlbXBvcmFkYSAiK3N0cih0ZW1wb3JhZGEpKSk6DQoJCQkJeGJtY3Zmcy5ta2RpcnMob3MucGF0aC5qb2luKGZvbGRlciwnc2VyaWVzJyxyZXN1bHRhZG9hWydub21lX2luZ2xlcyddLCJUZW1wb3JhZGEgIitzdHIodGVtcG9yYWRhKSkpDQoJCQlmb2xkZXIgPSBvcy5wYXRoLmpvaW4oZm9sZGVyLCAnc2VyaWVzJywgcmVzdWx0YWRvYVsnbm9tZV9pbmdsZXMnXSwgIlRlbXBvcmFkYSIsIHN0cih0ZW1wb3JhZGEpKQ0KCQkJbmFtZSA9ICJlIitzdHIoZXBpc29kaW8pKyIgLSAiK2NsZWFuKHJlc3VsdGFkb1snbm9tZV9lcGlzb2RpbyddKQ0KCQllbHNlOg0KCQkJaWYgbm90IHhibWN2ZnMuZXhpc3RzKG9zLnBhdGguam9pbihmb2xkZXIsJ2ZpbG1lcycpKToNCgkJCQl4Ym1jdmZzLm1rZGlycyhvcy5wYXRoLmpvaW4oZm9sZGVyLCdmaWxtZXMnKSkNCgkJCWZvbGRlciA9IG9zLnBhdGguam9pbihmb2xkZXIsJ2ZpbG1lcycpDQoJCQluYW1lID0gcmVzdWx0YWRvWydub21lX2luZ2xlcyddDQoNCgkJc3RyZWFtQXV4ID0gY2xlYW4oc3RyZWFtLnNwbGl0KCcvJylbLTFdKQ0KCQlleHRlbnNhb1N0cmVhbSA9IGNsZWFuKHN0cmVhbUF1eC5zcGxpdCgnLicpWy0xXSkNCg0KCQlpZiAnP21pbScgaW4gZXh0ZW5zYW9TdHJlYW06DQoJCQlleHRlbnNhb1N0cmVhbSA9IHJlLmNvbXBpbGUoJyguKz8pXD9taW1lPScpLmZpbmRhbGwoZXh0ZW5zYW9TdHJlYW0pWzBdDQoNCgkJaWYgZXh0X2cgIT0gJ2NvaXNvJzoNCgkJCWV4dGVuc2FvU3RyZWFtID0gZXh0X2cNCg0KCQlub21lU3RyZWFtID0gbmFtZSsnLicrZXh0ZW5zYW9TdHJlYW0NCgkJbm9tZWxlZ2VuZGEgPSAnJw0KCQlEb3dubG9hZGVyLkRvd25sb2FkZXIoKS5kb3dubG9hZChvcy5wYXRoLmpvaW4oZm9sZGVyLmRlY29kZSgidXRmLTgiKSwgbm9tZVN0cmVhbSksIHN0cmVhbSwgbmFtZSkNCgkJDQoJCWlmIGxlZ2VuZGFzT246DQoJCQlsZWdlbmRhQXV4ID0gY2xlYW4obGVnZW5kYS5zcGxpdCgnLycpWy0xXSkNCgkJCWV4dGVuc2FvTGVnZW5kYSA9IGNsZWFuKGxlZ2VuZGFBdXguc3BsaXQoJy4nKVsxXSkNCgkJCW5vbWVMZWdlbmRhID0gbmFtZSsnLicrZXh0ZW5zYW9MZWdlbmRhDQoJCQlkb3dubG9hZF9sZWdlbmRhcyhsZWdlbmRhLCBvcy5wYXRoLmpvaW4oZm9sZGVyLCBub21lTGVnZW5kYSkpDQoNCmRlZiBkb3dubG9hZF9sZWdlbmRhcyh1cmwscGF0aCk6DQoJY29udGVudHMgPSBhYnJpcl91cmwodXJsKQ0KCWlmIGNvbnRlbnRzOg0KCQlmaCA9IG9wZW4ocGF0aCwgJ3cnKQ0KCQlmaC53cml0ZShjb250ZW50cykNCgkJZmguY2xvc2UoKQ0KCXJldHVybg0KDQpkZWYgY2xlYW4odGV4dCk6DQoJY29tbWFuZD17JyYjODIyMDsnOiciJywnJiM4MjIxOyc6JyInLCAnJiM4MjExOyc6Jy0nLCcmYW1wOyc6JyYnLCcmIzgyMTc7JzoiJyIsJyYjODIxNjsnOiInIn0NCglyZWdleCA9IHJlLmNvbXBpbGUoInwiLmpvaW4obWFwKHJlLmVzY2FwZSwgY29tbWFuZC5rZXlzKCkpKSkNCglyZXR1cm4gcmVnZXguc3ViKGxhbWJkYSBtbzogY29tbWFuZFttby5ncm91cCgwKV0sIHRleHQpDQoNCmRlZiBhZGRWaWRlbyhuYW1lLHVybCxtb2RlLGljb25pbWFnZSx2aXN0byx0aXBvLHRlbXBvcmFkYSxlcGlzb2RpbyxpbmZvTGFiZWxzLHBvc3Rlcix0cmFpbGVyPUZhbHNlLHNlcmllTm9tZT1GYWxzZSk6DQoJbWVudSA9IFtdDQoJDQoJaWYgaW5mb0xhYmVsczogaW5mb0xhYmVsc0F1eCA9IGluZm9MYWJlbHMNCgllbHNlOiBpbmZvTGFiZWxzQXV4ID0geydUaXRsZSc6IG5hbWV9DQoNCglpZiBwb3N0ZXI6IHBvc3RlckF1eCA9IHBvc3Rlcg0KCWVsc2U6IHBvc3RlckF1eCA9IGljb25pbWFnZQ0KCQ0KCXRyeToNCgkJbmFtZSA9IG5hbWUuZW5jb2RlKCd1dGYtOCcpDQoJZXhjZXB0Og0KCQluYW1lID0gbmFtZQ0KCQ0KCXRyeToNCgkJc2VyaWVOb21lID0gc2VyaWVOb21lLmVuY29kZSgndXRmLTgnKQ0KCWV4Y2VwdDoNCgkJc2VyaWVOb21lID0gc2VyaWVOb21lDQoJZWxzZToNCgkJcGFzcw0KDQoJZmFuYXJ0ID0gX19GQU5BUlRfXw0KCQ0KCWlmIHRpcG8gPT0gJ2ZpbG1lJzoNCgkJeGJtY3BsdWdpbi5zZXRDb250ZW50KGludChzeXMuYXJndlsxXSksICdNb3ZpZXMnKQ0KCQlpZiBfX0FERE9OX18uZ2V0U2V0dGluZygndHJhaWxlci1maWxtZXMnKSA9PSAndHJ1ZSc6DQoJCQl0cnk6DQoJCQkJaWRZb3V0dWJlID0gdHJhaWxlci5zcGxpdCgnP3Y9JylbLTFdLnNwbGl0KCcvJylbLTFdLnNwbGl0KCc/JylbMF0uc3BsaXQoJyYnKVswXQ0KCQkJCWxpbmtUcmFpbGVyID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPScraWRZb3V0dWJlDQoJCQkJI2lkWW91dHViZT10cmFpbGVyLnNwbGl0KCc9JykNCgkJCQkjX19BTEVSVEFfXyhBZGRvblRpdGxlLCAnSUQ6ICcraWRZb3V0dWJlWzFdKQ0KCQkJCSNsaW5rVHJhaWxlciA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS8/cGF0aD0vcm9vdC92aWRlbyZhY3Rpb249cGxheV92aWRlbyZ2aWRlb2lkPScraWRZb3V0dWJlWzFdDQoJCQkJI2xpbmtUcmFpbGVyID0gdHJhaWxlcg0KCQkJZXhjZXB0Og0KCQkJCWxpbmtUcmFpbGVyID0gJycNCgkJZWxzZToNCgkJCWxpbmtUcmFpbGVyID0gJycNCgllbGlmIHRpcG8gPT0gJ3NlcmllJzoNCgkJeGJtY3BsdWdpbi5zZXRDb250ZW50KGludChzeXMuYXJndlsxXSksICd0dnNob3dzJykNCgkJaWRJTURiID0gcmUuY29tcGlsZSgnaW1kYj0oLis/KSYnKS5maW5kYWxsKHVybClbMF0NCgkJbGlua1RyYWlsZXIgPSAiIg0KCWVsaWYgdGlwbyA9PSAnZXBpc29kaW8nOg0KCQl4Ym1jcGx1Z2luLnNldENvbnRlbnQoaW50KHN5cy5hcmd2WzFdKSwgJ2VwaXNvZGVzJykNCgkJbGlua1RyYWlsZXIgPSAiIg0KCWVsc2U6DQoJCXhibWNwbHVnaW4uc2V0Q29udGVudChpbnQoc3lzLmFyZ3ZbMV0pLCAnTW92aWVzJykNCgkJbGlua1RyYWlsZXIgPSAiIg0KCQ0KCW92ZXJsYXkgPSA2DQoJcGxheWNvdW50ID0gMA0KDQoJaW5mb0xhYmVsc0F1eFsib3ZlcmxheSJdID0gb3ZlcmxheQ0KCWluZm9MYWJlbHNBdXhbInBsYXljb3VudCJdID0gcGxheWNvdW50DQoJDQoJbGl6PXhibWNndWkuTGlzdEl0ZW0obmFtZSwgaWNvbkltYWdlPWljb25pbWFnZSwgdGh1bWJuYWlsSW1hZ2U9aWNvbmltYWdlKQ0KCWxpei5zZXRJbmZvKCB0eXBlPSJWaWRlbyIsIGluZm9MYWJlbHM9aW5mb0xhYmVsc0F1eCkNCglsaXouc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScsIHBvc3RlcikNCglsaXouc2V0QXJ0KHsnZmFuYXJ0JzogcG9zdGVyfSkNCgkNCgkNCglpZiBub3Qgc2VyaWVOb21lOg0KCQlzZXJpZU5vbWUgPSAnJw0KDQoJdT1zeXMuYXJndlswXSsiP3VybD0iK3VybGxpYi5xdW90ZV9wbHVzKHVybCkrIiZtb2RlPSIrc3RyKG1vZGUpKyImdGVtcG9yYWRhPSIrc3RyKHRlbXBvcmFkYSkrIiZlcGlzb2Rpbz0iK3N0cihlcGlzb2RpbykrIiZuYW1lPSIrdXJsbGliLnF1b3RlX3BsdXMobmFtZSkrIiZpY29uaW1hZ2U9Iit1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpKyImc2VyaWVOb21lPSIrdXJsbGliLnF1b3RlX3BsdXMoc2VyaWVOb21lKQ0KCW9rPVRydWUNCgkNCglpZiBsaW5rVHJhaWxlciAhPSAiIjoNCgkJbWVudS5hcHBlbmQoKCdWZXIgVHJhaWxlcicsICdYQk1DLlBsYXlNZWRpYSglcyknICUgKGxpbmtUcmFpbGVyKSkpDQoJCSNtZW51LmFwcGVuZCgoJ1ZlciBUcmFpbGVyJywgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9MTA1Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyknJShzeXMuYXJndlswXSx1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSwgbGlua1RyYWlsZXIsIHVybGxpYi5xdW90ZV9wbHVzKGljb25pbWFnZSkpKSkNCgkNCgltZW51LmFwcGVuZCgoJ0Rvd25sb2FkJywgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9MTE3Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZzZXJpZU5vbWU9JXMmdGVtcG9yYWRhPSVzJmVwaXNvZGlvPSVzKSclKHN5cy5hcmd2WzBdLHVybGxpYi5xdW90ZV9wbHVzKG5hbWUpLCB1cmxsaWIucXVvdGVfcGx1cyh1cmwpLCB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpLCB1cmxsaWIucXVvdGVfcGx1cyhzZXJpZU5vbWUpLCBzdHIodGVtcG9yYWRhKSwgc3RyKGVwaXNvZGlvKSkpKQ0KCWxpei5hZGRDb250ZXh0TWVudUl0ZW1zKG1lbnUsIHJlcGxhY2VJdGVtcz1UcnVlKQ0KCW9rPXhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9aW50KHN5cy5hcmd2WzFdKSx1cmw9dSxsaXN0aXRlbT1saXosaXNGb2xkZXI9RmFsc2UpDQoJcmV0dXJuIG9rDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCQlGVU5DT0VTIEpBIEZFSVRBUwkJCQkJCQkJICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpkZWYgYWJyaXJOYWRhKCk6DQoJeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KSIpDQoJDQpkZWYgYWRkRGlyKG5hbWUsdXJsLHNlbmhhLG1vZGUsZXN0aWxvLGljb25pbWFnZSx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLGRhdGFfdXNlcixmYW5hcnQscGFzdGE9VHJ1ZSx0b3RhbD0xKToNCglpZih0aXBvID09ICdwZXNxdWlzYScgYW5kIHRpcG8gPT0gJ2xpbXBhcmNhY2hlJyBhbmQgdGlwbyA9PSAnbGltcGFydHVkbycpOgkJCQkNCgkJdT1zeXMuYXJndlswXSsiP3VybD0iK3VybGxpYi5xdW90ZV9wbHVzKHVybCkrIiZtb2RlPSIrc3RyKG1vZGUpKyImdGlwb2xvZ2lhPSIrc3RyKHRpcG8pKyImdGlwb191c2VyPSIrc3RyKHRpcG9fdXNlcikrIiZzZXJ2aWRvcl91c2VyPSIrc3RyKHNlcnZpZG9yX3VzZXIpDQoJZWxzZToNCgkJaWYgbW9kZSA9PSAzMzMzIG9yIG1vZGUgPT0gMzMzODoNCgkJCXU9c3lzLmFyZ3ZbMF0rIj91cmw9Iit1cmxsaWIucXVvdGVfcGx1cyh1cmwpKyImbW9kZT0iK3N0cihtb2RlKSsiJm5hbWU9Iit1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSsiJnRpcG9zZWxlY3Q9IitzdHIoc2VuaGEpKyImZmFuYXJ0PSIrc3RyKGZhbmFydCkNCgkJZWxzZToNCgkJCXU9c3lzLmFyZ3ZbMF0rIj91cmw9Iit1cmxsaWIucXVvdGVfcGx1cyh1cmwpKyImbW9kZT0iK3N0cihtb2RlKSsiJm5hbWU9Iit1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSsiJnNlbmhhPSIrc3RyKHNlbmhhKSsiJmVzdGlsbz0iK3VybGxpYi5xdW90ZV9wbHVzKGVzdGlsbykrIiZ0aXBvbG9naWE9IitzdHIodGlwbykrIiZ0aXBvX3VzZXI9IitzdHIodGlwb191c2VyKSsiJnNlcnZpZG9yX3VzZXI9IitzdHIoc2Vydmlkb3JfdXNlcikrIiZkYXRhX3VzZXI9IitzdHIoZGF0YV91c2VyKSsiJmZhbmFydD0iK3N0cihmYW5hcnQpDQoJb2s9VHJ1ZQ0KCWxpej14Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT1pY29uaW1hZ2UsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCglsaXouc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScsIGZhbmFydCkNCglsaXouc2V0QXJ0KHsnZmFuYXJ0JzogZmFuYXJ0fSkNCgkjbGl6LnNldEFydCh7J2ZhbmFydCc6IG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKX0pDQoJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLHVybD11LGxpc3RpdGVtPWxpeixpc0ZvbGRlcj1wYXN0YSx0b3RhbEl0ZW1zPXRvdGFsKQ0KCXJldHVybiBvaw0KCQ0KZGVmIGFkZEZvbGRlcihuYW1lLHVybCxtb2RlLGljb25pbWFnZSxmb2xkZXIpOg0KCXU9c3lzLmFyZ3ZbMF0rIj91cmw9Iit1cmxsaWIucXVvdGVfcGx1cyh1cmwpKyImbW9kZT0iK3N0cihtb2RlKSsiJm5hbWU9Iit1cmxsaWIucXVvdGVfcGx1cyhuYW1lKQ0KCW9rPVRydWUNCglsaXo9eGJtY2d1aS5MaXN0SXRlbShuYW1lLCBpY29uSW1hZ2U9aWNvbmltYWdlLCB0aHVtYm5haWxJbWFnZT1pY29uaW1hZ2UpDQoJbGl6LnNldFByb3BlcnR5KCdmYW5hcnRfaW1hZ2UnLCBpY29uaW1hZ2UpDQoJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLHVybD11LGxpc3RpdGVtPWxpeixpc0ZvbGRlcj1mb2xkZXIpDQoJcmV0dXJuIG9rDQoNCmRlZiBhZGRMaW5rQ2FuYWwobmFtZSx1cmwsaWNvbmltYWdlLGlkY2FuYWwsaWRfcCk6DQoJaW5mb0xhYmVsc3NzcyA9IHsidGl0bGUiOiBuYW1lLCAiZ2VucmUiOiAnQWxsJ30NCglvaz1UcnVlDQoJY209W10NCgkNCglpZihpZGNhbmFsICE9ICcwMDAxJyk6DQoJCWNtLmFwcGVuZCgoJ1ZlciBwcm9ncmFtYcOnw6NvJywgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9MzEmbmFtZT0lcyZ1cmw9JXMmaWNvbmltYWdlPSVzJmlkQ2FuYWw9JXMmaWRmZkNhbmFsPSVzKSclKHN5cy5hcmd2WzBdLHVybGxpYi5xdW90ZV9wbHVzKG5hbWUpLCB1cmxsaWIucXVvdGVfcGx1cyh1cmwpLCB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpLCBpZENhbmFsLCBpZF9wKSkpDQoJDQoJbGl6ID0geGJtY2d1aS5MaXN0SXRlbShuYW1lLCBpY29uSW1hZ2U9aWNvbmltYWdlLCB0aHVtYm5haWxJbWFnZT1pY29uaW1hZ2UpDQoJI2xpei5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJywgZmFuYXJ0KQ0KCSNsaXouc2V0QXJ0KHsnZmFuYXJ0JzogZmFuYXJ0fSkNCglsaXouc2V0SW5mbyggdHlwZT0iVmlkZW8iLCBpbmZvTGFiZWxzPWluZm9MYWJlbHNzc3MpDQoJbGl6LmFkZENvbnRleHRNZW51SXRlbXMoY20sIHJlcGxhY2VJdGVtcz1GYWxzZSkNCglsaXouc2V0UHJvcGVydHkoJ0lzUGxheWFibGUnLCAndHJ1ZScpDQoJdSA9IHN5cy5hcmd2WzBdICsgIj91cmw9IiArIHVybGxpYi5xdW90ZV9wbHVzKHVybCkgKyAiJm1vZGU9MzMzNCZuYW1lPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSArICImaWNvbmltYWdlPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpKyImZGF0YV91c2VyPSIrc3RyKGlkY2FuYWwpDQoJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLCB1cmw9dSwgbGlzdGl0ZW09bGl6KQ0KCXJldHVybiBvaw0KCQ0KZGVmIGFkZExpbmsobmFtZSx1cmwsaWNvbmltYWdlLGlkQ2FuYWwsc3J0ZmlsbSxkZXNjcmljYW8sdGlwbyx0aXBvX3VzZXIsaWRfcCxpbmZvTGFiZWxzc3NzLGZhbmFydCx0aXBwcHAsYWR1bHRvcz1GYWxzZSx0b3RhbD0xKToNCglvaz1UcnVlDQoJY209W10NCgkNCglpZiB0aXBvICE9ICdQcmFpYScgYW5kIHRpcG8gIT0gJ1Byb2dyYW1hc1RWJyBhbmQgdGlwbyAhPSAnRmlsbWUnIGFuZCB0aXBvICE9ICdTZXJpZSc6DQoJCWNtLmFwcGVuZCgoJ1ZlciBwcm9ncmFtYcOnw6NvJywgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9MzEmbmFtZT0lcyZ1cmw9JXMmaWNvbmltYWdlPSVzJmlkQ2FuYWw9JXMmaWRmZkNhbmFsPSVzKSclKHN5cy5hcmd2WzBdLHVybGxpYi5xdW90ZV9wbHVzKG5hbWUpLCB1cmxsaWIucXVvdGVfcGx1cyh1cmwpLCB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpLCBpZENhbmFsLCBpZF9wKSkpDQoJDQoJbGl6ID0geGJtY2d1aS5MaXN0SXRlbShuYW1lLCBpY29uSW1hZ2U9aWNvbmltYWdlLCB0aHVtYm5haWxJbWFnZT1pY29uaW1hZ2UpDQoJbGl6LnNldFByb3BlcnR5KCdmYW5hcnRfaW1hZ2UnLCBmYW5hcnQpDQoJbGl6LnNldEFydCh7J2ZhbmFydCc6IGZhbmFydH0pDQoJbGl6LnNldEluZm8oIHR5cGU9IlZpZGVvIiwgaW5mb0xhYmVscz1pbmZvTGFiZWxzc3NzKQ0KCWxpei5hZGRDb250ZXh0TWVudUl0ZW1zKGNtLCByZXBsYWNlSXRlbXM9RmFsc2UpDQoJDQoJY2FuYWlzcHJvcHJpb3MgPSBGYWxzZQ0KCQ0KCXVybHZlcmlmaWNhID0gdXJsLnNwbGl0KCcudHMnKQ0KCXRvdGFsdmVyID0gbGVuKHVybHZlcmlmaWNhKQ0KCWlmIHRvdGFsdmVyICE9IDE6DQoJCWNhbmFpc3Byb3ByaW9zID0gVHJ1ZTsNCgkJDQoJaWYgJ2FjZXN0cmVhbTovLycgaW4gdXJsOg0KCQljYW5haXNwcm9wcmlvcyA9IFRydWU7DQoJDQoJaWYgY2FuYWlzcHJvcHJpb3MgPT0gRmFsc2U6DQoJCXVybHZlcmlmaWNhMiA9IHVybC5zcGxpdCgnLm0zdTgnKQ0KCQl0b3RhbHZlcjIgPSBsZW4odXJsdmVyaWZpY2EyKQ0KCQlpZiB0b3RhbHZlcjIgIT0gMToNCgkJCWNhbmFpc3Byb3ByaW9zID0gVHJ1ZTsNCgkNCglpZiB0aXBvID09ICdQcm9ncmFtYXNUVicgb3IgdGlwbyA9PSAnUHJhaWEnIG9yIHRpcG8gPT0gJ0ZpbG1lJyBvciB0aXBvID09ICdTZXJpZSc6DQoJCXUgPSBzeXMuYXJndlswXSArICI/dXJsPSIgKyB1cmxsaWIucXVvdGVfcGx1cyh1cmwpICsgIiZtb2RlPTEwNSZuYW1lPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSArICImaWNvbmltYWdlPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpDQoJZWxzZToNCgkJaWYgY2FuYWlzcHJvcHJpb3MgPT0gRmFsc2U6DQoJCQl1ID0gc3lzLmFyZ3ZbMF0gKyAiP3VybD0iICsgdXJsbGliLnF1b3RlX3BsdXModXJsKSArICImbW9kZT0xMDUmbmFtZT0iICsgdXJsbGliLnF1b3RlX3BsdXMobmFtZSkgKyAiJmljb25pbWFnZT0iICsgdXJsbGliLnF1b3RlX3BsdXMoaWNvbmltYWdlKQ0KCQllbHNlOg0KCQkJaWYgJ2FjZXN0cmVhbTovLycgaW4gdXJsOg0KCQkJCXJlaXppbmhvID0gJycNCgkJCWVsc2U6DQoJCQkJbGl6LnNldFByb3BlcnR5KCdJc1BsYXlhYmxlJywgJ3RydWUnKQ0KCQkJDQoJCQl1ID0gc3lzLmFyZ3ZbMF0gKyAiP3VybD0iICsgdXJsbGliLnF1b3RlX3BsdXModXJsKSArICImbW9kZT0xMDYmbmFtZT0iICsgdXJsbGliLnF1b3RlX3BsdXMobmFtZSkgKyAiJmljb25pbWFnZT0iICsgdXJsbGliLnF1b3RlX3BsdXMoaWNvbmltYWdlKQ0KCQ0KCW9rPXhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9aW50KHN5cy5hcmd2WzFdKSwgdXJsPXUsIGxpc3RpdGVtPWxpeikNCglyZXR1cm4gb2sNCg0KZGVmIGFicmlyX3VybCh1cmwsIHBvc3Q9Tm9uZSwgaGVhZGVyPU5vbmUsIGNvZGU9RmFsc2UsIGVycm89RmFsc2UpOg0KCWlmIGhlYWRlciA9PSBOb25lOg0KCQloZWFkZXIgPSBoZWFkZXJzDQoJaWYgcG9zdDoNCgkJcmVxID0gdXJsbGliMi5SZXF1ZXN0KHVybCwgZGF0YT1wb3N0LCBoZWFkZXJzPWhlYWRlcikNCgllbHNlOg0KCQlyZXEgPSB1cmxsaWIyLlJlcXVlc3QodXJsLCBoZWFkZXJzPWhlYWRlcikNCgl0cnk6DQoJCXJlc3BvbnNlID0gdXJsbGliMi51cmxvcGVuKHJlcSkNCglleGNlcHQgdXJsbGliMi5IVFRQRXJyb3IgYXMgcmVzcG9uc2U6DQoJCWlmIGVycm8gPT0gVHJ1ZToNCgkJCXJldHVybiBzdHIocmVzcG9uc2UuY29kZSksICJhc2QiDQoJbGluaz1yZXNwb25zZS5yZWFkKCkNCgkNCglpZiAnanVkaWNpYWwgYmxibGJsYmxibCcgaW4gbGluazoNCgkJcmV0dXJuICdETlMnDQoJaWYgY29kZToNCgkJcmV0dXJuIHN0cihyZXNwb25zZS5jb2RlKSwgbGluaw0KDQoJcmVzcG9uc2UuY2xvc2UoKQ0KCXJldHVybiBsaW5rDQoNCmRlZiBhZGRMaW5rMihuYW1lLHVybCxpY29uaW1hZ2UpOg0KCW9rPVRydWUNCglsaXogPSB4Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT1pY29uaW1hZ2UsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCglsaXouc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScsIGljb25pbWFnZSkNCglsaXouc2V0QXJ0KHsnZmFuYXJ0JzogaWNvbmltYWdlfSkNCglsaXouc2V0SW5mbyggdHlwZT0iVmlkZW8iLCBpbmZvTGFiZWxzPXsgIlRpdGxlIjogbmFtZSB9KQ0KCWxpei5zZXRQcm9wZXJ0eSgnSXNQbGF5YWJsZScsICd0cnVlJykNCgl1ID0gc3lzLmFyZ3ZbMF0gKyAiP3VybD0iICsgdXJsICsgIiZtb2RlPTEwNiZuYW1lPSIgKyBuYW1lICsgIiZpY29uaW1hZ2U9IiArIGljb25pbWFnZQ0KCW9rPXhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9aW50KHN5cy5hcmd2WzFdKSwgdXJsPXUsIGxpc3RpdGVtPWxpeikNCglyZXR1cm4gb2sNCg0KZGVmIHBsYXlfbXVsdF9jYW5hbChhcmcsIGljb24sIG5vbWUpOg0KCXVybGNoYW1hID0gYXJnLnNwbGl0KCc7OzsnKQ0KCXRvdGFsMiA9IGxlbih1cmxjaGFtYSkNCgl1cmxjb3JyZWN0byA9ICcnDQoJaWYgdG90YWwyID09IDE6DQoJCXVybGNvcnJlY3RvID0gYXJnLnJlcGxhY2UoJyBydG1wJywncnRtcCcpLnJlcGxhY2UoJyBydHNwJywncnRzcCcpLnJlcGxhY2UoJyBodHRwJywnaHR0cCcpLnJlcGxhY2UoJ3V0aWxpemFkb3JsaXZlaXQnLF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikpLnJlcGxhY2UoJ3NlbmhhbGl2ZWl0JyxfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSkNCgllbHNlOg0KCQluZXQgPSBOZXQoKQ0KCQluZXQuc2V0X2Nvb2tpZXMoX19DT09LSUVfRklMRV9fKQ0KCQlkYWRvcyA9IHsndXJsJzogdXJsY2hhbWFbMV0sICdjYW5hbCc6IHVybGNoYW1hWzBdfQ0KCQljb2RpZ29fZm9udGUgPSBuZXQuaHR0cF9QT1NUKF9fU0lURUJEX18rJ3NlYXJjaHVybC5waHAnLGZvcm1fZGF0YT1kYWRvcyxoZWFkZXJzPV9fSEVBREVSU19fKS5jb250ZW50DQoJCWVsZW1zID0gRVQuZnJvbXN0cmluZyhjb2RpZ29fZm9udGUpDQoJCWZvciBjaGlsZCBpbiBlbGVtczoNCgkJCWlmKGNoaWxkLnRhZyA9PSAnaW5mbycpOg0KCQkJCWZvciBkIGluIGNoaWxkOg0KCQkJCQlpZihkLnRhZyA9PSAndXJsJyk6DQoJCQkJCQl1cmxjb3JyZWN0byA9IGQudGV4dA0KCQ0KCSNfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdVcmw6ICcrdXJsY29ycmVjdG8pDQoJDQoJcGxheWxpc3QgPSB4Ym1jLlBsYXlMaXN0KHhibWMuUExBWUxJU1RfVklERU8pDQoJcGxheWxpc3QuY2xlYXIoKQ0KCWxpc3RpdGVtID0geGJtY2d1aS5MaXN0SXRlbShub21lLCB0aHVtYm5haWxJbWFnZT1pY29uaW1hZ2UpDQoJbGlzdGl0ZW0uc2V0SW5mbygndmlkZW8nLCB7J1RpdGxlJzogbm9tZX0pDQoJcGxheWxpc3QuYWRkKHVybD11cmxjb3JyZWN0bywgbGlzdGl0ZW09bGlzdGl0ZW0sIGluZGV4PTEpDQoJeGJtYy5QbGF5ZXIoKS5wbGF5KHBsYXlsaXN0KQ0KDQpkZWYgcGxheV9jYW5hbChhcmcsIGljb24sIG5vbWUpOg0KCWxpc3RpdGVtID0geGJtY2d1aS5MaXN0SXRlbSggbGFiZWwgPSBzdHIobm9tZSksIGljb25JbWFnZSA9IGljb24sIHRodW1ibmFpbEltYWdlID0gaWNvbiwgcGF0aD1hcmcgKQ0KCWxpc3RpdGVtLnNldFByb3BlcnR5KCdmYW5hcnRfaW1hZ2UnLCBpY29uKQ0KCWxpc3RpdGVtLnNldEFydCh7J2ZhbmFydCc6IGljb259KQ0KCWxpc3RpdGVtLnNldFByb3BlcnR5KCdtaW1ldHlwZScsICd2aWRlby94LW1zdmlkZW8nKQ0KCWxpc3RpdGVtLnNldEluZm8odHlwZT0iVmlkZW8iLCBpbmZvTGFiZWxzPXsgIlRpdGxlIjogbm9tZSB9KQ0KCWlmICdhY2VzdHJlYW06Ly8nIGluIGFyZzoNCgkJZnJvbSByZXNvdXJjZXMubGliLmFjZWNvcmUgaW1wb3J0IFRTZW5naW5lIGFzIHRzZW5naW5lDQoJCXhibWMuZXhlY3V0ZWJ1aWx0aW4oJ0FjdGlvbihTdG9wKScpDQoJCWxvY2tfZmlsZSA9IHhibWMudHJhbnNsYXRlUGF0aCgnc3BlY2lhbDovL3RlbXAvJysgJ3RzLmxvY2snKQ0KCQlpZiB4Ym1jdmZzLmV4aXN0cyhsb2NrX2ZpbGUpOg0KCQkJeGJtY3Zmcy5kZWxldGUobG9ja19maWxlKQ0KCQlhY2Vwb3J0PTYyMDYyDQoJCWNoaWQ9YXJnLnJlcGxhY2UoJ2FjZXN0cmVhbTovLycsJycpLnJlcGxhY2UoJ3RzOi8vJywnJykNCgkJVFNQbGF5ZXIgPSB0c2VuZ2luZSgpDQoJCW91dCA9IE5vbmUNCgkJaWYgY2hpZC5maW5kKCdodHRwOi8vJykgPT0gLTEgYW5kIGNoaWQuZmluZCgnLnRvcnJlbnQnKSA9PSAtMToNCgkJCW91dCA9IFRTUGxheWVyLmxvYWRfdG9ycmVudChjaGlkLCdQSUQnLHBvcnQ9YWNlcG9ydCkNCgkJZWxpZiBjaGlkLmZpbmQoJ2h0dHA6Ly8nKSA9PSAtMSBhbmQgY2hpZC5maW5kKCcudG9ycmVudCcpICE9IC0xOg0KCQkJb3V0ID0gVFNQbGF5ZXIubG9hZF90b3JyZW50KGNoaWQsJ1RPUlJFTlQnLHBvcnQ9YWNlcG9ydCkNCgkJZWxzZToNCgkJCW91dCA9IFRTUGxheWVyLmxvYWRfdG9ycmVudChjaGlkLCdUT1JSRU5UJyxwb3J0PWFjZXBvcnQpDQoJCWlmIG91dCA9PSAnT2snOg0KCQkJVFNQbGF5ZXIucGxheV91cmxfaW5kKDAsbm9tZSArICcgKCcgKyBjaGlkICsgJyknLGljb24saWNvbikNCgkJCVRTUGxheWVyLmVuZCgpDQoJCQlyZXR1cm4NCgkJZWxzZToJDQoJCQlfX0FMRVJUQV9fKEFkZG9uVGl0bGUsICdFcnJvIGFvIGFicmlyIG8gY2FuYWwgQWNlc3RyZWFtLiAnKQ0KCQkJVFNQbGF5ZXIuZW5kKCkNCgkJCXJldHVybgkNCgllbHNlOg0KCQl4Ym1jcGx1Z2luLnNldFJlc29sdmVkVXJsKGludChzeXMuYXJndlsxXSksIFRydWUsIGxpc3RpdGVtKQ0KDQpkZWYgYWRkRGlyMihuYW1lLHVybCxtb2RlLG1vZGUyLGljb25pbWFnZSxwYWdpbmE9MSx0aXBvPU5vbmUsaW5mb0xhYmVscz1Ob25lLHBvc3Rlcj1Ob25lLHZpc3RvPUZhbHNlKToNCglpZiBpbmZvTGFiZWxzOiBpbmZvTGFiZWxzQXV4ID0gaW5mb0xhYmVscw0KCWVsc2U6IGluZm9MYWJlbHNBdXggPSB7J1RpdGxlJzogbmFtZX0NCglmYW5hcnQgPSAnJw0KCWlmIHBvc3RlcjogZmFuYXJ0ID0gcG9zdGVyDQoJZWxzZTogZmFuYXJ0ID0gaWNvbmltYWdlDQoJDQoJdHJ5Og0KCQluYW1lID0gbmFtZS5lbmNvZGUoJ3V0Zi04JykNCglleGNlcHQ6DQoJCW5hbWUgPSBuYW1lDQoNCgl1PXN5cy5hcmd2WzBdKyI/dXJsPSIrdXJsbGliLnF1b3RlX3BsdXModXJsKSsiJm1vZG89Iittb2RlMisiJm1vZGU9IitzdHIobW9kZSkrIiZuYW1lPSIrdXJsbGliLnF1b3RlX3BsdXMobmFtZSkNCgkNCglvaz1UcnVlDQoNCgkjZmFuYXJ0ID0gX19GQU5BUlRfXw0KDQoJaWYgdGlwbyA9PSAnZmlsbWUnOg0KCQkjZmFuYXJ0ID0gcG9zdGVyQXV4DQoJCXhibWNwbHVnaW4uc2V0Q29udGVudChpbnQoc3lzLmFyZ3ZbMV0pLCAnTW92aWVzJykNCgllbGlmIHRpcG8gPT0gJ3NlcmllJzoNCgkJI2ZhbmFydCA9IHBvc3RlckF1eA0KCQl4Ym1jcGx1Z2luLnNldENvbnRlbnQoaW50KHN5cy5hcmd2WzFdKSwgJ3R2c2hvd3MnKQ0KCWVsaWYgdGlwbyA9PSAnZXBpc29kaW8nOg0KCQkjZmFuYXJ0ID0gcG9zdGVyQXV4DQoJCXhibWNwbHVnaW4uc2V0Q29udGVudChpbnQoc3lzLmFyZ3ZbMV0pLCAnZXBpc29kZXMnKQ0KCWVsc2U6DQoJCWlmIG5hbWUgIT0gJ1JlZnJlc2gnOg0KCQkJeGJtY3BsdWdpbi5zZXRDb250ZW50KGludChzeXMuYXJndlsxXSksICdNb3ZpZXMnKQ0KCQ0KCW92ZXJsYXkgPSA2DQoJcGxheWNvdW50ID0gMA0KCQ0KCWluZm9MYWJlbHNBdXhbIm92ZXJsYXkiXSA9IG92ZXJsYXkNCglpbmZvTGFiZWxzQXV4WyJwbGF5Y291bnQiXSA9IHBsYXljb3VudA0KCQ0KCWxpej14Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT1pY29uaW1hZ2UsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCglsaXouc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScsIGZhbmFydCkNCglsaXouc2V0QXJ0KHsnZmFuYXJ0JzogZmFuYXJ0fSkNCglsaXouc2V0SW5mbyggdHlwZT0iVmlkZW8iLCBpbmZvTGFiZWxzPWluZm9MYWJlbHNBdXggKQ0KDQoJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLHVybD11LGxpc3RpdGVtPWxpeixpc0ZvbGRlcj1UcnVlKQ0KCXJldHVybiBvaw0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIwkJCQkJCQkgIERFRklOSU5DT0VTCQkJCQkJCQkJCSAgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMJDQpkZWYgcmV0dXJuZXN0aWxvKGVzdGlsb25vdm8pOg0KCV9fZXN0aWxhZ2VtX18gPSAiIg0KCQ0KCWlmIGVzdGlsb25vdm8gPT0gIkxpc3RhIjoNCgkJX19lc3RpbGFnZW1fXyA9IkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MCkiDQoJZWxpZiBlc3RpbG9ub3ZvID09ICJMaXN0YSBHcmFuZGUiOg0KCQlfX2VzdGlsYWdlbV9fID0gIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MSkiDQoJZWxpZiBlc3RpbG9ub3ZvID09ICJNaW5pYXR1cmEiOg0KCQlfX2VzdGlsYWdlbV9fID0iQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMCkiDQoJZWxpZiBlc3RpbG9ub3ZvID09ICJQb3N0ZXJzIjoNCgkJX19lc3RpbGFnZW1fXyA9IkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDEpIg0KCWVsaWYgZXN0aWxvbm92byA9PSAiRmFuYXJ0IjoNCgkJX19lc3RpbGFnZW1fXyA9ICJDb250YWluZXIuU2V0Vmlld01vZGUoNTA4KSINCgllbGlmIGVzdGlsb25vdm8gPT0gIk1lZGlhIEluZm8gMSI6DQoJCV9fZXN0aWxhZ2VtX18gPSAiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwNCkiDQoJZWxpZiBlc3RpbG9ub3ZvID09ICJNZWRpYSBJbmZvIDIiOg0KCQlfX2VzdGlsYWdlbV9fID0gIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDMpIg0KCWVsaWYgZXN0aWxvbm92byA9PSAiTWVkaWEgSW5mbyAzIjoNCgkJX19lc3RpbGFnZW1fXyA9ICJDb250YWluZXIuU2V0Vmlld01vZGUoNTE1KSINCgkJDQoJX19lc3RpbGFnZW1fXyA9IkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1NSkiDQoJcmV0dXJuIF9fZXN0aWxhZ2VtX18NCgkNCmRlZiB2aXN0YV9DYW5haXMoKToNCgl4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTUpIikNCglvcGNhbyA9IF9fQURET05fXy5nZXRTZXR0aW5nKCdjYW5haXNWaWV3JykNCgkjaWYgb3BjYW8gPT0gJzAnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTApIikNCgkjZWxpZiBvcGNhbyA9PSAnMSc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MSkiKQ0KCSNlbGlmIG9wY2FvID09ICcyJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMCkiKQ0KCSNlbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOSkiKQ0KCSNlbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOCkiKQ0KCSNlbGlmIG9wY2FvID09ICc0JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwNCkiKQ0KCSNlbGlmIG9wY2FvID09ICc1JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMykiKQ0KCSNlbGlmIG9wY2FvID09ICc2JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxNSkiKQ0KCSNlbGlmIG9wY2FvID09ICc3JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KSIpDQoNCmRlZiB2aXN0YV9DYW5haXNfTGlzdGEoKToNCgl4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTUpIikNCglvcGNhbyA9IF9fQURET05fXy5nZXRTZXR0aW5nKCdjYW5haXNWaWV3MicpDQoJI2lmIG9wY2FvID09ICcwJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwKSIpDQoJI2VsaWYgb3BjYW8gPT0gJzEnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTEpIikNCgkjZWxpZiBvcGNhbyA9PSAnMic6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDApIikNCgkjZWxpZiBvcGNhbyA9PSAnMyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDkpIikNCgkjZWxpZiBvcGNhbyA9PSAnMyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDgpIikNCgkjZWxpZiBvcGNhbyA9PSAnNCc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDQpIikNCgkjZWxpZiBvcGNhbyA9PSAnNSc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDMpIikNCgkjZWxpZiBvcGNhbyA9PSAnNic6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MTUpIikNCgkjZWxpZiBvcGNhbyA9PSAnNyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1NSkiKQ0KDQpkZWYgYWJyaXJEZWZpbmluY29lcygpOg0KCV9fQURET05fXy5vcGVuU2V0dGluZ3MoKQ0KCWFkZERpcignRW50cmFyIG5vdmFtZW50ZScsICd1cmwnLCBOb25lLCBOb25lLCAnTWluaWF0dXJhJywgX19TSVRFQWRkb25fXysiSW1hZ2Vucy9yZXRyb2NlZGVyLnBuZyIsJycsJycsJycsJycsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Z1bmRvX2FkZG9uLnBuZycpKQ0KCXZpc3RhX21lbnUoKQ0KDQpkZWYgYWJyaXJEZWZpbmluY29lc01lc21vKCk6DQoJX19BRERPTl9fLm9wZW5TZXR0aW5ncygpDQoJdmlzdGFfbWVudSgpDQoNCmRlZiB2aXN0YV9tZW51KCk6DQoJeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KSIpDQoJb3BjYW8gPSBfX0FERE9OX18uZ2V0U2V0dGluZygnbWVudVZpZXcnKQ0KCSNpZiBvcGNhbyA9PSAnMCc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MCkiKQ0KCSNlbGlmIG9wY2FvID09ICcxJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxKSIpDQoJI2VsaWYgb3BjYW8gPT0gJzInOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTAwKSIpDQoJI2VsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA5KSIpDQoJI2VsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA4KSIpDQoJI2VsaWYgb3BjYW8gPT0gJzQnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA0KSIpDQoJI2VsaWYgb3BjYW8gPT0gJzUnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTAzKSIpDQoJI2VsaWYgb3BjYW8gPT0gJzYnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTE1KSIpDQoJI2VsaWYgb3BjYW8gPT0gJzcnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTUpIikNCg0KZGVmIHZpc3RhX2ZpbG1lc1NlcmllcygpOg0KCXhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1NSkiKQ0KCW9wY2FvID0gX19BRERPTl9fLmdldFNldHRpbmcoJ2ZpbG1lc1Nlcmllc1ZpZXcnKQ0KCSNpZiBvcGNhbyA9PSAnMCc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MCkiKQ0KCSNlbGlmIG9wY2FvID09ICcxJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxKSIpDQoJI2VsaWYgb3BjYW8gPT0gJzInOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTAwKSIpDQoJI2VsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA5KSIpDQoJI2VsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA4KSIpDQoJI2VsaWYgb3BjYW8gPT0gJzQnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA0KSIpDQoJI2VsaWYgb3BjYW8gPT0gJzUnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTAzKSIpDQoJI2VsaWYgb3BjYW8gPT0gJzYnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTE1KSIpDQoJI2VsaWYgb3BjYW8gPT0gJzcnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTUpIikNCg0KDQpkZWYgdmlzdGFfdGVtcG9yYWRhcygpOg0KCXhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1NSkiKQ0KCW9wY2FvID0gX19BRERPTl9fLmdldFNldHRpbmcoJ3RlbXBvcmFkYXNWaWV3JykNCgkjaWYgb3BjYW8gPT0gJzAnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTApIikNCgkjZWxpZiBvcGNhbyA9PSAnMSc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MSkiKQ0KCSNlbGlmIG9wY2FvID09ICcyJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMCkiKQ0KCSNlbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOSkiKQ0KCSNlbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOCkiKQ0KCSNlbGlmIG9wY2FvID09ICc0JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwNCkiKQ0KCSNlbGlmIG9wY2FvID09ICc1JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMykiKQ0KCSNlbGlmIG9wY2FvID09ICc2JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxNSkiKQ0KCSNlbGlmIG9wY2FvID09ICc3JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KSIpDQoNCmRlZiB2aXN0YV9lcGlzb2Rpb3MoKToNCgl4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTUpIikNCglvcGNhbyA9IF9fQURET05fXy5nZXRTZXR0aW5nKCdlcGlzb2Rpb3NWaWV3JykNCgkjaWYgb3BjYW8gPT0gJzAnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTApIikNCgkjZWxpZiBvcGNhbyA9PSAnMSc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MSkiKQ0KCSNlbGlmIG9wY2FvID09ICcyJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMCkiKQ0KCSNlbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOSkiKQ0KCSNlbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOCkiKQ0KCSNlbGlmIG9wY2FvID09ICc0JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwNCkiKQ0KCSNlbGlmIG9wY2FvID09ICc1JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMykiKQ0KCSNlbGlmIG9wY2FvID09ICc2JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxNSkiKQ0KCSNlbGlmIG9wY2FvID09ICc3JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KSIpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIwkJCQkJCQkJCQkJCUdFVCBQQVJBTVMJCQkJCQkJCQkJCQkgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCQkgIA0KZGVmIGdldF9wYXJhbXMoKToNCglwYXJhbT1bXQ0KCXBhcmFtc3RyaW5nPXN5cy5hcmd2WzJdDQoJaWYgbGVuKHBhcmFtc3RyaW5nKT49MjoNCgkJcGFyYW1zPXN5cy5hcmd2WzJdDQoJCWNsZWFuZWRwYXJhbXM9cGFyYW1zLnJlcGxhY2UoJz8nLCcnKQ0KCQlpZiAocGFyYW1zW2xlbihwYXJhbXMpLTFdPT0nLycpOiBwYXJhbXM9cGFyYW1zWzA6bGVuKHBhcmFtcyktMl0NCgkJcGFpcnNvZnBhcmFtcz1jbGVhbmVkcGFyYW1zLnNwbGl0KCcmJykNCgkJcGFyYW09e30NCgkJZm9yIGkgaW4gcmFuZ2UobGVuKHBhaXJzb2ZwYXJhbXMpKToNCgkJCXNwbGl0cGFyYW1zPXt9DQoJCQlzcGxpdHBhcmFtcz1wYWlyc29mcGFyYW1zW2ldLnNwbGl0KCc9JykNCgkJCWlmIChsZW4oc3BsaXRwYXJhbXMpKT09MjogcGFyYW1bc3BsaXRwYXJhbXNbMF1dPXNwbGl0cGFyYW1zWzFdDQoJcmV0dXJuIHBhcmFtDQoNCg0KcGFyYW1zPWdldF9wYXJhbXMoKQ0KdXJsPU5vbmUNCmJ1aWxkdGlwbz1Ob25lDQpuYW1lPU5vbmUNCm1vZGU9Tm9uZQ0KaWNvbmltYWdlPU5vbmUNCmxpbms9Tm9uZQ0Kc2VuaGE9Tm9uZQ0KZXN0aWxvPU5vbmUNCnNydGZpbG09Tm9uZQ0KaWRDYW5hbD1Ob25lDQppZGZmQ2FuYWw9Tm9uZQ0KdGlwb2xvZ2lhPU5vbmUNCmRlc2NyaWNhbz1Ob25lDQp0aXBvX3VzZXI9Tm9uZQ0Kc2Vydmlkb3JfdXNlcj1Ob25lDQpkYXRhX3VzZXI9Tm9uZQ0Kc19zZXJ2PU5vbmUNCnNfdXNlcj1Ob25lDQpzX3Bhc3M9Tm9uZQ0KbGVnZW5kYT1Ob25lDQpwYWdpbmE9Tm9uZQ0KdGVtcG9yYWRhPU5vbmUNCmVwaXNvZGlvPU5vbmUNCnNlcmllTm9tZT1Ob25lDQpmYW5hcnQ9Tm9uZQ0KdGh1bWJuYWlsPU5vbmUNCnN0cmVhbV9pZD1Ob25lDQpkdXJhdGlvbj1Ob25lDQp0aXBvc2VsZWN0PU5vbmUNCg0KdHJ5OiBkdXJhdGlvbj11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1siZHVyYXRpb24iXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBzdHJlYW1faWQ9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbInN0cmVhbV9pZCJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHVybD11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sidXJsIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogbmFtZT11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sibmFtZSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IGVzdGlsbz11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1siZXN0aWxvIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogbW9kZT1pbnQocGFyYW1zWyJtb2RlIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogaWNvbmltYWdlPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJpY29uaW1hZ2UiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBzZW5oYT11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sic2VuaGEiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBpZENhbmFsPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJpZENhbmFsIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogaWRmZkNhbmFsPXBhcmFtc1siaWRmZkNhbmFsIl0NCmV4Y2VwdDogcGFzcw0KdHJ5OiBzcnRmaWxtPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJzcnRmaWxtIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogdGlwb2xvZ2lhPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJ0aXBvbG9naWEiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBkZXNjcmljYW89dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImRlc2NyaWNhbyJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHRpcG9fdXNlcj11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sidGlwb191c2VyIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogc2Vydmlkb3JfdXNlcj11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sic2Vydmlkb3JfdXNlciJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHNfc2Vydj11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sibG9sc2VydiJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHNfdXNlcj11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sibG9sdXNlciJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHNfcGFzcz11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sibG9scGFzcyJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IGxpbms9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImxpbmsiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBsZWdlbmRhPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJsZWdlbmRhIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogbmFtZT11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sibmFtZSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHRlbXBvcmFkYT1pbnQocGFyYW1zWyJ0ZW1wb3JhZGEiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBlcGlzb2Rpbz1pbnQocGFyYW1zWyJlcGlzb2RpbyJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IG1vZGU9aW50KHBhcmFtc1sibW9kZSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHBhZ2luYT1pbnQocGFyYW1zWyJwYWdpbmEiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBpY29uaW1hZ2U9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImljb25pbWFnZSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnkgOiBzZXJpZU5vbWU9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbInNlcmllTm9tZSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnkgOiBidWlsZHRpcG89dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImJ1aWxkdGlwbyJdKQ0KZXhjZXB0OiBwYXNzDQp0cnkgOiBmYW5hcnQ9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImZhbmFydCJdKQ0KZXhjZXB0OiBwYXNzDQp0cnkgOiB0aHVtYm5haWw9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbInRodW1ibmFpbCJdKQ0KZXhjZXB0OiBwYXNzDQp0cnkgOiBkYXRhX3VzZXI9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImRhdGFfdXNlciJdKQ0KZXhjZXB0OiBwYXNzDQp0cnkgOiB0aXBvc2VsZWN0PXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJ0aXBvc2VsZWN0Il0pDQpleGNlcHQ6IHBhc3MNCg0KDQoNCg0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMJCQkJCQkJCQkJCQkJTU9ET1MJCQkJCQkJCQkJCQkJICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KaWYgbW9kZT09Tm9uZSBvciB1cmw9PU5vbmUgb3IgbGVuKHVybCk8MTogbWVudSgpDQplbGlmIG1vZGU9PTE6IGxpc3Rhcl9ncnVwb3Moc3RyKG5hbWUpLHN0cih1cmwpLGVzdGlsbyx0aXBvbG9naWEsdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsZmFuYXJ0KQ0KZWxpZiBtb2RlPT0yOiBsaXN0YXJfY2FuYWlzX3VybChzdHIobmFtZSksc3RyKHVybCksZXN0aWxvLHRpcG9sb2dpYSx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixmYW5hcnQsZGF0YV91c2VyKQ0KZWxpZiBtb2RlPT00OiBidWlsZExpdmVpdChidWlsZHRpcG8pDQplbGlmIG1vZGU9PTM6IGxpc3Rhcl9ncnVwb3NfYWR1bHRvcyhzdHIodXJsKSxzdHIoc2VuaGEpLGVzdGlsbyx0aXBvbG9naWEsdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsZmFuYXJ0KQ0KZWxpZiBtb2RlPT0xMDogbWluaGFDb250YShzdHIobmFtZSksZXN0aWxvKQ0KZWxpZiBtb2RlPT0yMDogbGlzdGFtZW51c3NlcmllcyhzdHIobmFtZSksc3RyKHVybCksZXN0aWxvLHRpcG9sb2dpYSx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixpY29uaW1hZ2UsZmFuYXJ0KQ0KZWxpZiBtb2RlPT0yMTogbGlzdGFtZW51c2ZpbG1lcyhzdHIobmFtZSksc3RyKHVybCksZXN0aWxvLHRpcG9sb2dpYSx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixpY29uaW1hZ2UsZmFuYXJ0KQ0KZWxpZiBtb2RlPT0yNDogbGlzdGFtZW51c2FuaW1lcyhzdHIobmFtZSksc3RyKHVybCksZXN0aWxvLHRpcG9sb2dpYSx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixpY29uaW1hZ2UsZmFuYXJ0KQ0KZWxpZiBtb2RlPT0yNTogbGlzdGF0dmFyY2hpdmUoc3RyKHVybCkpDQplbGlmIG1vZGU9PTI3OiBkZWZpbmljb2VzKHN0cih1cmwpLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyKQ0KZWxpZiBtb2RlPT0yODogYWJyaXJWaWRlb0NsdWJlKHN0cih1cmwpLHRpcG9fdXNlcikNCmVsaWYgbW9kZT09MjY6IGxpc3RhdHZhcmNoaXZlY2FuYWlzKHN0cihuYW1lKSxzdHJlYW1faWQsc3RyKHVybCksZHVyYXRpb24saWNvbmltYWdlLGZhbmFydCkNCiNlbGlmIG1vZGU9PTIyOiBtZW51U2VyaWVzKCkNCiNlbGlmIG1vZGU9PTIzOiBtZW51RmlsbWVzKCkNCmVsaWYgbW9kZT09MzE6IHByb2dyYW1hY2FvX2NhbmFsKGlkQ2FuYWwpDQplbGlmIG1vZGU9PTEwNTogcGxheV9tdWx0X2NhbmFsKHVybCwgaWNvbmltYWdlLCBuYW1lKQ0KZWxpZiBtb2RlPT0xMDY6IHBsYXlfY2FuYWwodXJsLCBpY29uaW1hZ2UsIG5hbWUpDQplbGlmIG1vZGU9PTExMDogbWluaGFDb250YTIoKQ0KZWxpZiBtb2RlPT0xMTE6IGZpbG1lcyh1cmwsIHBhZ2luYSkNCmVsaWYgbW9kZT09MTIzOiBzZXJpZXModXJsKQ0KZWxpZiBtb2RlPT0xMTg6IGdldEdlbmVyb3ModXJsKQ0KZWxpZiBtb2RlPT0xMTk6IGdldFllYXJzKHVybCkNCmVsaWYgbW9kZT09MTIwOiBwZXNxdWlzYSh1cmwsc2Vydmlkb3JfdXNlcikNCmVsaWYgbW9kZT09MTIxOiBhbm9zKHVybCkNCmVsaWYgbW9kZT09MTIyOiBjYXRlZ29yaWFzKHVybCkNCmVsaWYgbW9kZT09MTEzOiBwbGF5ZXIobmFtZSwgdXJsLCBpY29uaW1hZ2UsIHRlbXBvcmFkYSwgZXBpc29kaW8sIHNlcmllTm9tZSkNCmVsaWYgbW9kZT09MTE0OiBnZXRTZWFzb25zKHVybCkNCmVsaWYgbW9kZT09MTE1OiBnZXRFcGlzb2Rlcyh1cmwpDQplbGlmIG1vZGU9PTExNzogZG93bmxvYWQodXJsLCBuYW1lLCB0ZW1wb3JhZGEsIGVwaXNvZGlvLCBzZXJpZU5vbWUpDQplbGlmIG1vZGU9PTEwMDA6IGFicmlyRGVmaW5pbmNvZXMoKQ0KZWxpZiBtb2RlPT0yMDAwOiBhYnJpck5hZGEoKQ0KZWxpZiBtb2RlPT0zMDAwOiBhYnJpckRlZmluaW5jb2VzTWVzbW8oKQ0KZWxpZiBtb2RlPT0zMzMzOiBhYnJpbTN1Mih1cmwsdGlwb3NlbGVjdCkNCiNlbGlmIG1vZGU9PTMzMzM6IGFicmltM3UyKHVybCxkYXRhX3VzZXIpDQplbGlmIG1vZGU9PTMzMzU6IGV4ZWN1dGVfYWluZm8odXJsKQ0KZWxpZiBtb2RlPT0zMzM2OiBzZWN1cml0eV9jaGVjayh1cmwpDQplbGlmIG1vZGU9PTMzMzc6IGRldGVjdF9tb2RpZmljYXRpb24odXJsKQ0KZWxpZiBtb2RlPT0zMzM4OiBzdHJlYW1fdmlkZW8obmFtZSx1cmwsaWNvbmltYWdlLHRpcG9zZWxlY3QpDQplbGlmIG1vZGU9PTMzMzk6IGdldF9teWFjY291bnQobmFtZSx1cmwsaWNvbmltYWdlKQ0KZWxpZiBtb2RlPT0zMzQwOiBydW5fY3JvbmpvYihuYW1lLHVybCxpY29uaW1hZ2UsdGh1bWJuYWlsLGZhbmFydCkNCmVsaWYgbW9kZT09MzMzNDogUGxheVVybChuYW1lLHVybCxpY29uaW1hZ2UpDQplbGlmIG1vZGU9PTQwMDA6IG1pbmhhQ29udGFidWlsZCgpDQplbGlmIG1vZGU9PTUwMDA6IENMRUFSQ0FDSEUoKQ0KZWxpZiBtb2RlPT02MDAwOiBQVVJHRVBBQ0tBR0VTKCkNCiNlbGlmIG1vZGU9PTcwMDA6IGxvZ2luUGVzcXVpc2EoKQ0KZWxpZiBtb2RlPT04MDAwOiBidWlsZExpdmVpdCh1cmwpDQoNCmlmIG1vZGU9PU5vbmUgb3IgdXJsPT1Ob25lIG9yIGxlbih1cmwpPDE6DQoJeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pLGNhY2hlVG9EaXNjPUZhbHNlKQ0KZWxzZToNCglpZiBtb2RlICE9NzAwMCBhbmQgIG1vZGUgIT0xMjAgYW5kIG1vZGUgIT0zMzMzIGFuZCBtb2RlICE9MjYgYW5kIG1vZGUgIT0yNzogDQoJCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoaW50KHN5cy5hcmd2WzFdKSxjYWNoZVRvRGlzYz1GYWxzZSkNCgllbGlmIG1vZGUgPT0gMTIwIG9yIG1vZGUgPT0gNzAwMDoNCgkJcGVzcXVpc2EodXJsLHNlcnZpZG9yX3VzZXIpDQoJCSNpZiBtb2RlID0gMTIwOg0KCQkjCXBlc3F1aXNhKHVybCxzZXJ2aWRvcl91c2VyKQ0KCQkjZWxzZToNCgkJIwlsb2dpblBlc3F1aXNhKCkNCgllbHNlOiANCgkJeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pLGNhY2hlVG9EaXNjPVRydWUp"))