exec("import re;import base64");exec(base64.b64decode("IyEvdXNyL2Jpbi9lbnYgcHl0aG9uDQojIC0qLSBjb2Rpbmc6IFVURi04IC0qLQ0KIyBUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQ0KIyBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQ0KIyB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcg0KIyAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLg0KIw0KIyBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwNCiMgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YNCiMgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZQ0KIyBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLg0KIw0KIyBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQ0KIyBhbG9uZyB3aXRoIHRoaXMgcHJvZ3JhbS4gIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4NCg0KDQojIyMjIyMjIyMjIyMjI0JJQkxJT1RFQ0FTIEEgSU1QT1JUQVIgRSBERUZJTklDT0VTIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmltcG9ydCB1cmxsaWIsdXJsbGliMixzeXMscmUseGJtY3BsdWdpbix4Ym1jZ3VpLHhibWNhZGRvbix4Ym1jLG9zLGpzb24sZ2xvYix0aHJlYWRpbmcsZ3ppcCx4Ym1jdmZzLGNvb2tpZWxpYixwcHJpbnQsZGF0ZXRpbWUsdGhyZWFkLHRpbWUsdXJscGFyc2UsYmFzZTY0LHBsdWdpbnRvb2xzLGNhbGVuZGFyDQppbXBvcnQgeG1sLmV0cmVlLkVsZW1lbnRUcmVlIGFzIEVUDQppbXBvcnQgZmlsZVV0aWxzIGFzIGZ1DQoNCmZyb20gcmVzb3VyY2VzLmxpYiBpbXBvcnQgY29tbW9uDQpmcm9tIHVybGxpYjIgaW1wb3J0IFJlcXVlc3QsIHVybG9wZW4NCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGUNCmZyb20gYnM0IGltcG9ydCBCZWF1dGlmdWxTb3VwDQpmcm9tIHJlc291cmNlcy5saWIgaW1wb3J0IERvd25sb2FkZXIgI0VuZW45MiBjbGFzcw0KZnJvbSByZXNvdXJjZXMubGliIGltcG9ydCBQbGF5ZXINCmZyb20gcmVzb3VyY2VzLmxpYiBpbXBvcnQgVFZBcmNoaXZlDQpmcm9tIHQwbW0wLmNvbW1vbi5uZXQgaW1wb3J0IE5ldA0KZnJvbSB0MG1tMC5jb21tb24uYWRkb24gaW1wb3J0IEFkZG9uDQpmcm9tIHQwbW0wLmNvbW1vbi5uZXQgaW1wb3J0IEh0dHBSZXNwb25zZQ0KZnJvbSByZXNvdXJjZXMubGliIGltcG9ydCBVUkxSZXNvbHZlck1lZGlhDQpmcm9tIHJlc291cmNlcy5saWIgaW1wb3J0IFRyYWt0DQpmcm9tIHJlc291cmNlcy5saWIgaW1wb3J0IERhdGFiYXNlDQpmcm9tIHVuaWNvZGVkYXRhIGltcG9ydCBub3JtYWxpemUNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBDT05TVEFOVEVTICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmdsb2JhbCBnX3RpbWVyDQpnbG9iYWwgcG5pbWkNCmdsb2JhbCB0ZWxldmlzaW9vbmlsaW5rDQpnbG9iYWwgZmlsbWlsaW5rDQpnbG9iYWwgYW5kbWVsaW5rDQpnbG9iYWwgdXVlbmR1c2xpbmsNCmdsb2JhbCBsZWhla3lsZw0KZ2xvYmFsIExPQURfTElWRQ0KZ2xvYmFsIHV1ZW5kdXNlZA0KZ2xvYmFsIHZhbmVtYWx1a2sNCmdsb2JhbCB2ZXJzaW9uDQpnbG9iYWwgbW9kZQ0KZ2xvYmFsIGFycmdydXBvcw0KZ2xvYmFsIGFycmxpbmtzDQoNCnJlbG9hZChzeXMpDQpzeXMuc2V0ZGVmYXVsdGVuY29kaW5nKCd1dGY4JykNClNLSU5fVklFV19GT1JfTU9WSUVTPSI1MTUiDQphZGRvbkRpciA9IHBsdWdpbnRvb2xzLmdldF9ydW50aW1lX3BhdGgoKQ0KQWRkb25UaXRsZSA9ICJMaXZlIXQgVFYiDQpMSVNUPSJsaXN0Ig0KVEhVTUJOQUlMPSJ0aHVtYm5haWwiDQpNT1ZJRVM9Im1vdmllcyINClRWX1NIT1dTPSJ0dnNob3dzIg0KU0VBU09OUz0ic2Vhc29ucyINCkVQSVNPREVTPSJlcGlzb2RlcyINCk9USEVSPSJvdGhlciINCkFMTF9WSUVXX0NPREVTPXsNCiAgICAnbGlzdCc6IHsNCiAgICAgICAgJ3NraW4uY29uZmx1ZW5jZSc6IDUwLCAjIExpc3QNCiAgICAgICAgJ3NraW4uYWVvbi5ub3gnOiA1MCwgIyBMaXN0DQogICAgICAgICdza2luLmRyb2lkJzogNTAsICMgTGlzdA0KICAgICAgICAnc2tpbi5xdWFydHonOiA1MCwgIyBMaXN0DQogICAgICAgICdza2luLnJlLXRvdWNoZWQnOiA1MCwgIyBMaXN0DQogICAgfSwNCiAgICAndGh1bWJuYWlsJzogew0KICAgICAgICAnc2tpbi5jb25mbHVlbmNlJzogNTAwLCAjIFRodW1ibmFpbA0KICAgICAgICAnc2tpbi5hZW9uLm5veCc6IDUwMCwgIyBXYWxsDQogICAgICAgICdza2luLmRyb2lkJzogNTEsICMgQmlnIGljb25zDQogICAgICAgICdza2luLnF1YXJ0eic6IDUxLCAjIEJpZyBpY29ucw0KICAgICAgICAnc2tpbi5yZS10b3VjaGVkJzogNTAwLCAjVGh1bWJuYWlsDQogICAgfSwNCiAgICAnbW92aWVzJzogew0KICAgICAgICAnc2tpbi5jb25mbHVlbmNlJzogNTAwLCAjIFRodW1ibmFpbCA1MTUsICMgTWVkaWEgSW5mbyAzDQogICAgICAgICdza2luLmFlb24ubm94JzogNTAwLCAjIFdhbGwNCiAgICAgICAgJ3NraW4uZHJvaWQnOiA1MSwgIyBCaWcgaWNvbnMNCiAgICAgICAgJ3NraW4ucXVhcnR6JzogNTIsICMgTWVkaWEgaW5mbw0KICAgICAgICAnc2tpbi5yZS10b3VjaGVkJzogNTAwLCAjVGh1bWJuYWlsDQogICAgfSwNCiAgICAndHZzaG93cyc6IHsNCiAgICAgICAgJ3NraW4uY29uZmx1ZW5jZSc6IDUwMCwgIyBUaHVtYm5haWwgNTE1LCAjIE1lZGlhIEluZm8gMw0KICAgICAgICAnc2tpbi5hZW9uLm5veCc6IDUwMCwgIyBXYWxsDQogICAgICAgICdza2luLmRyb2lkJzogNTEsICMgQmlnIGljb25zDQogICAgICAgICdza2luLnF1YXJ0eic6IDUyLCAjIE1lZGlhIGluZm8NCiAgICAgICAgJ3NraW4ucmUtdG91Y2hlZCc6IDUwMCwgI1RodW1ibmFpbA0KICAgIH0sDQogICAgJ3NlYXNvbnMnOiB7DQogICAgICAgICdza2luLmNvbmZsdWVuY2UnOiA1MCwgIyBMaXN0DQogICAgICAgICdza2luLmFlb24ubm94JzogNTAsICMgTGlzdA0KICAgICAgICAnc2tpbi5kcm9pZCc6IDUwLCAjIExpc3QNCiAgICAgICAgJ3NraW4ucXVhcnR6JzogNTIsICMgTWVkaWEgaW5mbw0KICAgICAgICAnc2tpbi5yZS10b3VjaGVkJzogNTAsICMgTGlzdA0KICAgIH0sDQogICAgJ2VwaXNvZGVzJzogew0KICAgICAgICAnc2tpbi5jb25mbHVlbmNlJzogNTA0LCAjIE1lZGlhIEluZm8NCiAgICAgICAgJ3NraW4uYWVvbi5ub3gnOiA1MTgsICMgSW5mb3BhbmVsDQogICAgICAgICdza2luLmRyb2lkJzogNTAsICMgTGlzdA0KICAgICAgICAnc2tpbi5xdWFydHonOiA1MiwgIyBNZWRpYSBpbmZvDQogICAgICAgICdza2luLnJlLXRvdWNoZWQnOiA1NTAsICMgV2lkZQ0KICAgIH0sDQp9DQptb2RlID0gMzMzMw0KdmVyc2lvbiA9ICIiDQprYXN1dGFqYW5pbWkgPSAiIg0Kc2FsYXNvbmEgPSAiIg0KbGVoZWt5bGcgPSAiIg0KcG9yZGludW1iZXIgPSAiIg0KI3V1ZW5kdXNlZD1wbHVnaW50b29scy5nZXRfc2V0dGluZyhzeW5jX2RhdGEoImRYVmxibVIxYzJWayIpKQ0KdmFuZW1ha29vZCA9ICIiDQp2YW5lbWFsdWtrID0gIiINCnBuaW1pID0gIkxpdmUhdCINCkxPQURfTElWRSA9ICIiDQp0ZWxldmlzaW9vbmlsaW5rID0gIiINCmZpbG1pbGluayA9ICIiDQphbmRtZWxpbmsgPSAiIg0KDQpfX0FERE9OX0lEX18JPSB4Ym1jYWRkb24uQWRkb24oKS5nZXRBZGRvbkluZm8oImlkIikNCl9fQURET05fXwk9IHhibWNhZGRvbi5BZGRvbihfX0FERE9OX0lEX18pDQpfX0FERE9OVkVSU0lPTl9fID0gX19BRERPTl9fLmdldEFkZG9uSW5mbygndmVyc2lvbicpDQpfX0FERE9OX0ZPTERFUl9fCT0gX19BRERPTl9fLmdldEFkZG9uSW5mbygncGF0aCcpDQpfX1NFVFRJTkdfXwk9IHhibWNhZGRvbi5BZGRvbigpLmdldFNldHRpbmcNCl9fQVJUX0ZPTERFUl9fCT0gX19BRERPTl9GT0xERVJfXyArICcvcmVzb3VyY2VzL2ltZy8nDQpfX0ZBTkFSVF9fIAkJPSBvcy5wYXRoLmpvaW4oX19BRERPTl9GT0xERVJfXywnZmFuYXJ0LmpwZycpDQpfSUNPTl8gPSBfX0FERE9OX0ZPTERFUl9fICsgJy9pY29uLnBuZycNCl9fU0tJTl9fID0gJ3YyJw0KX19TSVRFX18gPSAnaHR0cDovL2xpdmVpdGtvZGkuY29tL1BIUC8nDQpfX1NJVEVBZGRvbl9fID0gJ2h0dHA6Ly9saXZlaXRrb2RpLmNvbS9BZGRvbi8nDQpfX0VQR19fID0gX19BRERPTl9fLmdldFNldHRpbmcoImxpc3RhX2VwZyIpDQpfX0ZPTERFUl9FUEdfXyA9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly91c2VyZGF0YS9hZGRvbl9kYXRhL3BsdWdpbi52aWRlby5MaXZlVFYvJykuZGVjb2RlKCd1dGYtOCcpLCAnZXBnbGl2ZWl0JykNCl9fQ09PS0lFX0ZJTEVfXyA9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly91c2VyZGF0YS9hZGRvbl9kYXRhL3BsdWdpbi52aWRlby5MaXZlVFYvJykuZGVjb2RlKCd1dGYtOCcpLCAnY29va2llLmxpdmVpdHR2JykNCl9fSEVBREVSU19fID0geydVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwLjExOyBydjo0My4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzQzLjAnLCAnQWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LCovKjtxPTAuOCd9DQpjaGVja19sb2dpbiA9IHt9DQpoZWFkZXJzID0geydVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChNYWNpbnRvc2g7IEludGVsIE1hYyBPUyBYIDEwLjExOyBydjo0My4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzQzLjAnLCAnQWNjZXB0LUNoYXJzZXQnOiAndXRmLTg7cT0wLjcsKjtxPTAuNycsICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9DQpfX1BBU1RBX0RBRE9TX18gPSBBZGRvbihfX0FERE9OX0lEX18pLmdldF9wcm9maWxlKCkuZGVjb2RlKCJ1dGYtOCIpDQpfX1BBU1RBX0ZJTE1FU19fID0geGJtYy50cmFuc2xhdGVQYXRoKF9fQURET05fXy5nZXRTZXR0aW5nKCdiaWJsaW90ZWNhRmlsbWVzJykpDQpfX1BBU1RBX1NFUklFU19fID0geGJtYy50cmFuc2xhdGVQYXRoKF9fQURET05fXy5nZXRTZXR0aW5nKCdiaWJsaW90ZWNhU2VyaWVzJykpDQpfX1NJVEVBUElfXyA9IGJhc2U2NC51cmxzYWZlX2I2NGRlY29kZSgnYUhSMGNEb3ZMMjF3WVhCcExtMXNMdz09JykNCl9fU0lURUZJTE1FU19fID0gYmFzZTY0LnVybHNhZmVfYjY0ZGVjb2RlKCdhSFIwY0RvdkwyMXdZWEJwTG0xc0wyRndhUzg9JykNCl9fU0lURUZJTE1FUzJfXyA9IGJhc2U2NC51cmxzYWZlX2I2NGRlY29kZSgnYUhSMGNEb3ZMMjF5Y0dseVlXTjVMbWR4THc9PScpDQoNCmFycmdydXBvcyA9IFtdDQphcnJsaW5rcyA9IFtdDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCSAgSW5pY2lhciBBZGRvbgkJCQkJCQkJCQkgICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmRlZiBfX0FMRVJUQV9fKHRleHQxPSIiLHRleHQyPSIiLHRleHQzPSIiKToNCglpZiB0ZXh0Mz09IiI6IHhibWNndWkuRGlhbG9nKCkub2sodGV4dDEsdGV4dDIpDQoJZWxpZiB0ZXh0Mj09IiI6IHhibWNndWkuRGlhbG9nKCkub2soIiIsdGV4dDEpDQoJZWxzZTogeGJtY2d1aS5EaWFsb2coKS5vayh0ZXh0MSx0ZXh0Mix0ZXh0MykNCg0KZGVmIG1lbnUoKToNCglpZiAobm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9uYW1lJykgb3Igbm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9wYXNzd29yZCcpKToNCgkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ1ByZWNpc2EgZGUgZGVmaW5pciBvIHNldSBVdGlsaXphZG9yIGUgU2VuaGEnKQ0KCQlhYnJpckRlZmluaW5jb2VzKCkNCgkJDQoJZWxzZToNCgkJY2hlY2tfbG9naW4gPSBsb2dpbigpDQoJCWRhdGFiYXNlID0gRGF0YWJhc2UuaXNFeGlzdHMoKQ0KCQlpZiBjaGVja19sb2dpblsndXNlciddWydub21lJ10gIT0gJyc6DQoJCQlpZiBjaGVja19sb2dpblsnc3VjZXNzbyddWydyZXN1bHRhZG8nXSA9PSAneWVzJzoNCgkJCQltZW51cyA9IHsNCgkJCQkJJ25vbWUnOiAnJywNCgkJCQkJJ2xvZ28nOiAnJywNCgkJCQkJJ2xpbmsnOiAnJywNCgkJCQkJJ3RpcG8nOiAnJywNCgkJCQkJJ3NlbmhhJzogJycNCgkJCQkJfQ0KCQkJCW1lbnVzMSA9IHsNCgkJCQkJJ25vbWUnOiAnJywNCgkJCQkJJ2xvZ28nOiAnJywNCgkJCQkJJ2xpbmsnOiAnJywNCgkJCQkJJ3RpcG8nOiAnJywNCgkJCQkJJ3NlbmhhJzogJycNCgkJCQkJfQ0KCQkJCW1lbnVzMyA9IHsNCgkJCQkJJ25vbWUnOiAnJywNCgkJCQkJJ2xvZ28nOiAnJywNCgkJCQkJJ2xpbmsnOiAnJywNCgkJCQkJJ3RpcG8nOiAnJywNCgkJCQkJJ3NlbmhhJzogJycNCgkJCQkJfQ0KCQkJCW1lbnVzNCA9IHsNCgkJCQkJJ25vbWUnOiAnJywNCgkJCQkJJ2xvZ28nOiAnJywNCgkJCQkJJ2xpbmsnOiAnJywNCgkJCQkJJ3RpcG8nOiAnJywNCgkJCQkJJ3NlbmhhJzogJycNCgkJCQkJfQ0KCQkJCW1lbnVzNSA9IHsNCgkJCQkJJ25vbWUnOiAnJywNCgkJCQkJJ2xvZ28nOiAnJywNCgkJCQkJJ2xpbmsnOiAnJywNCgkJCQkJJ3RpcG8nOiAnJywNCgkJCQkJJ3NlbmhhJzogJycNCgkJCQkJfQ0KCQkJCWlmIGNoZWNrX2xvZ2luWydkYXRhZmltJ11bJ2RhdGEnXSAhPSAiTWVtYnJvIEF0aXZvIFNlbSBEb2FjYW8hIjoNCgkJCQkJaWYgY2hlY2tfbG9naW5bJ3VzZXInXVsnZGlhcyddID09ICc1JyBvciBjaGVja19sb2dpblsndXNlciddWydkaWFzJ10gPT0gJzQnIG9yIGNoZWNrX2xvZ2luWyd1c2VyJ11bJ2RpYXMnXSA9PSAnMycgb3IgY2hlY2tfbG9naW5bJ3VzZXInXVsnZGlhcyddID09ICcyJyBvciBjaGVja19sb2dpblsndXNlciddWydkaWFzJ10gPT0gJzEnOg0KCQkJCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ0ZhbHRhbSAnK2NoZWNrX2xvZ2luWyd1c2VyJ11bJ2RpYXMnXSsnIGRpYXMgcGFyYSBvIHNlcnZpw6dvIGV4cGlyYXIuJykNCgkJCQkJaWYgY2hlY2tfbG9naW5bJ3VzZXInXVsnZGlhcyddID09ICcwJzoNCgkJCQkJCV9fQUxFUlRBX18oJ0xpdmUhdCBUVicsICfDiSBob2plIHF1ZSBvIHNldSBzZXJ2acOnbyBleHBpcmEuIEZhw6dhIGEgc3VhIFJlbm92YcOnw6NvLiBDYXNvIG7Do28gZmHDp2EgaXLDoSBmaWNhciBJbmFjdGl2byBIb2plLicpDQoJCQkJaWYgY2hlY2tfbG9naW5bJ2RhdGFmaW0nXVsnZGF0YSddICE9ICJNZW1icm8gQXRpdm8gU2VtIERvYWNhbyEiOg0KCQkJCQltZW51czIgPSB7DQoJCQkJCSdub21lJzogJycsDQoJCQkJCSdsb2dvJzogJycsDQoJCQkJCSdsaW5rJzogJycsDQoJCQkJCSd0aXBvJzogJycsDQoJCQkJCSdzZW5oYSc6ICcnDQoJCQkJCX0NCgkJCQkJX2xpc3RhdXNlciA9IGNoZWNrX2xvZ2luWyd1c2VyJ11bJ2xpc3RhJ10NCgkJCQkJYW5kbWVsaW5rID0gX2xpc3RhdXNlcisncGFuZWxfYXBpLnBocD91c2VybmFtZT0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikrJyZwYXNzd29yZD0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpDQoJCQkJCW1lbnVzMlsnbm9tZSddID0gIlZlciBJbmZvcm1hY2FvIGRhIENvbnRhIg0KCQkJCQltZW51czJbJ2xvZ28nXSA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvZXN0YWRvbWVtYnJvLnBuZyINCgkJCQkJbWVudXMyWydsaW5rJ10gPSBhbmRtZWxpbmsNCgkJCQkJbWVudXMyWyd0aXBvJ10gPSAiZXN0YWRvIg0KCQkJCQltZW51czJbJ3NlbmhhJ10gPSAiIg0KCQkJCQltZW51czJbJ2ZhbmFydCddID0gX19TSVRFQWRkb25fXysiSW1hZ2Vucy9lc3RhZG9fZmFuYXJ0LnBuZyINCgkJCQkJY2hlY2tfbG9naW5bJ21lbnVzJ10uYXBwZW5kKG1lbnVzMikNCgkJCQltZW51czFbJ25vbWUnXSA9ICJOb3ZpZGFkZXMiDQoJCQkJbWVudXMxWydsb2dvJ10gPSBjaGVja19sb2dpblsnaW5mbyddWydsb2dvMiddDQoJCQkJbWVudXMxWydsaW5rJ10gPSBjaGVja19sb2dpblsnaW5mbyddWydsaW5rMiddDQoJCQkJbWVudXMxWyd0aXBvJ10gPSAibm92aWRhZGVzIg0KCQkJCW1lbnVzMVsnc2VuaGEnXSA9ICIiDQoJCQkJbWVudXMxWydmYW5hcnQnXSA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvbm92aWRhZGVzX2ZhbmFydC5wbmciDQoJCQkJY2hlY2tfbG9naW5bJ21lbnVzJ10uYXBwZW5kKG1lbnVzMSkNCgkJCQltZW51czNbJ25vbWUnXSA9ICJQZXNxdWlzYSINCgkJCQltZW51czNbJ2xvZ28nXSA9IG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdwZXNxdWlzYS5wbmcnKQ0KCQkJCW1lbnVzM1snbGluayddID0gX19TSVRFRklMTUVTX18NCgkJCQltZW51czNbJ3RpcG8nXSA9ICJwZXNxdWlzYSINCgkJCQltZW51czNbJ3NlbmhhJ10gPSAiIg0KCQkJCW1lbnVzM1snZmFuYXJ0J10gPSBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJykNCgkJCQljaGVja19sb2dpblsnbWVudXMnXS5hcHBlbmQobWVudXMzKQ0KCQkJCW1lbnVzNFsnbm9tZSddID0gIkxpbXBhciBDYWNoZSINCgkJCQltZW51czRbJ2xvZ28nXSA9IF9fU0lURUFkZG9uX18rIkltYWdlbnMvZXN0YWRvbWVtYnJvLnBuZyINCgkJCQltZW51czRbJ2xpbmsnXSA9ICdhZHNmc2Rmc2QnDQoJCQkJbWVudXM0Wyd0aXBvJ10gPSAibGltcGFyY2FjaGUiDQoJCQkJbWVudXM0WydzZW5oYSddID0gIiINCgkJCQltZW51czRbJ2ZhbmFydCddID0gX19TSVRFQWRkb25fXysiSW1hZ2Vucy9lc3RhZG9fZmFuYXJ0LnBuZyINCgkJCQljaGVja19sb2dpblsnbWVudXMnXS5hcHBlbmQobWVudXM0KQ0KCQkJCW1lbnVzNVsnbm9tZSddID0gIkxpbXBhciBUdWRvIEdyYXZhZG8iDQoJCQkJbWVudXM1Wydsb2dvJ10gPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2VzdGFkb21lbWJyby5wbmciDQoJCQkJbWVudXM1WydsaW5rJ10gPSAnc2Rmc2Rmc2QnDQoJCQkJbWVudXM1Wyd0aXBvJ10gPSAibGltcGFydHVkbyINCgkJCQltZW51czVbJ3NlbmhhJ10gPSAiIg0KCQkJCW1lbnVzNVsnZmFuYXJ0J10gPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2VzdGFkb19mYW5hcnQucG5nIg0KCQkJCWNoZWNrX2xvZ2luWydtZW51cyddLmFwcGVuZChtZW51czUpDQoJCQkJTWVudV9pbmljaWFsKGNoZWNrX2xvZ2luLEZhbHNlLCcnKQ0KCQkJZWxpZiBjaGVja19sb2dpblsnc3VjZXNzbyddWydyZXN1bHRhZG8nXSA9PSAndXRpbGl6YWRvcic6DQoJCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ1V0aWxpemFkb3IgaW5jb3JyZXRvLicpDQoJCQkJYWRkRGlyKCdBbHRlcmFyIERlZmluacOnw7VlcycsICd1cmwnLCBOb25lLCAxMDAwLCAnTWluaWF0dXJhJywgX19TSVRFQWRkb25fXysiSW1hZ2Vucy9kZWZpbmljb2VzLnBuZyIsJycsJycsJycsJycsX19TSVRFQWRkb25fXysiSW1hZ2Vucy9kZWZpbmljb2VzX2ZhbmFydC5wbmciKQ0KCQkJCWFkZERpcignRW50cmFyIG5vdmFtZW50ZScsICd1cmwnLCBOb25lLCBOb25lLCAnTWluaWF0dXJhJywgX19TSVRFQWRkb25fXysiSW1hZ2Vucy9yZXRyb2NlZGVyLnBuZyIsJycsJycsJycsJycsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Z1bmRvX2FkZG9uLnBuZycpKQ0KCQkJCXZpc3RhX21lbnUoKQ0KCQkJZWxpZiBjaGVja19sb2dpblsnc3VjZXNzbyddWydyZXN1bHRhZG8nXSA9PSAnc2VuaGEnOg0KCQkJCV9fQUxFUlRBX18oJ0xpdmUhdCBUVicsICdTZW5oYSBpbmNvcnJldGEuJykNCgkJCQlhZGREaXIoJ0FsdGVyYXIgRGVmaW5pw6fDtWVzJywgJ3VybCcsIE5vbmUsIDEwMDAsICdNaW5pYXR1cmEnLCBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXMucG5nIiwnJywnJywnJywnJyxfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXNfZmFuYXJ0LnBuZyIpDQoJCQkJYWRkRGlyKCdFbnRyYXIgbm92YW1lbnRlJywgJ3VybCcsIE5vbmUsIE5vbmUsICdNaW5pYXR1cmEnLCBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL3JldHJvY2VkZXIucG5nIiwnJywnJywnJywnJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJykpDQoJCQkJdmlzdGFfbWVudSgpDQoJCQllbGlmIGNoZWNrX2xvZ2luWydzdWNlc3NvJ11bJ3Jlc3VsdGFkbyddID09ICdhdGl2byc6DQoJCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ08gZXN0YWRvIGRvIHNldSBVdGlsaXphZG9yIGVuY29udHJhLXNlIEluYWN0aXZvLiBQYXJhIHNhYmVyIG1haXMgaW5mb3JtYcOnw7VlcyBlbnRyZSBlbSBjb250YWN0byBwZWxvIGVtYWlsIGxpdmVpdGtvZGlAZ21haWwuY29tLicpDQoJCQkJdmlzdGFfbWVudSgpDQoJCQllbHNlOg0KCQkJCV9fQUxFUlRBX18oJ0xpdmUhdCBUVicsICdOw6NvIGZvaSBwb3Nzw612ZWwgYWJyaXIgYSBww6FnaW5hLiBQb3IgZmF2b3IgdGVudGUgbm92YW1lbnRlLicpDQoJCQkJdmlzdGFfbWVudSgpDQoJCWVsc2U6DQoJCQlhZGREaXIoJ0FsdGVyYXIgRGVmaW5pw6fDtWVzJywgJ3VybCcsIE5vbmUsIDEwMDAsICdNaW5pYXR1cmEnLCBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXMucG5nIiwnJywnJywnJywnJyxfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXNfZmFuYXJ0LnBuZyIpDQoJCQlhZGREaXIoJ0VudHJhciBub3ZhbWVudGUnLCAndXJsJywgTm9uZSwgTm9uZSwgJ01pbmlhdHVyYScsIF9fU0lURUFkZG9uX18rIkltYWdlbnMvcmV0cm9jZWRlci5wbmciLCcnLCcnLCcnLCcnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKSkNCgkJCXZpc3RhX21lbnUoKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIwkJCQkJCQkgIExvZ2luIEFkZG9uCQkJCQkJCQkJCSAgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmRlZiBtaW5oYUNvbnRhKGRhdGFfdXNlcixlc3RpbG8pOg0KCWFkZERpcihkYXRhX3VzZXIsICd1cmwnLCBOb25lLCBOb25lLCBlc3RpbG8sIF9fU0lURUFkZG9uX18rIkltYWdlbnMvZXN0YWRvbWVtYnJvLnBuZyIsJycsJycsJycsJycsX19TSVRFQWRkb25fXysiSW1hZ2Vucy9lc3RhZG9fZmFuYXJ0LnBuZyIpDQoJYWRkRGlyKCdEZWZpbmnDp8O1ZXMnLCAndXJsJywgTm9uZSwgMTAwMCwgZXN0aWxvLCBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXMucG5nIiwnJywnJywnJywnJyxfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL2RlZmluaWNvZXNfZmFuYXJ0LnBuZyIpDQoJdmlzdGFfbWVudSgpDQoNCmRlZiBsb2dpbigpOg0KCWluZm9ybWFjb2VzID0gew0KCQkndXNlcicgOiB7DQoJCQknbm9tZSc6ICcnLA0KCQkJJ25vbWUnOiAnJywNCgkJCSdlbWFpbCc6ICcnLA0KCQkJJ3RpcG8nOiAnJywNCgkJCSdkaWFzJzogJycsDQoJCQknbGlzdGEnOiAnJywNCgkJCSdsaXN0YW5vdmEnOiAnJywNCgkJCSdzZXJ2aWRvcic6ICcnLA0KCQkJJ3NlbmhhYWR1bHRvJzogJycNCgkJfSwNCgkJJ3N1Y2Vzc28nIDp7DQoJCQkncmVzdWx0YWRvJzogJycNCgkJfSwNCgkJJ21hYycgOnsNCgkJCSd0ZW0nOiAnJw0KCQl9LA0KCQknbWFjZXN0YWRvJyA6ew0KCQkJJ21hYyc6ICcnDQoJCX0sDQoJCSdkYXRhZmltJyA6ew0KCQkJJ2RhdGEnOiAnJw0KCQl9LA0KCQknaW5mbycgOiB7DQoJCQknZXBnJzogJycsDQoJCQknbG9nbyc6ICcnLA0KCQkJJ2xvZ28yJzogJycsDQoJCQknbG9nJzogJycsDQoJCQkndXNlcic6ICcnLA0KCQkJJ3Bhc3N3b3JkJzogJycsDQoJCQknbGluazInOiAnJywNCgkJCSdsaW5rJzogJycNCgkJfSwNCgkJJ21lbnVzJzogW10NCgl9ICMgDQoJDQoJdHJ5Og0KCQluZXQgPSBOZXQoKQ0KCQluZXQuc2V0X2Nvb2tpZXMoX19DT09LSUVfRklMRV9fKQ0KCQlkYWRvcyA9IHsndXNlcm5hbWUnOiBfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fbmFtZSIpLCAncGFzc3dvcmQnOiBfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKX0NCgkJDQoJCWNvZGlnb19mb250ZSA9IG5ldC5odHRwX1BPU1QoX19TSVRFX18rJ0xvZ2luQWRkb24yLnBocCcsZm9ybV9kYXRhPWRhZG9zLGhlYWRlcnM9X19IRUFERVJTX18pLmNvbnRlbnQNCgkJZWxlbXMgPSBFVC5mcm9tc3RyaW5nKGNvZGlnb19mb250ZSkNCgkJZm9yIGNoaWxkIGluIGVsZW1zOg0KCQkJaWYoY2hpbGQudGFnID09ICdzdWNlc3NvJyk6DQoJCQkJaW5mb3JtYWNvZXNbJ3N1Y2Vzc28nXVsncmVzdWx0YWRvJ10gPSBjaGlsZC50ZXh0DQoJCQllbGlmKGNoaWxkLnRhZyA9PSAndXNlcicpOg0KCQkJCWZvciBkIGluIGNoaWxkOg0KCQkJCQlpZihkLnRhZyA9PSAnTm9tZScpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ3VzZXInXVsnbm9tZSddID0gZC50ZXh0DQoJCQkJCWVsaWYoZC50YWcgPT0gJ0VtYWlsJyk6DQoJCQkJCQlpbmZvcm1hY29lc1sndXNlciddWydlbWFpbCddID0gZC50ZXh0DQoJCQkJCWVsaWYoZC50YWcgPT0gJ1NlcnZpZG9yJyk6DQoJCQkJCQlpbmZvcm1hY29lc1sndXNlciddWydzZXJ2aWRvciddID0gZC50ZXh0DQoJCQkJCWVsaWYoZC50YWcgPT0gJ1RpcG8nKToNCgkJCQkJCWluZm9ybWFjb2VzWyd1c2VyJ11bJ3RpcG8nXSA9IGQudGV4dA0KCQkJCQllbGlmKGQudGFnID09ICdkaWFzJyk6DQoJCQkJCQlpbmZvcm1hY29lc1sndXNlciddWydkaWFzJ10gPSBkLnRleHQNCgkJCQkJZWxpZihkLnRhZyA9PSAnTGlzdGEnKToNCgkJCQkJCWluZm9ybWFjb2VzWyd1c2VyJ11bJ2xpc3RhJ10gPSBkLnRleHQNCgkJCQkJZWxpZihkLnRhZyA9PSAnTGlzdGFOb3ZhJyk6DQoJCQkJCQlpbmZvcm1hY29lc1sndXNlciddWydsaXN0YW5vdmEnXSA9IGQudGV4dA0KCQkJCQllbGlmKGQudGFnID09ICdEYXRhRmltJyk6DQoJCQkJCQl0cnk6DQoJCQkJCQkJaW5mb3JtYWNvZXNbJ2RhdGFmaW0nXVsnZGF0YSddID0gIk1lbWJybyBBdGl2byBhdMOpICIrIGQudGV4dA0KCQkJCQkJZXhjZXB0Og0KCQkJCQkJCWluZm9ybWFjb2VzWydkYXRhZmltJ11bJ2RhdGEnXSA9ICJNZW1icm8gQXRpdm8gU2VtIERvYWNhbyEiDQoJCQkJCWVsaWYoZC50YWcgPT0gJ1NlbmhhQWR1bHRvcycpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ3VzZXInXVsnc2VuaGFhZHVsdG8nXSA9IGQudGV4dAkJDQoJCQllbGlmKGNoaWxkLnRhZyA9PSAnaW5mbycpOg0KCQkJCWZvciBlIGluIGNoaWxkOg0KCQkJCQlpZihlLnRhZyA9PSAnZXBnJyk6DQoJCQkJCQlpbmZvcm1hY29lc1snaW5mbyddWydlcGcnXSA9IGUudGV4dA0KCQkJCQllbGlmKGUudGFnID09ICdsb2dvJyk6DQoJCQkJCQlpbmZvcm1hY29lc1snaW5mbyddWydsb2dvJ10gPSBlLnRleHQNCgkJCQkJZWxpZihlLnRhZyA9PSAnbGluaycpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ2luZm8nXVsnbGluayddID0gZS50ZXh0DQoJCQkJCWVsaWYoZS50YWcgPT0gJ2xvZ28yJyk6DQoJCQkJCQlpbmZvcm1hY29lc1snaW5mbyddWydsb2dvMiddID0gZS50ZXh0DQoJCQkJCWVsaWYoZS50YWcgPT0gJ2xpbmsyJyk6DQoJCQkJCQlpbmZvcm1hY29lc1snaW5mbyddWydsaW5rMiddID0gZS50ZXh0DQoJCQkJCWVsaWYoZS50YWcgPT0gJ2xvZycpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ2luZm8nXVsnbG9nJ10gPSBlLnRleHQNCgkJCQkJZWxpZihlLnRhZyA9PSAndXNlcicpOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ2luZm8nXVsndXNlciddID0gZS50ZXh0DQoJCQkJCWVsaWYoZS50YWcgPT0gJ3Bhc3N3b3JkJyk6DQoJCQkJCQlpbmZvcm1hY29lc1snaW5mbyddWydwYXNzd29yZCddID0gZS50ZXh0DQoJCQllbGlmKGNoaWxkLnRhZyA9PSAnbWVudXMnKToNCgkJCQltZW51ID0gew0KCQkJCQkJJ25vbWUnOiAnJywNCgkJCQkJCSdsb2dvJzogJycsDQoJCQkJCQknbGluayc6ICcnLA0KCQkJCQkJJ3RpcG8nOiAnJywNCgkJCQkJCSdzZW5oYSc6ICcnLA0KCQkJCQkJJ2ZhbmFydCc6ICcnDQoJCQkJCX0NCgkJCQlmb3IgZyBpbiBjaGlsZDoNCgkJCQkJaWYoZy50YWcgPT0gJ25vbWUnKToNCgkJCQkJCW1lbnVbJ25vbWUnXSA9IGcudGV4dAkNCgkJCQkJZWxpZihnLnRhZyA9PSAnbG9nbycpOg0KCQkJCQkJbWVudVsnbG9nbyddID0gZy50ZXh0DQoJCQkJCWVsaWYoZy50YWcgPT0gJ2xpbmsnKToNCgkJCQkJCW1lbnVbJ2xpbmsnXSA9IGcudGV4dA0KCQkJCQllbGlmKGcudGFnID09ICd0aXBvJyk6DQoJCQkJCQltZW51Wyd0aXBvJ10gPSBnLnRleHQJDQoJCQkJCWVsaWYoZy50YWcgPT0gJ2ZhbmFydCcpOg0KCQkJCQkJbWVudVsnZmFuYXJ0J10gPSBnLnRleHQNCgkJCQkJZWxpZihnLnRhZyA9PSAnc2VuaGEnKToNCgkJCQkJCW1lbnVbJ3NlbmhhJ10gPSBpbmZvcm1hY29lc1sndXNlciddWydzZW5oYWFkdWx0byddDQoJCQkJaWYgaW5mb3JtYWNvZXNbJ2RhdGFmaW0nXVsnZGF0YSddID09ICJNZW1icm8gQXRpdm8gU2VtIERvYWNhbyEiOg0KCQkJCQlpZiBtZW51Wydub21lJ10gIT0gJ0FkdWx0b3MnIGFuZCBtZW51Wydub21lJ10gIT0gJ1RWIEFyY2hpdmUnOg0KCQkJCQkJaW5mb3JtYWNvZXNbJ21lbnVzJ10uYXBwZW5kKG1lbnUpDQoJCQkJZWxzZToNCgkJCQkJaWYgbWVudVsnbm9tZSddID09ICdUViBBcmNoaXZlJzoNCgkJCQkJCW1lbnVbJ25vbWUnXSA9IG1lbnVbJ25vbWUnXSsiIChWZXIgbyBxdWUgcGFzc291KSINCgkJCQkJCW1lbnVbJ3RpcG8nXSA9ICJ0dmFyY2hpdmUiDQoJCQkJCQkNCgkJCQkJaW5mb3JtYWNvZXNbJ21lbnVzJ10uYXBwZW5kKG1lbnUpCQkNCgkJCWVsc2U6DQoJCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ07Do28gc2VpIG8gcXVlIGVzdG91IGEgbGVyLicpDQoJZXhjZXB0Og0KCQlfX0FMRVJUQV9fKCdMaXZlIXQgVFYnLCAnTsOjbyBmb2kgcG9zc8OtdmVsIGFicmlyIGEgcMOhZ2luYS4gUG9yIGZhdm9yIHRlbnRlIG5vdmFtZW50ZS4nKQ0KCQlyZXR1cm4gaW5mb3JtYWNvZXMNCg0KCXJldHVybiBpbmZvcm1hY29lcw0KDQpkZWYgbG9naW4yKCk6DQoJcmVzdWx0YWRvID0gRmFsc2UNCgl0cnk6DQoJCXBvc3QgPSB7J3VzZXJuYW1lJzogX19BRERPTl9fLmdldFNldHRpbmcoJ2VtYWlsJyksICdwYXNzd29yZCc6IF9fQURET05fXy5nZXRTZXR0aW5nKCdwYXNzd29yZCcpLCdncmFudF90eXBlJzogJ3Bhc3N3b3JkJywgJ2NsaWVudF9pZCc6ICdrb2RpJywgJ2NsaWVudF9zZWNyZXQnOidweVJtbUtLM2Niam91b0RNTFhOdHQyZUdreVRUQUcnIH0NCgkJDQoJCXJlc3VsdGFkbyA9IGFicmlyX3VybChfX1NJVEVGSUxNRVNfXysnbG9naW4nLCBwb3N0PWpzb24uZHVtcHMocG9zdCksIGhlYWRlcj1oZWFkZXJzKQ0KCQkNCgkJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCQlyZXR1cm4gRmFsc2UNCgkJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJCSNjb2xvY2FyIG8gbG9nZ2VkaW4NCgkJdG9rZW4gPSByZXN1bHRhZG9bJ2FjY2Vzc190b2tlbiddDQoJCXJlZnJlc2ggPSByZXN1bHRhZG9bJ3JlZnJlc2hfdG9rZW4nXQ0KCQloZWFkZXJzTiA9IGhlYWRlcnMNCgkJaGVhZGVyc05bJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJXMnICUgdG9rZW4NCgkJDQoJCXJlc3VsdGFkbyA9IGFicmlyX3VybChfX1NJVEVGSUxNRVNfXysnbWUnLCBoZWFkZXI9aGVhZGVyc04pDQoJCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCQl0cnk6DQoJCQl1c2VybmFtZSA9IHJlc3VsdGFkb1sndXNlcm5hbWUnXS5kZWNvZGUoJ3V0Zi04JykNCgkJZXhjZXB0Og0KCQkJdXNlcm5hbWUgPSByZXN1bHRhZG9bJ3VzZXJuYW1lJ10uZW5jb2RlKCd1dGYtOCcpDQoJCQ0KCQlpZiByZXN1bHRhZG9bJ2VtYWlsJ10gPT0gX19BRERPTl9fLmdldFNldHRpbmcoJ2VtYWlsJyk6DQoJCQlfX0FERE9OX18uc2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScsIHRva2VuKQ0KCQkJX19BRERPTl9fLnNldFNldHRpbmcoJ3JlZnJlc2hNcnBpcmFjeScsIHJlZnJlc2gpDQoJCQlfX0FERE9OX18uc2V0U2V0dGluZygnbG9nZ2VkaW4nLCB1c2VybmFtZSkNCgkJCXJldHVybiBUcnVlDQoJZXhjZXB0Og0KCQlfX0FMRVJUQV9fKCdMaXZlIXQgVFYnLCAnTsOjbyBmb2kgcG9zc8OtdmVsIGFicmlyIGEgcMOhZ2luYS4gUG9yIGZhdm9yIHRlbnRlIG5vdmFtZW50ZS4nKQ0KCQlyZXR1cm4gRmFsc2UNCg0KZGVmIG1pbmhhQ29udGFidWlsZCgpOg0KCWlmIChub3QgX19BRERPTl9fLmdldFNldHRpbmcoJ2xvZ2luX25hbWUnKSBvciBub3QgX19BRERPTl9fLmdldFNldHRpbmcoJ2xvZ2luX3Bhc3N3b3JkJykpOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQgVFYnLCAnUHJlY2lzYSBkZSBkZWZpbmlyIG8gc2V1IFV0aWxpemFkb3IgZSBTZW5oYScpDQoJCWFicmlyRGVmaW5pbmNvZXNNZXNtbygpDQoJZWxzZToNCgkJY2hlY2tfbG9naW4gPSBsb2dpbigpDQoJCWlmIGNoZWNrX2xvZ2luWydkYXRhZmltJ11bJ2RhdGEnXSA9PSAnJzoNCgkJCWFicmlyRGVmaW5pbmNvZXNNZXNtbygpDQoJCWVsc2U6DQoJCQlfbGlzdGF1c2VyID0gY2hlY2tfbG9naW5bJ3VzZXInXVsnbGlzdGEnXQ0KCQkJYW5kbWVsaW5rID0gX2xpc3RhdXNlcisncGFuZWxfYXBpLnBocD91c2VybmFtZT0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikrJyZwYXNzd29yZD0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpDQoJCQlleGVjdXRlX2FpbmZvKGFuZG1lbGluaykNCg0KZGVmIGxvZ2luUGVzcXVpc2EoKToNCglpZiAobm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9uYW1lJykgb3Igbm90IF9fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9wYXNzd29yZCcpKToNCgkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ1ByZWNpc2EgZGUgZGVmaW5pciBvIHNldSBVdGlsaXphZG9yIGUgU2VuaGEnKQ0KCQlhYnJpckRlZmluaW5jb2VzTWVzbW8oKQ0KCWVsc2U6DQoJCWNoZWNrX2xvZ2luID0gbG9naW4oKQ0KCQlpZiBjaGVja19sb2dpblsnZGF0YWZpbSddWydkYXRhJ10gPT0gJyc6DQoJCQlhYnJpckRlZmluaW5jb2VzTWVzbW8oKQ0KCQllbHNlOg0KCQkJX3RpcG91c2VyID0gY2hlY2tfbG9naW5bJ3VzZXInXVsndGlwbyddDQoJCQlfc2VydnVzZXIgPSBjaGVja19sb2dpblsndXNlciddWydzZXJ2aWRvciddDQoJCQlfbm9tZXVzZXIgPSBjaGVja19sb2dpblsndXNlciddWydub21lJ10NCgkJCXBlc3F1aXNhKCcnLF9zZXJ2dXNlcikNCg0KZGVmIGJ1aWxkTGl2ZWl0KHRpcG9sb2dpYSk6DQoJaWYgKG5vdCBfX0FERE9OX18uZ2V0U2V0dGluZygnbG9naW5fbmFtZScpIG9yIG5vdCBfX0FERE9OX18uZ2V0U2V0dGluZygnbG9naW5fcGFzc3dvcmQnKSk6DQoJCV9fQUxFUlRBX18oJ0xpdmUhdCBUVicsICdQcmVjaXNhIGRlIGRlZmluaXIgbyBzZXUgVXRpbGl6YWRvciBlIFNlbmhhJykNCgkJYWJyaXJEZWZpbmluY29lc01lc21vKCkNCgllbHNlOg0KCQlpZih0aXBvbG9naWEgPT0gJ0ZpbG1lc0xpdmUnKSBvciAodGlwb2xvZ2lhID09ICdTZXJpZXNMaXZlJykgb3IgKHRpcG9sb2dpYSA9PSAnQW5pbWVzTGl2ZScpOg0KCQkJY2hlY2tfbG9naW4gPSBsb2dpbjIoKQ0KCQkJaWYgY2hlY2tfbG9naW4gPT0gVHJ1ZToNCgkJCQljaGVja19sb2dpbjIgPSBsb2dpbigpDQoJCQkJaWYodGlwb2xvZ2lhID09ICdGaWxtZXNMaXZlJyk6DQoJCQkJCV9saXN0YXVzZXIgPSBjaGVja19sb2dpbjJbJ3VzZXInXVsnbGlzdGEnXQ0KCQkJCQlpZiB0aXBvX3VzZXIgIT0gJ1Rlc3RlJzoNCgkJCQkJCWZpbG1pbGluayA9IF9saXN0YXVzZXIrJ2VuaWdtYTIucGhwP3VzZXJuYW1lPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSsnJnBhc3N3b3JkPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX3Bhc3N3b3JkIikrJyZ0eXBlPWdldF92b2RfY2F0ZWdvcmllcycNCgkJCQkJCWFkZERpcignRmlsbWVzIGRhIExpc3RhJyxmaWxtaWxpbmssTm9uZSwzMzM3LCdNaW5pYXR1cmEnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmaWxtZXMucG5nJyksJycsJycsJycsJycsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Z1bmRvX2FkZG9uLnBuZycpKQ0KCQkJCQltZW51RmlsbWVzKG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmaWxtZXMucG5nJyksX19TSVRFQWRkb25fXysnSW1hZ2Vucy9maWxtZXNfZmFuYXJ0LnBuZycpDQoJCQkJZWxpZih0aXBvbG9naWEgPT0gJ1Nlcmllc0xpdmUnKToNCgkJCQkJbWVudVNlcmllcyhvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnc2VyaWVzLnBuZycpLF9fU0lURUFkZG9uX18rJ0ltYWdlbnMvc2VyaWVzX2ZhbmFydC5wbmcnKQ0KCQkJCWVsaWYodGlwb2xvZ2lhID09ICdBbmltZXNMaXZlJyk6DQoJCQkJCW1lbnVBbmltZXMob3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2FuaW1lcy5wbmcnKSxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL3Nlcmllc19mYW5hcnQucG5nJykNCgkJZWxzZToNCgkJCWNoZWNrX2xvZ2luID0gbG9naW4oKQ0KCQkJaWYgY2hlY2tfbG9naW5bJ3VzZXInXVsnbm9tZSddICE9ICcnOg0KCQkJCWlmIGNoZWNrX2xvZ2luWydzdWNlc3NvJ11bJ3Jlc3VsdGFkbyddID09ICd5ZXMnOg0KCQkJCQlNZW51X2luaWNpYWwoY2hlY2tfbG9naW4sVHJ1ZSx0aXBvbG9naWEpDQoJCQkJZWxpZiBjaGVja19sb2dpblsnc3VjZXNzbyddWydyZXN1bHRhZG8nXSA9PSAndXRpbGl6YWRvcic6DQoJCQkJCV9fQUxFUlRBX18oJ0xpdmUhdCBUVicsICdVdGlsaXphZG9yIGluY29ycmV0by4nKQ0KCQkJCWVsaWYgY2hlY2tfbG9naW5bJ3N1Y2Vzc28nXVsncmVzdWx0YWRvJ10gPT0gJ3NlbmhhJzoNCgkJCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ1NlbmhhIGluY29ycmV0YS4nKQ0KCQkJCWVsaWYgY2hlY2tfbG9naW5bJ3N1Y2Vzc28nXVsncmVzdWx0YWRvJ10gPT0gJ2F0aXZvJzoNCgkJCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ08gZXN0YWRvIGRvIHNldSBVdGlsaXphZG9yIGVuY29udHJhLXNlIEluYWN0aXZvLiBQYXJhIHNhYmVyIG1haXMgaW5mb3JtYcOnw7VlcyBlbnRyZSBlbSBjb250YWN0byBwZWxvIGVtYWlsIGxpdmVpdGtvZGlAZ21haWwuY29tJykNCgkJCQllbHNlOg0KCQkJCQlfX0FMRVJUQV9fKCdMaXZlIXQgVFYnLCAnTsOjbyBmb2kgcG9zc8OtdmVsIGFicmlyIGEgcMOhZ2luYS4gUG9yIGZhdm9yIHRlbnRlIG5vdmFtZW50ZS4nKQ0KCQkJZWxzZToNCgkJCQlfX0FMRVJUQV9fKCdMaXZlIXQgVFYnLCAnTsOjbyBmb2kgcG9zc8OtdmVsIGFicmlyIGEgcMOhZ2luYS4gUG9yIGZhdm9yIHRlbnRlIG5vdmFtZW50ZS4nKQ0KDQpkZWYgTWVudV9pbmljaWFsKG1lbixidWlsZCx0aXBvKToNCglfdGlwb3VzZXIgPSBtZW5bJ3VzZXInXVsndGlwbyddDQoJX3NlcnZ1c2VyID0gbWVuWyd1c2VyJ11bJ3NlcnZpZG9yJ10NCglfbm9tZXVzZXIgPSBtZW5bJ3VzZXInXVsnbm9tZSddDQoJX2xpc3RhdXNlciA9IG1lblsndXNlciddWydsaXN0YSddDQoJX2xpc3RhdXNlcm5vdmEgPSBtZW5bJ3VzZXInXVsnbGlzdGFub3ZhJ10NCglfZGF0YXVzZXIgPSBtZW5bJ2RhdGFmaW0nXVsnZGF0YSddDQoJDQoJX3NlbmhhYWR1bHRvcyA9IF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9hZHVsdG9zIikNCglfZmFuYXJ0ID0gJycNCgkNCgl0aXBvc2VsZWN0ID0gJycNCglvcGNhb3NlbGVjID0gX19BRERPTl9fLmdldFNldHRpbmcoImxpc3RhX20zdSIpDQoJaWYgb3BjYW9zZWxlYyA9PSAnMCc6IHRpcG9zZWxlY3QgPSAnbTN1OCcNCgllbGlmIG9wY2Fvc2VsZWMgPT0gJzEnOiB0aXBvc2VsZWN0ID0gJ3RzJw0KCWVsaWYgb3BjYW9zZWxlYyA9PSAnMic6IHRpcG9zZWxlY3QgPSAncnRtcCcNCgkNCglwYXNzYW5vdm8gPSBUcnVlDQoJaWYgX3RpcG91c2VyID09ICdUZXN0ZScgYW5kIF9zZXJ2dXNlciA9PSAnVGVzdGUnOg0KCQlwYXNzYW5vdm8gPSBGYWxzZQ0KCQ0KCWlmIGJ1aWxkID09IFRydWUgYW5kIHBhc3Nhbm92byA9PSBGYWxzZToNCgkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ8OJIHVtIHV0aWxpemFkb3IgRnJlZSBsb2dvIG7Do28gdGVtIGFjZXNzbyDDoSBub3NzYSBidWlsZCBhIGZ1bmNpb25hci4nKQ0KCWVsaWYoYnVpbGQgPT0gVHJ1ZSk6DQoJCXRpcG9jYW4gPSAnJw0KCQl1cmxidWlsZCA9ICcnDQoJCW5vbWVidWlsZCA9ICcnDQoJCXNlbmhhYWR1ID0gbWVuWyd1c2VyJ11bJ3NlbmhhYWR1bHRvJ10NCgkJaWYgdGlwbyA9PSAnUHJhaWEnOg0KCQkJdXJsYnVpbGQgPSBfX1NJVEVBZGRvbl9fKyJGaWNoZWlyb3MvcHJhaWFzYWRkb25nci50eHQiDQoJCQlfZmFuYXJ0ID0gX19TSVRFQWRkb25fXysiSW1hZ2Vucy9ub3ZpZGFkZXNfZmFuYXJ0LnBuZyINCgkJCXRpcG9jYW4gPSAnUHJhaWEnDQoJCQlub21lYnVpbGQgPSAnUHJhaWEnDQoJCWlmIHRpcG8gPT0gJ1Byb2dyYW1hc1RWJzoNCgkJCXVybGJ1aWxkID0gX19TSVRFQWRkb25fXysiRmljaGVpcm9zL3Byb3RlbGVhZGRvbmdyLnR4dCINCgkJCV9mYW5hcnQgPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL25vdmlkYWRlc19mYW5hcnQucG5nIg0KCQkJdGlwb2NhbiA9ICdQcm9ncmFtYXNUVicNCgkJCW5vbWVidWlsZCA9ICdQcm9ncmFtYXNUVicNCgkJI2lmIF9zZXJ2dXNlciA9PSAnVGVzdGUnOg0KCQkjCXVybGJ1aWxkID0gX19TSVRFQWRkb25fXysiRmljaGVpcm9zL3ByYWlhc2FkZG9uZ3IudHh0Ig0KCQkjZWxpZihfc2VydnVzZXIgPT0gJ1NlcnZpZG9yMScpOg0KCQkjCXVybGJ1aWxkID0gX19TSVRFQWRkb25fXysiRmljaGVpcm9zL2NhbmFpc2FkZG9uc2Vydmlkb3IxLnR4dCINCgkJaWYodGlwbyA9PSAnQ2FuYWwnKToNCgkJCXRpcG9jYW4gPSAnTm9ybWFsJw0KCQkJbm9tZWJ1aWxkID0gJ0NhbmFpcyBQVCcNCgkJCV9mYW5hcnQgPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL3R2X2ZhbmFydC5wbmciDQoJCWVsaWYodGlwbyA9PSAnTm92aWRhZGVzJyk6DQoJCQl0aXBvY2FuID0gJ25vdmlkYWRlcycNCgkJCW5vbWVidWlsZCA9ICdOb3ZpZGFkZXMnDQoJCQlfZmFuYXJ0ID0gX19TSVRFQWRkb25fXysiSW1hZ2Vucy9ub3ZpZGFkZXN0di5wbmciDQoJCQl1cmxidWlsZCA9IF9fU0lURUFkZG9uX18rIkZpY2hlaXJvcy9ub3ZpZGFkZXNfZmFuYXJ0LnR4dCINCgkJZWxpZih0aXBvID09ICdQYXRyb2NpbmFkb3JlcycpOg0KCQkJdGlwb2NhbiA9ICdwYXRyb2NpbmFkb3JlcycNCgkJCW5vbWVidWlsZCA9ICdQYXRyb2NpbmFkb3JlcycNCgkJCV9mYW5hcnQgPSBfX1NJVEVBZGRvbl9fKyJJbWFnZW5zL3BhcnRpY2lwYS5qcGciDQoJCQl1cmxidWlsZCA9IF9fU0lURUFkZG9uX18rIkZpY2hlaXJvcy9wYXRyb2NpbmFkb3Jlcy50eHQiDQoJCQ0KCQlpZih0aXBvID09ICdOb3ZpZGFkZXMnKSBvciAodGlwbyA9PSAnUGF0cm9jaW5hZG9yZXMnKToNCgkJCWxpc3Rhcl9ncnVwb3MoJycsdXJsYnVpbGQsJ0xpc3RhJyx0aXBvY2FuLF90aXBvdXNlcixfc2VydnVzZXIsX2ZhbmFydCkNCgkJZWxzZToNCgkJCWlmKHRpcG8gPT0gJ1ByYWlhJykgb3IgKHRpcG8gPT0gJ1Byb2dyYW1hc1RWJyk6DQoJCQkJbGlzdGFyX2dydXBvcygnJyx1cmxidWlsZCwnTWluaWF0dXJhJyx0aXBvY2FuLF90aXBvdXNlcixfc2VydnVzZXIsX2ZhbmFydCkNCgkJCQl4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KGludChzeXMuYXJndlsxXSksY2FjaGVUb0Rpc2M9RmFsc2UpDQoJCQllbHNlOg0KCQkJCWlmIF9zZXJ2dXNlciA9PSAnU2Vydmlkb3IzJzoNCgkJCQkJdXJsYnVpbGQgPSBfbGlzdGF1c2VyKydnZXQucGhwP3VzZXJuYW1lPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSsnJnBhc3N3b3JkPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX3Bhc3N3b3JkIikrJyZ0eXBlPW0zdV9wbHVzJm91dHB1dD1obHMnDQoJCQkJZWxzZToNCgkJCQkJdXJsYnVpbGQgPSBfbGlzdGF1c2VyKydnZXQucGhwP3VzZXJuYW1lPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSsnJnBhc3N3b3JkPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX3Bhc3N3b3JkIikrJyZ0eXBlPW0zdV9wbHVzJm91dHB1dD0nK3RpcG9zZWxlY3QNCgkJCQlhYnJpbTN1MihfbGlzdGF1c2VyKQ0KCQkJCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoaW50KHN5cy5hcmd2WzFdKSxjYWNoZVRvRGlzYz1UcnVlKQ0KCWVsc2U6DQoJCWZvciBtZW51IGluIG1lblsnbWVudXMnXToNCgkJCW5vbWUgPSBtZW51Wydub21lJ10NCgkJCWxvZ28gPSBtZW51Wydsb2dvJ10NCgkJCWxpbmsgPSBtZW51WydsaW5rJ10NCgkJCXRpcG8gPSBtZW51Wyd0aXBvJ10NCgkJCXNlbmhhID0gbWVudVsnc2VuaGEnXQ0KCQkJZmFuYXJ0ID0gbWVudVsnZmFuYXJ0J10NCgkJCWlmIG5vbWUgIT0gJ1RWcyAtIERlc3BvcnRvJyBhbmQgbm9tZSAhPSAnQWR1bHRvcyAtIERlc3BvcnRvJzoNCgkJCQlpZiB0aXBvID09ICdBZHVsdG8nIDoNCgkJCQkJYWRkRGlyKG5vbWUsbGluayxzZW5oYSwzLCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLCcnLGZhbmFydCkNCgkJCQllbGlmKHRpcG8gPT0gJ3BhdHJvY2luYWRvcmVzJyBvciB0aXBvID09ICdub3ZpZGFkZXMnKToNCgkJCQkJYWRkRGlyKG5vbWUsbGluayxOb25lLDEsJ0xpc3RhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlciwnJyxmYW5hcnQpDQoJCQkJZWxpZiB0aXBvID09ICd0dmFyY2hpdmUnOg0KCQkJCQlpZiBfdGlwb3VzZXIgIT0gJ1Rlc3RlJyBhbmQgX3NlcnZ1c2VyICE9ICdUZXN0ZSc6DQoJCQkJCQlhZGREaXIobm9tZSxfbGlzdGF1c2VyLE5vbmUsMjUsJ01pbmlhdHVyYScsbG9nbywnJywnJywnJywnJyxmYW5hcnQpDQoJCQkJZWxpZiB0aXBvID09ICdBbmltZSc6DQoJCQkJCWFkZERpcihub21lLGxpbmssTm9uZSwyNCwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlciwnJyxmYW5hcnQpDQoJCQkJZWxpZiB0aXBvID09ICdGaWxtZSc6DQoJCQkJCWlmIF90aXBvdXNlciAhPSAnVGVzdGUnOg0KCQkJCQkJYWRkRGlyKG5vbWUsX2xpc3RhdXNlcixOb25lLDIxLCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLCcnLGZhbmFydCkNCgkJCQkJZWxzZToNCgkJCQkJCWFkZERpcihub21lLGxpbmssTm9uZSwyMSwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlciwnJyxmYW5hcnQpDQoJCQkJZWxpZiB0aXBvID09ICdTZXJpZSc6DQoJCQkJCWFkZERpcihub21lLGxpbmssTm9uZSwyMCwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlciwnJyxmYW5hcnQpDQoJCQkJZWxpZih0aXBvID09ICdsaW1wYXJjYWNoZScpOg0KCQkJCQlhZGREaXIobm9tZSwgbGluaywgTm9uZSwgNTAwMCwgJ0xpc3RhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlciwnJyxmYW5hcnQpDQoJCQkJZWxpZih0aXBvID09ICdsaW1wYXJ0dWRvJyk6DQoJCQkJCWFkZERpcihub21lLCBsaW5rLCBOb25lLCA2MDAwLCAnTGlzdGEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLCcnLGZhbmFydCkNCgkJCQllbGlmKHRpcG8gPT0gJ2VzdGFkbycgYW5kIF90aXBvdXNlciAhPSAnVGVzdGUnKToNCgkJCQkJYWRkRGlyKG5vbWUsIGxpbmssIE5vbmUsIDMzMzUsICdMaXN0YScsbG9nbyx0aXBvLF90aXBvdXNlcixfc2VydnVzZXIsJycsZmFuYXJ0KQ0KCQkJCWVsaWYodGlwbyA9PSAncGVzcXVpc2EnIGFuZCBfdGlwb3VzZXIgIT0gJ1Rlc3RlJyk6DQoJCQkJCWlmIF90aXBvdXNlciAhPSAnVGVzdGUnOg0KCQkJCQkJYWRkRGlyKG5vbWUsbGluayxOb25lLDEyMCwnTGlzdGEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLCcnLGZhbmFydCkNCgkJCQllbHNlOg0KCQkJCQlpZiBfdGlwb3VzZXIgPT0gJ0FkbWluaXN0cmFkb3InIG9yIF90aXBvdXNlciA9PSAnUGF0cm9jaW5hZG9yJyBvciBfdGlwb3VzZXIgPT0gJ1BhdHJvY2luYWRvclBhZ2FudGUnOg0KCQkJCQkJaWYgbm9tZSA9PSAnVFZzJzoNCgkJCQkJCQlpZiBfc2VydnVzZXIgPT0gJ1NlcnZpZG9yMyc6DQoJCQkJCQkJCXVybGxpcyA9IF9saXN0YXVzZXIrJ2dldC5waHA/dXNlcm5hbWU9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fbmFtZSIpKycmcGFzc3dvcmQ9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSsnJnR5cGU9bTN1X3BsdXMmb3V0cHV0PW1wZ2V0cycNCgkJCQkJCQllbHNlOg0KCQkJCQkJCQl1cmxsaXMgPSBfbGlzdGF1c2VyKydnZXQucGhwP3VzZXJuYW1lPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSsnJnBhc3N3b3JkPScrX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX3Bhc3N3b3JkIikrJyZ0eXBlPW0zdV9wbHVzJm91dHB1dD0nK3RpcG9zZWxlY3QNCgkJCQkJCQkNCgkJCQkJCQlhZGREaXIobm9tZSxfbGlzdGF1c2VyLE5vbmUsMzMzMywnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlcixfZGF0YXVzZXIsZmFuYXJ0KQ0KCQkJCQkJCWFkZERpcignVFZzLUZyZWUnLGxpbmssTm9uZSwxLCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLCcnLGZhbmFydCkNCgkJCQkJCWVsc2U6DQoJCQkJCQkJYWRkRGlyKG5vbWUsbGluayxOb25lLDEsJ01pbmlhdHVyYScsbG9nbyx0aXBvLF90aXBvdXNlcixfc2VydnVzZXIsbm9tZSxmYW5hcnQpDQoJCQkJCWVsc2U6DQoJCQkJCQlpZiAobm9tZSA9PSAnVFZzJyBhbmQgX3RpcG91c2VyICE9ICdUZXN0ZScpIG9yIChub21lID09ICdUVnMnIGFuZCBfdGlwb3VzZXIgPT0gJ1Rlc3RlJyBhbmQgX3NlcnZ1c2VyICE9ICdUZXN0ZScpOg0KCQkJCQkJCWlmIF9zZXJ2dXNlciA9PSAnU2Vydmlkb3IzJzoNCgkJCQkJCQkJdXJsbGlzID0gX2xpc3RhdXNlcisnZ2V0LnBocD91c2VybmFtZT0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikrJyZwYXNzd29yZD0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpKycmdHlwZT1tM3VfcGx1cyZvdXRwdXQ9aGxzJw0KCQkJCQkJCWVsc2U6DQoJCQkJCQkJCXVybGxpcyA9IF9saXN0YXVzZXIrJ2dldC5waHA/dXNlcm5hbWU9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fbmFtZSIpKycmcGFzc3dvcmQ9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSsnJnR5cGU9bTN1X3BsdXMmb3V0cHV0PScrdGlwb3NlbGVjdA0KCQkJCQkJCQ0KCQkJCQkJCWFkZERpcihub21lLF9saXN0YXVzZXIsTm9uZSwzMzMzLCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLF9kYXRhdXNlcixmYW5hcnQpDQoJCQkJCQllbHNlOg0KCQkJCQkJCWlmIHRpcG8gIT0gJ0FkdWx0bycgb3Igbm9tZSAhPSAnUmFkaW9zJzoNCgkJCQkJCQkJaWYgX3NlcnZ1c2VyID09ICdUZXN0ZSc6DQoJCQkJCQkJCQlhZGREaXIobm9tZSxsaW5rLE5vbmUsMSwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlcixub21lLGZhbmFydCkNCgkJCQkJCQkJZWxzZToNCgkJCQkJCQkJCWFkZERpcihub21lLGxpbmssTm9uZSwxLCdNaW5pYXR1cmEnLGxvZ28sdGlwbyxfdGlwb3VzZXIsX3NlcnZ1c2VyLF9kYXRhdXNlcixmYW5hcnQpDQoJCQkJCQkJZWxzZToNCgkJCQkJCQkJaWYgX3NlcnZ1c2VyID09ICdUZXN0ZSc6DQoJCQkJCQkJCQlhZGREaXIobm9tZSxsaW5rLE5vbmUsMSwnTWluaWF0dXJhJyxsb2dvLHRpcG8sX3RpcG91c2VyLF9zZXJ2dXNlcixub21lLGZhbmFydCkJDQoJCQ0KCQkjeGJtYy5leGVjdXRlYnVpbHRpbignTm90aWZpY2F0aW9uKCVzLCAlcywgJWksICVzKSclKF9ub21ldXNlciwgVmVyc8OjbyBkbyBhZGRvbjogJytfVkVSU0FPXywgODAwMCwgX0lDT05fKSkNCgkJdGhyZWFkLnN0YXJ0X25ld190aHJlYWQoIG9idGVyX2ZpY2hlaXJvX2VwZywgKCkgKQ0KCQl4Ym1jLmV4ZWN1dGVidWlsdGluKCdOb3RpZmljYXRpb24oJXMsICVzLCAlaSwgJXMpJyUoJ0xpdmUhdC1UVicsJ1NlY8Onw6NvIEluaWNpYWRhOiAnK19ub21ldXNlciwgODAwMCwgX0lDT05fKSkNCgkJdmlzdGFfQ2FuYWlzX0xpc3RhKCkNCgkJeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pLGNhY2hlVG9EaXNjPUZhbHNlKQ0KCSNjaGVja192ZXJzaW9uKCkNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIwkJQ2xlYXIgQ2FjaGUJCSMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KZGVmIENMRUFSQ0FDSEUoKToNCgl4Ym1jX2NhY2hlX3BhdGggPSBvcy5wYXRoLmpvaW4oeGJtYy50cmFuc2xhdGVQYXRoKCdzcGVjaWFsOi8vaG9tZScpLCAnY2FjaGUnKQ0KCWlmIG9zLnBhdGguZXhpc3RzKHhibWNfY2FjaGVfcGF0aCk9PVRydWU6CQ0KCQlmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2Fsayh4Ym1jX2NhY2hlX3BhdGgpOg0KCQkJZmlsZV9jb3VudCA9IDANCgkJCWZpbGVfY291bnQgKz0gbGVuKGZpbGVzKQ0KCQkJaWYgZmlsZV9jb3VudCA+IDA6DQoJDQoJCQkJZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQ0KCQkJCWlmIGRpYWxvZy55ZXNubygiQXBhZ2FyIENhY2hlIG5vIFhCTUMuIiwgc3RyKGZpbGVfY291bnQpICsgIiBmaWNoZWlyb3MgZW5jb250cmFkb3MuIiwgIlF1ZXIgYXBhZ2FyIHRvZG9zIG9zIGZpY2hlaXJvcyBlbSBjYWNoZT8iKToNCgkJCQkNCgkJCQkJZm9yIGYgaW4gZmlsZXM6DQoJCQkJCQl0cnk6DQoJCQkJCQkJb3MudW5saW5rKG9zLnBhdGguam9pbihyb290LCBmKSkNCgkJCQkJCWV4Y2VwdDoNCgkJCQkJCQlwYXNzDQoJCQkJCWZvciBkIGluIGRpcnM6DQoJCQkJCQl0cnk6DQoJCQkJCQkJc2h1dGlsLnJtdHJlZShvcy5wYXRoLmpvaW4ocm9vdCwgZCkpDQoJCQkJCQlleGNlcHQ6DQoJCQkJCQkJcGFzcw0KCQkJCQkJDQoJCQllbHNlOg0KCQkJCXBhc3MNCglpZiB4Ym1jLmdldENvbmRWaXNpYmlsaXR5KCdzeXN0ZW0ucGxhdGZvcm0uQVRWMicpOg0KCQlhdHYyX2NhY2hlX2EgPSBvcy5wYXRoLmpvaW4oJy9wcml2YXRlL3Zhci9tb2JpbGUvTGlicmFyeS9DYWNoZXMvQXBwbGVUVi9WaWRlby8nLCAnT3RoZXInKQ0KCQkNCgkJZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoYXR2Ml9jYWNoZV9hKToNCgkJCWZpbGVfY291bnQgPSAwDQoJCQlmaWxlX2NvdW50ICs9IGxlbihmaWxlcykNCgkJDQoJCQlpZiBmaWxlX2NvdW50ID4gMDoNCg0KCQkJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJCQlpZiBkaWFsb2cueWVzbm8oIkFwYWdhciBmaWNoZWlyb3MgQVRWMi4iLCBzdHIoZmlsZV9jb3VudCkgKyAiIGZpY2hlaXJvcyBlbmNvbnRyYWRvcyBlbSAnT3V0cm9zJyIsICJRdWVyIGFwYWdhciB0b2RvcyBvcyBmaWNoZWlyb3MgZW0gY2FjaGU/Iik6DQoJCQkJDQoJCQkJCWZvciBmIGluIGZpbGVzOg0KCQkJCQkJb3MudW5saW5rKG9zLnBhdGguam9pbihyb290LCBmKSkNCgkJCQkJZm9yIGQgaW4gZGlyczoNCgkJCQkJCXNodXRpbC5ybXRyZWUob3MucGF0aC5qb2luKHJvb3QsIGQpKQ0KCQkJCQkJDQoJCQllbHNlOg0KCQkJCXBhc3MNCgkJYXR2Ml9jYWNoZV9iID0gb3MucGF0aC5qb2luKCcvcHJpdmF0ZS92YXIvbW9iaWxlL0xpYnJhcnkvQ2FjaGVzL0FwcGxlVFYvVmlkZW8vJywgJ0xvY2FsQW5kUmVudGFsJykNCgkJDQoJCWZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKGF0djJfY2FjaGVfYik6DQoJCQlmaWxlX2NvdW50ID0gMA0KCQkJZmlsZV9jb3VudCArPSBsZW4oZmlsZXMpDQoJCQ0KCQkJaWYgZmlsZV9jb3VudCA+IDA6DQoNCgkJCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCQkJaWYgZGlhbG9nLnllc25vKCJBcGFnYXIgZmljaGVpcm9zIEFUVjIuIiwgc3RyKGZpbGVfY291bnQpICsgIiBmaWNoZWlyb3MgZW5jb250cmFkb3MgZW0gJ0xvY2FsJyIsICJRdWVyIGFwYWdhciB0b2RvcyBvcyBmaWNoZWlyb3MgZW0gY2FjaGU/Iik6DQoJCQkJDQoJCQkJCWZvciBmIGluIGZpbGVzOg0KCQkJCQkJb3MudW5saW5rKG9zLnBhdGguam9pbihyb290LCBmKSkNCgkJCQkJZm9yIGQgaW4gZGlyczoNCgkJCQkJCXNodXRpbC5ybXRyZWUob3MucGF0aC5qb2luKHJvb3QsIGQpKQ0KCQkJCQkJDQoJCQllbHNlOg0KCQkJCXBhc3MNCgkJCSAgIyBTZXQgcGF0aCB0byBDeWRpYSBBcmNoaXZlcyBjYWNoZSBmaWxlcw0KCQkJCQkJCSANCg0KCSMgU2V0IHBhdGggdG8gV2hhdCB0aCBGdXJrIGNhY2hlIGZpbGVzDQoJd3RmX2NhY2hlX3BhdGggPSBvcy5wYXRoLmpvaW4oeGJtYy50cmFuc2xhdGVQYXRoKCdzcGVjaWFsOi8vcHJvZmlsZS9hZGRvbl9kYXRhL3BsdWdpbi52aWRlby53aGF0dGhlZnVyay9jYWNoZScpLCAnJykNCglpZiBvcy5wYXRoLmV4aXN0cyh3dGZfY2FjaGVfcGF0aCk9PVRydWU6CQ0KCQlmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2Fsayh3dGZfY2FjaGVfcGF0aCk6DQoJCQlmaWxlX2NvdW50ID0gMA0KCQkJZmlsZV9jb3VudCArPSBsZW4oZmlsZXMpDQoJCQ0KCQkjIENvdW50IGZpbGVzIGFuZCBnaXZlIG9wdGlvbiB0byBkZWxldGUNCgkJCWlmIGZpbGVfY291bnQgPiAwOg0KCQ0KCQkJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJCQlpZiBkaWFsb2cueWVzbm8oIkFwYWdhciBhIGNhY2hlIFdURi4iLCBzdHIoZmlsZV9jb3VudCkgKyAiIGZpY2hlaXJvcyBlbmNvbnRyYWRvcy4iLCAiUXVlciBhcGFnYXIgdG9kb3Mgb3MgZmljaGVpcm9zIGVtIGNhY2hlPyIpOg0KCQkJCQ0KCQkJCQlmb3IgZiBpbiBmaWxlczoNCgkJCQkJCW9zLnVubGluayhvcy5wYXRoLmpvaW4ocm9vdCwgZikpDQoJCQkJCWZvciBkIGluIGRpcnM6DQoJCQkJCQlzaHV0aWwucm10cmVlKG9zLnBhdGguam9pbihyb290LCBkKSkNCgkJCQkJCQ0KCQkJZWxzZToNCgkJCQlwYXNzDQoJCQkJDQoJCQkJIyBTZXQgcGF0aCB0byA0b0QgY2FjaGUgZmlsZXMNCgljaGFubmVsNF9jYWNoZV9wYXRoPSBvcy5wYXRoLmpvaW4oeGJtYy50cmFuc2xhdGVQYXRoKCdzcGVjaWFsOi8vcHJvZmlsZS9hZGRvbl9kYXRhL3BsdWdpbi52aWRlby40b2QvY2FjaGUnKSwgJycpDQoJaWYgb3MucGF0aC5leGlzdHMoY2hhbm5lbDRfY2FjaGVfcGF0aCk9PVRydWU6CQ0KCQlmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2FsayhjaGFubmVsNF9jYWNoZV9wYXRoKToNCgkJCWZpbGVfY291bnQgPSAwDQoJCQlmaWxlX2NvdW50ICs9IGxlbihmaWxlcykNCgkJDQoJCSMgQ291bnQgZmlsZXMgYW5kIGdpdmUgb3B0aW9uIHRvIGRlbGV0ZQ0KCQkJaWYgZmlsZV9jb3VudCA+IDA6DQoJDQoJCQkJZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQ0KCQkJCWlmIGRpYWxvZy55ZXNubygiQXBhZ2FyIGZpY2hlaXJvcyA0b0QgZW0gY2FjaGUuIiwgc3RyKGZpbGVfY291bnQpICsgIiBmaWNoZWlyb3MgZW5jb250cmFkb3MuIiwgIlF1ZXIgYXBhZ2FyIHRvZG9zIG9zIGZpY2hlaXJvcyBlbSBjYWNoZT8iKToNCgkJCQkNCgkJCQkJZm9yIGYgaW4gZmlsZXM6DQoJCQkJCQlvcy51bmxpbmsob3MucGF0aC5qb2luKHJvb3QsIGYpKQ0KCQkJCQlmb3IgZCBpbiBkaXJzOg0KCQkJCQkJc2h1dGlsLnJtdHJlZShvcy5wYXRoLmpvaW4ocm9vdCwgZCkpDQoJCQkJCQkNCgkJCWVsc2U6DQoJCQkJcGFzcw0KCQkJCQ0KCQkJCSMgU2V0IHBhdGggdG8gQkJDIGlQbGF5ZXIgY2FjaGUgZmlsZXMNCglpcGxheWVyX2NhY2hlX3BhdGg9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly9wcm9maWxlL2FkZG9uX2RhdGEvcGx1Z2luLnZpZGVvLmlwbGF5ZXIvaXBsYXllcl9odHRwX2NhY2hlJyksICcnKQ0KCWlmIG9zLnBhdGguZXhpc3RzKGlwbGF5ZXJfY2FjaGVfcGF0aCk9PVRydWU6CQ0KCQlmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2FsayhpcGxheWVyX2NhY2hlX3BhdGgpOg0KCQkJZmlsZV9jb3VudCA9IDANCgkJCWZpbGVfY291bnQgKz0gbGVuKGZpbGVzKQ0KCQkNCgkJIyBDb3VudCBmaWxlcyBhbmQgZ2l2ZSBvcHRpb24gdG8gZGVsZXRlDQoJCQlpZiBmaWxlX2NvdW50ID4gMDoNCgkNCgkJCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCQkJaWYgZGlhbG9nLnllc25vKCJBcGFnYXIgZmljaGVpcm9zIEJCQyBpUGxheWVyIGVtIGNhY2hlLiIsIHN0cihmaWxlX2NvdW50KSArICIgZmljaGVpcm9zIGVuY29udHJhZG9zLiIsICJRdWVyIGFwYWdhciB0b2RvcyBvcyBmaWNoZWlyb3MgZW0gY2FjaGU/Iik6DQoJCQkJDQoJCQkJCWZvciBmIGluIGZpbGVzOg0KCQkJCQkJb3MudW5saW5rKG9zLnBhdGguam9pbihyb290LCBmKSkNCgkJCQkJZm9yIGQgaW4gZGlyczoNCgkJCQkJCXNodXRpbC5ybXRyZWUob3MucGF0aC5qb2luKHJvb3QsIGQpKQ0KCQkJCQkJDQoJCQllbHNlOg0KCQkJCXBhc3MNCgkJCQkNCgkJCQkNCgkJCQkjIFNldCBwYXRoIHRvIFNpbXBsZSBEb3dubG9hZGVyIGNhY2hlIGZpbGVzDQoJZG93bmxvYWRlcl9jYWNoZV9wYXRoID0gb3MucGF0aC5qb2luKHhibWMudHJhbnNsYXRlUGF0aCgnc3BlY2lhbDovL3Byb2ZpbGUvYWRkb25fZGF0YS9zY3JpcHQubW9kdWxlLnNpbXBsZS5kb3dubG9hZGVyJyksICcnKQ0KCWlmIG9zLnBhdGguZXhpc3RzKGRvd25sb2FkZXJfY2FjaGVfcGF0aCk9PVRydWU6CQ0KCQlmb3Igcm9vdCwgZGlycywgZmlsZXMgaW4gb3Mud2Fsayhkb3dubG9hZGVyX2NhY2hlX3BhdGgpOg0KCQkJZmlsZV9jb3VudCA9IDANCgkJCWZpbGVfY291bnQgKz0gbGVuKGZpbGVzKQ0KCQkNCgkJIyBDb3VudCBmaWxlcyBhbmQgZ2l2ZSBvcHRpb24gdG8gZGVsZXRlDQoJCQlpZiBmaWxlX2NvdW50ID4gMDoNCgkNCgkJCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCQkJaWYgZGlhbG9nLnllc25vKCJBcGFnYXIgZmljaGVpcm9zIFNpbXBsZSBEb3dubG9hZGVyIGVtIGNhY2hlLiIsIHN0cihmaWxlX2NvdW50KSArICIgZmljaGVpcm9zIGVuY29udHJhZG9zLiIsICJRdWVyIGFwYWdhciB0b2RvcyBvcyBmaWNoZWlyb3MgZW0gY2FjaGU/Iik6DQoJCQkJDQoJCQkJCWZvciBmIGluIGZpbGVzOg0KCQkJCQkJb3MudW5saW5rKG9zLnBhdGguam9pbihyb290LCBmKSkNCgkJCQkJZm9yIGQgaW4gZGlyczoNCgkJCQkJCXNodXRpbC5ybXRyZWUob3MucGF0aC5qb2luKHJvb3QsIGQpKQ0KCQkJCQkJDQoJCQllbHNlOg0KCQkJCXBhc3MNCgkNCglpdHZfY2FjaGVfcGF0aCA9IG9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly9wcm9maWxlL2FkZG9uX2RhdGEvcGx1Z2luLnZpZGVvLml0di9JbWFnZXMnKSwgJycpDQoJaWYgb3MucGF0aC5leGlzdHMoaXR2X2NhY2hlX3BhdGgpPT1UcnVlOgkNCgkJZm9yIHJvb3QsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsoaXR2X2NhY2hlX3BhdGgpOg0KCQkJZmlsZV9jb3VudCA9IDANCgkJCWZpbGVfY291bnQgKz0gbGVuKGZpbGVzKQ0KCQkJDQoJCQlpZiBmaWxlX2NvdW50ID4gMDoNCgkNCgkJCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCQkJaWYgZGlhbG9nLnllc25vKCJBcGFnYXIgaXRlbXMgZW0gY2FjaGUiLCBzdHIoZmlsZV9jb3VudCkgKyAiIGZpY2hlaXJvcyBlbmNvbnRyYWRvcy4iLCAiUXVlciBhcGFnYXIgdG9kb3Mgb3MgZmljaGVpcm9zIGVtIGNhY2hlPyIpOg0KCQkJCQ0KCQkJCQlmb3IgZiBpbiBmaWxlczoNCgkJCQkJCW9zLnVubGluayhvcy5wYXRoLmpvaW4ocm9vdCwgZikpDQoJCQkJCWZvciBkIGluIGRpcnM6DQoJCQkJCQlzaHV0aWwucm10cmVlKG9zLnBhdGguam9pbihyb290LCBkKSkNCgkJCQkJCQ0KCQkJZWxzZToNCgkJCQlwYXNzDQoJZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQ0KCWRpYWxvZy5vayhBZGRvblRpdGxlLCAiCQlDYWNoZSBhcGFnYWRhIGNvbSBzdWNlc3NvISIpDQoNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMjIwkgUHVyZ2UgUGFja2FnZXMJCSMjIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KZGVmIFBVUkdFUEFDS0FHRVMoKToNCglwYWNrYWdlc19jYWNoZV9wYXRoID0geGJtYy50cmFuc2xhdGVQYXRoKG9zLnBhdGguam9pbignc3BlY2lhbDovL2hvbWUvYWRkb25zL3BhY2thZ2VzJywgJycpKQ0KCXRyeToJDQoJCWZvciByb290LCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKHBhY2thZ2VzX2NhY2hlX3BhdGgpOg0KCQkJZmlsZV9jb3VudCA9IDANCgkJCWZpbGVfY291bnQgKz0gbGVuKGZpbGVzKQ0KCQkJDQoJCQlpZiBmaWxlX2NvdW50ID4gMDoNCgkNCgkJCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCQkJaWYgZGlhbG9nLnllc25vKCJFeGNsdWlyIGluZm9ybWHDp8OjbyBlbSBDYWNoZS4iLCBzdHIoZmlsZV9jb3VudCkgKyAiIGZpY2hlaXJvcyBlbmNvbnRyYWRvcy4iLCAiUXVlciBhcGFnYXIgdG9kb3Mgb3MgZmljaGVpcm9zPyIpOg0KCQkJCQkJCQ0KCQkJCQlmb3IgZiBpbiBmaWxlczoNCgkJCQkJCW9zLnVubGluayhvcy5wYXRoLmpvaW4ocm9vdCwgZikpDQoJCQkJCWZvciBkIGluIGRpcnM6DQoJCQkJCQlzaHV0aWwucm10cmVlKG9zLnBhdGguam9pbihyb290LCBkKSkNCgkJCQkJZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQ0KCQkJCQlkaWFsb2cub2soQWRkb25UaXRsZSwgIgkJS29kaSBsaW1wbyBjb20gc3VjZXNzby4iKQ0KCQkJCWVsc2U6DQoJCQkJCQlwYXNzDQoJCQllbHNlOg0KCQkJCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgkJCQlkaWFsb2cub2soQWRkb25UaXRsZSwgIgkJTsOjbyBmb3JhbSBlbmNvbnRyYWRvcyBmaWNoZWlyb3MgYSBhcGFnYXIuIikNCglleGNlcHQ6IA0KCQlkaWFsb2cgPSB4Ym1jZ3VpLkRpYWxvZygpDQoJCWRpYWxvZy5vayhBZGRvblRpdGxlLCAiRXJybyBhbyB0ZW50YXIgYXBhZ2FyIGZpY2hlaXJvcyBlbSBjYWNoZS4iKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMJCQkJCQkJCQkJCQkJTWVudXMJCQkJCQkJCQkJCQkJICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQpkZWYgYWJyaW0zdSh1cmwsIGRhdGF1c2VyKToNCgl0bXBMaXN0ID0gW10NCglsaXN0ID0gY29tbW9uLm0zdTJsaXN0KHVybCkNCglhZGREaXIoJ0F0dWFsaXphciBMaXN0YScsdXJsLE5vbmUsMzMzMywnTWluaWF0dXJhJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAncmV0cm9jZWRlci5wbmcnKSwnJywnJywnJyxkYXRhdXNlcixvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAncmV0cm9jZWRlci5wbmcnKSkNCglhZGRMaW5rQ2FuYWwoJ1bDrWRlbyBJbnN0YWxhw6fDo28gQnVpbGQnLCdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS8/cGF0aD0vcm9vdC92aWRlbyZhY3Rpb249cGxheV92aWRlbyZ2aWRlb2lkPVB1bHh6dGNBSGtzJnQnLCcnLCcnLCcnKQ0KCWFkZExpbmtDYW5hbCgnRMO6dmlkYXM6IGxpdmVpdGtvZGlAZ21haWwuY29tICcsJycsJycsJycsJycpDQoJYWRkTGlua0NhbmFsKGRhdGF1c2VyLCcnLCcnLCcnLCcnKQ0KCWZvciBjaGFubmVsIGluIGxpc3Q6DQoJCW5hbWUgPSBjb21tb24uR2V0RW5jb2RlU3RyaW5nKGNoYW5uZWxbImRpc3BsYXlfbmFtZSJdKQ0KCQlpbWFnZSA9IGNoYW5uZWwuZ2V0KCJ0dmdfbG9nbyIsICIiKQ0KCQl1cmwgPSBjb21tb24uR2V0RW5jb2RlU3RyaW5nKGNoYW5uZWxbInVybCJdKQ0KCQlpZF9pcCA9IGNoYW5uZWwuZ2V0KCJ0dmctSUQiLCAiIikNCgkJDQoJCWFkZExpbmtDYW5hbChuYW1lLHVybCxpbWFnZSxpZF9pcCwnJykNCgkNCgl2aXN0YV9DYW5haXNfTGlzdGEoKQ0KCQ0KZGVmIGFicmltM3UyKHVybCk6DQoJdmVyc2lvbiA9IF9fQURET05WRVJTSU9OX18NCglrYXN1dGFqYW5pbWk9X19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKQ0KCXNhbGFzb25hPV9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpDQoJbGVoZWt5bGc9dXJsDQoJcG9yZGludW1iZXI9ODANCgkjdXVlbmR1c2VkPXBsdWdpbnRvb2xzLmdldF9zZXR0aW5nKHN5bmNfZGF0YSgiZFhWbGJtUjFjMlZrIikpDQoJdmFuZW1ha29vZD1fX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fYWR1bHRvcyIpDQoJdmFuZW1hbHVraz1fX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fYWR1bHRvc19zaW0iKQ0KCXBuaW1pID0gIkxpdmUhdCINCgkNCgl0ZWxldmlzaW9vbmlsaW5rID0gdXJsKydlbmlnbWEyLnBocD91c2VybmFtZT0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9uYW1lIikrJyZwYXNzd29yZD0nK19fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpKycmdHlwZT1nZXRfbGl2ZV9jYXRlZ29yaWVzJw0KDQoJYWRkRGlyKCdBdHVhbGl6YXIgTGlzdGEnLHVybCxOb25lLDMzMzMsJ01pbmlhdHVyYScsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksJycsJycsJycsJycsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Z1bmRvX2FkZG9uLnBuZycpKQ0KCXNlY3VyaXR5X2NoZWNrKHRlbGV2aXNpb29uaWxpbmspDQoNCmRlZiBzZWN1cml0eV9jaGVjayh1cmwpOg0KCXJlcXVlc3QgPSB1cmxsaWIyLlJlcXVlc3QodXJsLCBoZWFkZXJzPXsiQWNjZXB0IiA6ICJhcHBsaWNhdGlvbi94bWwifSkNCgl1ID0gdXJsbGliMi51cmxvcGVuKHJlcXVlc3QpDQoJdHJlZSA9IEVULnBhcnNlKHUpDQoJcm9vdEVsZW0gPSB0cmVlLmdldHJvb3QoKQ0KCWZvciBjaGFubmVsIGluIHRyZWUuZmluZGFsbCgiY2hhbm5lbCIpOg0KCQlrYW5hbGluaW1pID0gY2hhbm5lbC5maW5kKCJ0aXRsZSIpLnRleHQNCgkJa2FuYWxpbmltaSA9IGJhc2U2NC5iNjRkZWNvZGUoa2FuYWxpbmltaSkNCgkJa2F0ZWdvb3JpYWxpbmsgPSBjaGFubmVsLmZpbmQoInBsYXlsaXN0X3VybCIpLnRleHQNCgkJDQoJCWFkZERpcihrYW5hbGluaW1pLGthdGVnb29yaWFsaW5rLE5vbmUsMzMzOCwnTWluaWF0dXJhJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnaWNvbi5wbmcnKSwnJywnJywnJywnJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJykpDQoJbWV0ZXJza2luKExJU1QpDQoNCmRlZiBkZXRlY3RfbW9kaWZpY2F0aW9uKHVybCk6DQoJcmVxdWVzdCA9IHVybGxpYjIuUmVxdWVzdCh1cmwsIGhlYWRlcnM9eyJBY2NlcHQiIDogImFwcGxpY2F0aW9uL3htbCJ9KQ0KCXUgPSB1cmxsaWIyLnVybG9wZW4ocmVxdWVzdCkNCgl0cmVlID0gRVQucGFyc2UodSkNCglyb290RWxlbSA9IHRyZWUuZ2V0cm9vdCgpDQoJZm9yIGNoYW5uZWwgaW4gdHJlZS5maW5kYWxsKCJjaGFubmVsIik6DQoJCWZpbG1pbmltaSA9IGNoYW5uZWwuZmluZCgidGl0bGUiKS50ZXh0DQoJCWZpbG1pbmltaSA9IGJhc2U2NC5iNjRkZWNvZGUoZmlsbWluaW1pKQ0KCQlrYXRlZ29vcmlhbGluayA9IGNoYW5uZWwuZmluZCgicGxheWxpc3RfdXJsIikudGV4dA0KCQkNCgkJYWRkRGlyKGZpbG1pbmltaSxrYXRlZ29vcmlhbGluayxOb25lLDMzMzksJ01pbmlhdHVyYScsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ljb24ucG5nJyksJycsJycsJycsJycsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Z1bmRvX2FkZG9uLnBuZycpKQ0KCW1ldGVyc2tpbihMSVNUKQ0KDQpkZWYgbWV0ZXJza2luKHZpZXdfbW9kZSk6DQoJc2tpbl9uYW1lPXhibWMuZ2V0U2tpbkRpcigpDQoJdmlld19jb2Rlcz1BTExfVklFV19DT0RFUy5nZXQodmlld19tb2RlKQ0KCXZpZXdfY29kZT12aWV3X2NvZGVzLmdldChza2luX25hbWUpDQoJeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKCIrc3RyKHZpZXdfY29kZSkrIikiKQ0KDQpkZWYgc3RyZWFtX3ZpZGVvKG5hbWUsdXJsLGltYWdlKToNCgl2YW5lbWFsdWtrPV9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9hZHVsdG9zX3NpbSIpDQoJaWYgdmFuZW1hbHVrayA9PSAidHJ1ZSI6DQoJCXZhbmVtYV9sdWtrKG5hbWUpDQoJcmVxdWVzdCA9IHVybGxpYjIuUmVxdWVzdCh1cmwsIGhlYWRlcnM9eyJBY2NlcHQiIDogImFwcGxpY2F0aW9uL3htbCJ9KQ0KCXUgPSB1cmxsaWIyLnVybG9wZW4ocmVxdWVzdCkNCgl0cmVlID0gRVQucGFyc2UodSkNCglyb290RWxlbSA9IHRyZWUuZ2V0cm9vdCgpDQoJZm9yIGNoYW5uZWwgaW4gdHJlZS5maW5kYWxsKHN5bmNfZGF0YSgiWTJoaGJtNWxiQT09IikpOg0KCQlrYW5hbGluaW1pID0gY2hhbm5lbC5maW5kKGdldF9saXZlKCJkR2wwYkdVPSIpKS50ZXh0DQoJCWthbmFsaW5pbWkgPSBiYXNlNjQuYjY0ZGVjb2RlKGthbmFsaW5pbWkpDQoJCWthbmFsaW5pbWkgPSBrYW5hbGluaW1pLnBhcnRpdGlvbigiWyIpDQoJCXN0cmlpbWlsaW5rID0gY2hhbm5lbC5maW5kKGdldF9saXZlKCJjM1J5WldGdFgzVnliQT09IikpLnRleHQNCgkJcGlsdCA9IGNoYW5uZWwuZmluZCgiZGVzY19pbWFnZSIpLnRleHQNCgkJa2F2YSA9IGthbmFsaW5pbWlbMV0ra2FuYWxpbmltaVsyXQ0KCQlrYXZhID0ga2F2YS5wYXJ0aXRpb24oIl0iKQ0KCQlrYXZhID0ga2F2YVsyXQ0KCQlrYXZhID0ga2F2YS5wYXJ0aXRpb24oIgkiKQ0KCQlrYXZhID0ga2F2YVsyXQ0KCQlzaG91ID0gZ2V0X2xpdmUoIlcwTlBURTlTSUhkb2FYUmxYU1Z6SUZzdlEwOU1UMUpkIiklKGthbmFsaW5pbWlbMF0pK2thdmENCgkJa2lyamVsZHVzID0gY2hhbm5lbC5maW5kKCJkZXNjcmlwdGlvbiIpLnRleHQNCgkJaWYga2lyamVsZHVzOg0KCQkJa2lyamVsZHVzID0gYmFzZTY0LmI2NGRlY29kZShraXJqZWxkdXMpDQoJCQlueXlkID0ga2lyamVsZHVzLnBhcnRpdGlvbigiKCIpDQoJCQlueXlkID0gIkFnb3JhOiAiK255eWRbMF0NCgkJCWphcmdtaW5lID0ga2lyamVsZHVzLnBhcnRpdGlvbigiKVxuIikNCgkJCWphcmdtaW5lID0gamFyZ21pbmVbMl0ucGFydGl0aW9uKCIoIikNCgkJCWphcmdtaW5lID0gIkEgc2VndWlyOiAiK2phcmdtaW5lWzBdDQoJCQlrb2trdSA9IG55eWQramFyZ21pbmUNCgkJZWxzZToNCgkJCWtva2t1ID0gIiINCgkJaWYgcGlsdDoNCgkJCWFkZExpbmtDYW5hbExpc3RhKHNob3Usc3RyaWltaWxpbmsscGlsdCxrb2trdSxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnaG9tZXRoZWF0ZXIucG5nJykpDQoJCWVsc2U6DQoJCQlhZGRMaW5rQ2FuYWxMaXN0YShzaG91LHN0cmlpbWlsaW5rLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLGtva2t1LG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdob21ldGhlYXRlci5wbmcnKSkNCgkNCgl4Ym1jcGx1Z2luLnNldENvbnRlbnQoaW50KHN5cy5hcmd2WzFdKSAsImVwaXNvZGVzIikNCgl4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTAzKSIpDQoNCmRlZiBnZXRfbXlhY2NvdW50KG5hbWUsdXJsLGltYWdlKToNCgl2YW5lbWFsdWtrPV9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9hZHVsdG9zX3NpbSIpDQoJaWYgdmFuZW1hbHVrayA9PSAidHJ1ZSI6DQoJCXZhbmVtYV9sdWtrKG5hbWUpDQoJDQoJcmVxdWVzdCA9IHVybGxpYjIuUmVxdWVzdCh1cmwsIGhlYWRlcnM9eyJBY2NlcHQiIDogImFwcGxpY2F0aW9uL3htbCJ9KQ0KCXUgPSB1cmxsaWIyLnVybG9wZW4ocmVxdWVzdCkNCgl0cmVlID0gRVQucGFyc2UodSkNCglyb290RWxlbSA9IHRyZWUuZ2V0cm9vdCgpDQoJZm9yIGNoYW5uZWwgaW4gdHJlZS5maW5kYWxsKCJjaGFubmVsIik6DQoJCXBlYWxraXJpID0gY2hhbm5lbC5maW5kKCJ0aXRsZSIpLnRleHQNCgkJcGVhbGtpcmkgPSBiYXNlNjQuYjY0ZGVjb2RlKHBlYWxraXJpKQ0KCQlwZWFsa2lyaSA9IHBlYWxraXJpLmVuY29kZSgidXRmLTgiKQ0KCQlzdHJpaW1pbGluayA9IGNoYW5uZWwuZmluZCgic3RyZWFtX3VybCIpLnRleHQNCgkJcGlsdCA9IGNoYW5uZWwuZmluZCgiZGVzY19pbWFnZSIpLnRleHQgDQoJCWtpcmplbGR1cyA9IGNoYW5uZWwuZmluZCgiZGVzY3JpcHRpb24iKS50ZXh0DQoJCWlmIGtpcmplbGR1czoNCgkJCWtpcmplbGR1cyA9IGJhc2U2NC5iNjRkZWNvZGUoa2lyamVsZHVzKQ0KCQlpZiBwaWx0Og0KCQkJYWRkTGlua0NhbmFsTGlzdGEocGVhbGtpcmksc3RyaWltaWxpbmsscGlsdCxraXJqZWxkdXMsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3RoZWF0ZXIucG5nJykpDQoJCWVsc2U6DQoJCQlhZGRMaW5rQ2FuYWxMaXN0YShwZWFsa2lyaSxzdHJpaW1pbGluayxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnaWNvbi5wbmcnKSxraXJqZWxkdXMsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3RoZWF0ZXIucG5nJykpDQoJDQoJeGJtY3BsdWdpbi5zZXRDb250ZW50KCBpbnQoc3lzLmFyZ3ZbMV0pICwibW92aWVzIiApDQoJeGJtYy5leGVjdXRlYnVpbHRpbignQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxNSknKQ0KDQpkZWYgYWRkTGlua0NhbmFsTGlzdGEodGl0bGUsdXJsLHRodW1ibmFpbCxwbG90LGZhbmFydCwgaXNQbGF5YWJsZT1UcnVlLCBmb2xkZXI9RmFsc2UpOg0KCW9rPVRydWUNCgkNCglsaXN0aXRlbT14Ym1jZ3VpLkxpc3RJdGVtKHRpdGxlLGljb25JbWFnZT10aHVtYm5haWwsdGh1bWJuYWlsSW1hZ2U9dGh1bWJuYWlsKQ0KCWluZm9fbGFiZWxzPXsiVGl0bGUiOnRpdGxlLCJGaWxlTmFtZSI6dGl0bGUsIlBsb3QiOnBsb3R9DQoJbGlzdGl0ZW0uc2V0SW5mbyggInZpZGVvIiwgaW5mb19sYWJlbHMgKQ0KCWlmIGZhbmFydCE9IiI6IA0KCQlsaXN0aXRlbS5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJyxmYW5hcnQpDQoJCXhibWNwbHVnaW4uc2V0UGx1Z2luRmFuYXJ0KGludChzeXMuYXJndlsxXSksZmFuYXJ0KQ0KCWlmIHVybC5zdGFydHN3aXRoKCJwbHVnaW46Ly8iKTogDQoJCWl0ZW11cmw9dXJsDQoJCWxpc3RpdGVtLnNldFByb3BlcnR5KCdJc1BsYXlhYmxlJywndHJ1ZScpDQoJCXhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9aW50KHN5cy5hcmd2WzFdKSx1cmw9aXRlbXVybCxsaXN0aXRlbT1saXN0aXRlbSxpc0ZvbGRlcj1mb2xkZXIpDQoJZWxpZiBpc1BsYXlhYmxlOiANCgkJbGlzdGl0ZW0uc2V0UHJvcGVydHkoIlZpZGVvIiwidHJ1ZSIpDQoJDQoJdSA9IHN5cy5hcmd2WzBdICsgIj91cmw9IiArIHN0cih1cmwpICsgIiZtb2RlPTMzNDAmbmFtZT0iICsgc3RyKG5hbWUpICsgIiZpY29uaW1hZ2U9IitzdHIoaWNvbmltYWdlKSsiJmZhbmFydD0iK3N0cihmYW5hcnQpKyImcGxvdD0iK3N0cihwbG90KQ0KCW9rPXhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9aW50KHN5cy5hcmd2WzFdKSx1cmw9dSxsaXN0aXRlbT1saXN0aXRlbSxpc0ZvbGRlcj1mb2xkZXIpDQoJcmV0dXJuIG9rDQoNCmRlZiBydW5fY3JvbmpvYih0aXRsZSx1cmwsaW1hZ2UscGxvdCxmYW5hcnQpOg0KCXZhbmVtYWx1a2s9X19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX2FkdWx0b3Nfc2ltIikNCglpZiB2YW5lbWFsdWtrID09ICJ0cnVlIjoNCgkJdmFuZW1hX2x1a2sobmFtZSkNCgkNCglwbGF5bGlzdCA9IHhibWMuUGxheUxpc3QoeGJtYy5QTEFZTElTVF9WSURFTykNCglwbGF5bGlzdC5jbGVhcigpDQoJDQoJaW5mb19sYWJlbHM9eyJUaXRsZSI6dGl0bGUsIkZpbGVOYW1lIjp0aXRsZSwiUGxvdCI6cGxvdH0NCglsaXN0aXRlbT14Ym1jZ3VpLkxpc3RJdGVtKHRpdGxlLGljb25JbWFnZT1pbWFnZSx0aHVtYm5haWxJbWFnZT1pbWFnZSkNCglsaXN0aXRlbS5zZXRJbmZvKCAidmlkZW8iLCBpbmZvX2xhYmVscyApDQoJcGxheWxpc3QuYWRkKHVybD11cmwsIGxpc3RpdGVtPWxpc3RpdGVtLCBpbmRleD0xKQ0KCXhibWMuUGxheWVyKCkucGxheShwbGF5bGlzdCkNCg0KZGVmIHN5bmNfZGF0YShjaGFubmVsKToNCgl2aWRlbyA9IGJhc2U2NC5iNjRkZWNvZGUoY2hhbm5lbCkNCglyZXR1cm4gdmlkZW8NCg0KZGVmIHJlc3RhcnRfc2VydmljZShwYXJhbXMpOg0KCXZhbmVtYWx1a2s9X19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX2FkdWx0b3Nfc2ltIikNCglpZiB2YW5lbWFsdWtrID09ICJ0cnVlIjoNCgkJcGVhbGtpcmkgPSBwYXJhbXMuZ2V0KHN5bmNfZGF0YSgiZEdsMGJHVT0iKSkNCgkJdmFuZW1hX2x1a2socGVhbGtpcmkpDQoJbG9wcGxpbmsgPSBwYXJhbXMuZ2V0KHZvZF9jaGFubmVscygiZFhKcyIpKQ0KCQ0KCXhibWNwbHVnaW4uc2V0UmVzb2x2ZWRVcmwoaW50KHN5cy5hcmd2WzFdKSwgVHJ1ZSwgbGlzdGl0ZW0pDQoNCmRlZiBncmFiX2VwZyh1cmwpOg0KCXJlcSA9IHVybGxpYjIuUmVxdWVzdCh1cmwpDQoJcmVxLmFkZF9oZWFkZXIoc3luY19kYXRhKCJWWE5sY2kxQloyVnVkQT09IikgLCB2b2RfY2hhbm5lbHMoIlMyOWthU0J3YkhWbmFXNGdZbmtnVEdsMlpTRjAiKSkNCglyZXNwb25zZSA9IHVybGxpYjIudXJsb3BlbihyZXEpDQoJbGluaz1yZXNwb25zZS5yZWFkKCkNCglqZGF0YSA9IGpzb24ubG9hZHMobGluay5kZWNvZGUoJ3V0ZjgnKSkNCglyZXNwb25zZS5jbG9zZSgpDQoJaWYgamRhdGE6DQoJCXJldHVybiBqZGF0YQ0KZGVmIGtvbnRyb2xsKHVybCk6DQoJcmFuZG9tc3RyaW5nID0gZ3JhYl9lcGcodXJsKQ0KCWthc3V0YWphaW5mbyA9IHJhbmRvbXN0cmluZ1tzeW5jX2RhdGEoImRYTmxjbDlwYm1adiIpXQ0KCWtvbnRyb2xsID0ga2FzdXRhamFpbmZvW2dldF9saXZlKCJZWFYwYUE9PSIpXQ0KCXJldHVybiBrb250cm9sbA0KZGVmIGdldF9saXZlKGNoYW5uZWwpOg0KCXZpZGVvID0gYmFzZTY0LmI2NGRlY29kZShjaGFubmVsKQ0KCXJldHVybiB2aWRlbw0KZGVmIGV4ZWN1dGVfYWluZm8odXJsKToNCglhbmRtZWQgPSBncmFiX2VwZyh1cmwpDQoJa2FzdXRhamFBbmRtZWQgPSBhbmRtZWRbc3luY19kYXRhKCJkWE5sY2w5cGJtWnYiKV0NCglzZWlzID0ga2FzdXRhamFBbmRtZWRbZ2V0X2xpdmUoImMzUmhkSFZ6IildDQoJYWVndWIgPSBrYXN1dGFqYUFuZG1lZFtzeW5jX2RhdGEoIlpYaHdYMlJoZEdVPSIpXQ0KCWlmIGFlZ3ViOg0KCQlhZWd1YiA9IGRhdGV0aW1lLmRhdGV0aW1lLmZyb210aW1lc3RhbXAoaW50KGFlZ3ViKSkuc3RyZnRpbWUoJyVIOiVNICVkLiVtLiVZJykNCgllbHNlOg0KCQlhZWd1YiA9IHZvZF9jaGFubmVscygiVG1WMlpYST0iKSANCglyYWJiaXRzID0ga2FzdXRhamFBbmRtZWRbdm9kX2NoYW5uZWxzKCJhWE5mZEhKcFlXdz0iKV0NCglpZiByYWJiaXRzID09ICIwIjoNCgkJcmFiYml0cyA9IHN5bmNfZGF0YSgiVG04PSIpDQoJZWxzZToNCgkJcmFiYml0cyA9IHN5bmNfZGF0YSgiV1dWeiIpDQoJbGVhdmVtZWFsb25lID0ga2FzdXRhamFBbmRtZWRbZ2V0X2xpdmUoImJXRjRYMk52Ym01bFkzUnBiMjV6IildDQoJcG9sYXJiZWFycyA9IGthc3V0YWphQW5kbWVkW3N5bmNfZGF0YSgiZFhObGNtNWhiV1U9IildDQoJDQoJYWRkTGlua0NhbmFsTGlzdGEoIltDT0xPUiA9IHdoaXRlXVV0aWxpemFkb3I6IFsvQ09MT1JdIitwb2xhcmJlYXJzLCIiLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICd0aGVhdGVyLnBuZycpKQ0KCQ0KCWFkZExpbmtDYW5hbExpc3RhKCJbQ09MT1IgPSB3aGl0ZV1Fc3RhZG86IFsvQ09MT1JdIitzZWlzLCIiLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICd0aGVhdGVyLnBuZycpKQ0KCQ0KCWFkZExpbmtDYW5hbExpc3RhKCJbQ09MT1IgPSB3aGl0ZV1FeHBpcmE6IFsvQ09MT1JdIithZWd1YiwiIixvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnaWNvbi5wbmcnKSxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnaWNvbi5wbmcnKSxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAndGhlYXRlci5wbmcnKSkNCgkNCglhZGRMaW5rQ2FuYWxMaXN0YSgiW0NPTE9SID0gd2hpdGVdQ29udGEgZGUgVGVzdGU6IFsvQ09MT1JdIityYWJiaXRzLCIiLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICd0aGVhdGVyLnBuZycpKQ0KCQ0KCWFkZExpbmtDYW5hbExpc3RhKCJbQ09MT1IgPSB3aGl0ZV1NYXhpbW8gZGUgQ29ubmVjOiBbL0NPTE9SXSIrbGVhdmVtZWFsb25lLCIiLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdpY29uLnBuZycpLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICd0aGVhdGVyLnBuZycpKQ0KCQ0KCW1ldGVyc2tpbihMSVNUKQ0KDQpkZWYgdmFuZW1hX2x1a2sobmFtZSk6DQoJYSA9ICdYWFgnLCAnQWR1bHQnLCAnQWR1bHRzJywnQURVTFQnLCdBRFVMVFMnLCdhZHVsdCcsJ2FkdWx0cycsJ1Bvcm4nLCdQT1JOJywncG9ybicsJ1Bvcm4nLCd4eHgnDQoJaWYgYW55KHMgaW4gbmFtZSBmb3IgcyBpbiBhKToNCgkJeGJtYy5leGVjdXRlYnVpbHRpbigodSdYQk1DLk5vdGlmaWNhdGlvbigiQ29udHJvbG8gUGFyZW50YWwiLCAiTyBjYW5hbCBjb250ZW0gY29udGV1ZG8gYWR1bHRvIiwgMjAwMCknKSkNCgkJdGV4dCA9IHBsdWdpbnRvb2xzLmtleWJvYXJkX2lucHV0KGRlZmF1bHRfdGV4dD0iIiwgdGl0bGU9IkNvZGlnbyBwYXJhIGNvbnRyb2xvIHBhcmVudGFsIikNCgkJaWYgdGV4dD09cGx1Z2ludG9vbHMuZ2V0X3NldHRpbmcoc3luY19kYXRhKCJiRzluYVc1ZllXUjFiSFJ2Y3c9PSIpKToNCgkJICByZXR1cm4NCgkJZWxzZToNCgkJICBleGl0KCkNCgllbHNlOg0KCQluYW1lID0gIiINCg0KZGVmIERvd25sb2FkZXJDbGFzcyh1cmwsZGVzdCk6DQoJZHAgPSB4Ym1jZ3VpLkRpYWxvZ1Byb2dyZXNzKCkNCglkcC5jcmVhdGUoc3luY19kYXRhKCJSMlYwZEdsdVp5QjFjR1JoZEdVPSIpLGdldF9saXZlKCJSRzkzYm14dllXUnBibWM9IikpDQoJdXJsbGliLnVybHJldHJpZXZlKHVybCxkZXN0LGxhbWJkYSBuYiwgYnMsIGZzLCB1cmw9dXJsOiBfcGJob29rKG5iLGJzLGZzLHVybCxkcCkpDQoNCmRlZiBfcGJob29rKG51bWJsb2NrcywgYmxvY2tzaXplLCBmaWxlc2l6ZSwgdXJsPU5vbmUsZHA9Tm9uZSk6DQoJdHJ5Og0KCQlwZXJjZW50ID0gbWluKChudW1ibG9ja3MqYmxvY2tzaXplKjEwMCkvZmlsZXNpemUsIDEwMCkNCgkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJycrcGVyY2VudCkNCgkJZHAudXBkYXRlKHBlcmNlbnQpDQoJZXhjZXB0Og0KCQlwZXJjZW50ID0gMTAwDQoJCWRwLnVwZGF0ZShwZXJjZW50KQ0KCWlmIGRwLmlzY2FuY2VsZWQoKToNCgkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ08gZG93bmxvYWQgZm9pIGNhbmNlbGFkby4nKQ0KCQlkcC5jbG9zZSgpDQoNCmRlZiB2b2RfY2hhbm5lbHMoY2hhbm5lbCk6DQoJdmlkZW8gPSBiYXNlNjQuYjY0ZGVjb2RlKGNoYW5uZWwpDQoJcmV0dXJuIHZpZGVvDQoNCg0KDQpkZWYgUGxheVVybChuYW1lLCB1cmwsIGljb25pbWFnZT1Ob25lKToNCglsaXN0aXRlbSA9IHhibWNndWkuTGlzdEl0ZW0ocGF0aD11cmwsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCglsaXN0aXRlbS5zZXRJbmZvKHR5cGU9IlZpZGVvIiwgaW5mb0xhYmVscz17ICJUaXRsZSI6IG5hbWUgfSkNCgl4Ym1jcGx1Z2luLnNldFJlc29sdmVkVXJsKGludChzeXMuYXJndlsxXSksIFRydWUsIGxpc3RpdGVtKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMJCQkJCQkJCQkJCQkJTGlzdGFyIEdydXBvcwkJCQkJCQkJCQkJICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KZGVmIGxpc3Rhcl9ncnVwb3NfYWR1bHRvcyh1cmwsc2VuaGEsZXN0aWxvLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsZmFuYXJ0KToNCglwYXNzYSA9IFRydWUNCglpZiB0aXBvX3VzZXIgPT0gJ1Rlc3RlJzoNCgkJaWYgc2Vydmlkb3JfdXNlciA9PSAiVGVzdGUiOg0KCQkJcGFzc2EgPSBGYWxzZQ0KCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ07Do28gdGVtIGFjZXNzbyBhIGVzdGUgbWVudS4gRmHDp2EgYSBzdWEgZG9hw6fDo28uJykNCgkJZWxzZToNCgkJCWlmIHNlcnZpZG9yX3VzZXIgPT0gJ1Rlc3RlJzoNCgkJCQlwYXNzYSA9IEZhbHNlDQoJCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ07Do28gdGVtIGFjZXNzbyBhIGVzdGUgbWVudS4gRmHDp2EgYSBzdWEgZG9hw6fDo28uJykJDQoJaWYgcGFzc2E6DQoJCWlmKF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9hZHVsdG9zIikgPT0gJycpOg0KCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ1ByZWVuY2hhIG8gY2FtcG8gc2VuaGEgcGFyYSBhZHVsdG9zLicpDQoJCWVsaWYoX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX2FkdWx0b3MiKSAhPSBzZW5oYSk6DQoJCQlfX0FMRVJUQV9fKCdMaXZlIXQgVFYnLCAnU2VuaGEgcGFyYSBhZHVsdG9zIGluY29ycmVjdGEuIFZlcmlmaXF1ZSBlIHRlbnRlIGRlIG5vdm8uJykNCgkJZWxzZToNCgkJCWxpc3Rhcl9ncnVwb3MoJycsdXJsLGVzdGlsbyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLGZhbmFydCkNCg0KZGVmIGxpc3Rhcl9ncnVwb3Mobm9tZV9ub3YsdXJsLGVzdGlsbyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLGZhbmFydCk6DQoJaWYgdXJsICE9ICd1cmwnOg0KCQlwYWdlX3dpdGhfeG1sID0gdXJsbGliMi51cmxvcGVuKHVybCkucmVhZGxpbmVzKCkNCgkJZm9yIGxpbmUgaW4gcGFnZV93aXRoX3htbDoNCgkJCW9iamVjdG8gPSBsaW5lLmRlY29kZSgnbGF0aW4tMScpLmVuY29kZSgidXRmLTgiKQ0KCQkJcGFyYW1zID0gb2JqZWN0by5zcGxpdCgnLCcpDQoJCQl0cnk6DQoJCQkJbm9tZWUgPSBwYXJhbXNbMF0NCgkJCQlpbWFnID0gcGFyYW1zWzFdDQoJCQkJdXJsbGwgPSBwYXJhbXNbMl0NCgkJCQllc3RpbCA9IHBhcmFtc1szXQ0KCQkJCXVybGxsc2VydjEgPSBwYXJhbXNbNF0NCgkJCQl1cmxsbHNlcnYyID0gcGFyYW1zWzVdDQoJCQkJdXJsbGxzZXJ2MyA9IHBhcmFtc1s2XQ0KCQkJCXVybGxsc2VydjQgPSBwYXJhbXNbN10NCgkJCQl1cmxsbHNlcnY1ID0gcGFyYW1zWzhdDQoJCQkJdXJsbGxzZXJ2NiA9IHBhcmFtc1s5XQ0KCQkJCXVybGxsc2VydjcgPSBwYXJhbXNbMTBdDQoJCQkJdXJsbGxzZXJ2OCA9IHBhcmFtc1sxMF0NCgkJCQlwYXJhbXNzID0gZXN0aWwuc3BsaXQoJ1xuJykNCgkJCQlpZiB0aXBvX3VzZXIgPT0gJ0FkbWluaXN0cmFkb3InIG9yIHRpcG9fdXNlciA9PSAnUGFnYW50ZScgb3IgdGlwb191c2VyID09ICdQYXRyb2NpbmFkb3JQYWdhbnRlJyBvciB0aXBvX3VzZXIgPT0gJ0Rlc3BvcnRvJzoNCgkJCQkJaWYgbm9tZV9ub3YgPT0gJ1RWcy1GcmVlJzoNCgkJCQkJCWFkZERpcihub21lZSx1cmxsbCxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsJycsZmFuYXJ0KQ0KCQkJCQllbGlmIHNlcnZpZG9yX3VzZXIgPT0gJ1NlcnZpZG9yMSc6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGxzZXJ2MSxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsbm9tZV9ub3YsZmFuYXJ0KQ0KCQkJCQllbGlmIHNlcnZpZG9yX3VzZXIgPT0gJ1NlcnZpZG9yMic6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGxzZXJ2MixOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsbm9tZV9ub3YsZmFuYXJ0KQ0KCQkJCQllbGlmIHNlcnZpZG9yX3VzZXIgPT0gJ1NlcnZpZG9yMyc6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGxzZXJ2MyxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsbm9tZV9ub3YsZmFuYXJ0KQ0KCQkJCQllbGlmIHNlcnZpZG9yX3VzZXIgPT0gJ1NlcnZpZG9yNCc6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGxzZXJ2NCxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsbm9tZV9ub3YsZmFuYXJ0KQ0KCQkJCQllbGlmIHNlcnZpZG9yX3VzZXIgPT0gJ1NlcnZpZG9yNSc6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGxzZXJ2NSxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsbm9tZV9ub3YsZmFuYXJ0KQ0KCQkJCQllbGlmIHNlcnZpZG9yX3VzZXIgPT0gJ1NlcnZpZG9yNic6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGxzZXJ2NixOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsbm9tZV9ub3YsZmFuYXJ0KQ0KCQkJCQllbGlmIHNlcnZpZG9yX3VzZXIgPT0gJ1NlcnZpZG9yNyc6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGxzZXJ2NyxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsbm9tZV9ub3YsZmFuYXJ0KQ0KCQkJCQllbHNlOg0KCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjgsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCQllbGlmIHRpcG9fdXNlciA9PSAnUGF0cm9jaW5hZG9yJzoNCgkJCQkJaWYgbm9tZV9ub3YgPT0gJ1RWcy1GcmVlJzoNCgkJCQkJCWFkZERpcihub21lZSx1cmxsbCxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsJycsZmFuYXJ0KQ0KCQkJCWVsc2U6DQoJCQkJCWlmIHRpcG9fdXNlciA9PSAnVGVzdGUnOg0KCQkJCQkJaWYgc2Vydmlkb3JfdXNlciA9PSAiVGVzdGUiOg0KCQkJCQkJCWFkZERpcihub21lZSx1cmxsbCxOb25lLDIscGFyYW1zc1swXSxpbWFnLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsJycsZmFuYXJ0KQ0KCQkJCQkJZWxzZToNCgkJCQkJCQlpZiBzZXJ2aWRvcl91c2VyICE9ICcnOg0KCQkJCQkJCQlpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjEnOg0KCQkJCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjEsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjInOg0KCQkJCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjIsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjMnOg0KCQkJCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjMsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjQnOg0KCQkJCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjQsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjUnOg0KCQkJCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjUsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjYnOg0KCQkJCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjYsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJCQkJZWxpZiBzZXJ2aWRvcl91c2VyID09ICdTZXJ2aWRvcjcnOg0KCQkJCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsc2VydjcsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLCcnLGZhbmFydCkNCgkJCQkJCQkJZWxzZToNCgkJCQkJCQkJCWFkZERpcihub21lZSx1cmxsbHNlcnY4LE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCQkJZWxzZToNCgkJCQkJCQkJYWRkRGlyKG5vbWVlLHVybGxsLE5vbmUsMixwYXJhbXNzWzBdLGltYWcsdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlciwnJyxmYW5hcnQpDQoJCQkJCWVsc2U6DQoJCQkJCQlhZGREaXIobm9tZWUsdXJsbGwsTm9uZSwyLHBhcmFtc3NbMF0saW1hZyx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLG5vbWVfbm92LGZhbmFydCkNCgkJCWV4Y2VwdDoNCgkJCQlwYXNzDQoJDQoJaWYgdGlwbyA9PSAncGF0cm9jaW5hZG9yZXMnIG9yIHRpcG8gPT0gJ25vdmlkYWRlcycgb3IgdGlwbyA9PSAnUHJhaWEnIG9yIHRpcG8gPT0gJ3Blc3F1aXNhJyBvciB0aXBvID09ICdlc3RhZG8nIG9yIHRpcG8gPT0gJ1Byb2dyYW1hc1RWJyBvciBub21lX25vdiA9PSAnRXZlbnRvcyBEacOhcmlvcyc6DQoJCWVzdGlsb1NlbGVjdCA9IHJldHVybmVzdGlsbyhlc3RpbG8pDQoJCXhibWMuZXhlY3V0ZWJ1aWx0aW4oZXN0aWxvU2VsZWN0KQ0KCWVsc2U6DQoJCWlmIHRpcG8gPT0gJ0ZpbG1lJyBvciB0aXBvID09ICdTZXJpZSc6DQoJCQl2aXN0YV9maWxtZXNTZXJpZXMoKQ0KCQllbHNlOg0KCQkJdmlzdGFfQ2FuYWlzKCkJDQoJeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pLGNhY2hlVG9EaXNjPUZhbHNlKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMJCQkJCQkJCQkJCQkJTWVudSBUViBBcnF1aXZvCQkJCQkJCQkJCQkgIw0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmRlZiBsaXN0YXR2YXJjaGl2ZSh1cmwpOg0KCWVuZGVyZWNvID0gdXJsKyIvcGFuZWxfYXBpLnBocD91c2VybmFtZT0iK19fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9uYW1lJykrIiZwYXNzd29yZD0iK19fQURET05fXy5nZXRTZXR0aW5nKCdsb2dpbl9wYXNzd29yZCcpKyImYWN0aW9uPWdldF9saXZlX3N0cmVhbXMiDQoJaUlpSUlJaSA9IHVybGxpYjIudXJsb3BlbihlbmRlcmVjbykNCglvb28wME9PT29vTwk9IGpzb24ubG9hZChpSWlJSUlpKQ0KCU8wME9PT29Pb28wTyA9IG9vbzAwT09Pb29PWydhdmFpbGFibGVfY2hhbm5lbHMnXQ0KCWZvcglPMDAwT09vMDBvbwlpbglPMDBPT09vT29vME8udmFsdWVzKCk6DQoJCW9vME9PbyA9IE8wMDBPT28wMG9vWyd0dl9hcmNoaXZlJ10NCgkJaWYob28wT09vID09IDEpOg0KCQkJbmFtZXR2PU8wMDBPT28wMG9vWyduYW1lJ10NCgkJCXN0cmVhbV9pZD1PMDAwT09vMDBvb1snc3RyZWFtX2lkJ10NCgkJCWxvZ29fdHY9TzAwME9PbzAwb29bJ3N0cmVhbV9pY29uJ10NCgkJCWR1cmF0aW9uID0gTzAwME9PbzAwb29bJ3R2X2FyY2hpdmVfZHVyYXRpb24nXQ0KCQkJDQoJCQlhZGRMaW5rR3J1cG8obmFtZXR2LGxvZ29fdHYsc3RyZWFtX2lkLHVybCxkdXJhdGlvbixvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJyksMSkNCg0KZGVmIGxpc3RhdHZhcmNoaXZlY2FuYWlzKG5hbWUsc3RyZWFtX2lkLHVybCxkdXJhdGlvbixpY29uaW1hZ2UsZmFuYXJ0KToNCgllbmRlcmVjbyA9IHVybCsiL3BhbmVsX2FwaS5waHA/dXNlcm5hbWU9IitfX0FERE9OX18uZ2V0U2V0dGluZygnbG9naW5fbmFtZScpKyImcGFzc3dvcmQ9IitfX0FERE9OX18uZ2V0U2V0dGluZygnbG9naW5fcGFzc3dvcmQnKSsiJmFjdGlvbj1nZXRfZXBnJnN0cmVhbV9pZD0iK3N0cmVhbV9pZA0KCWlJaUlJSWkJPQl1cmxsaWIyCS51cmxvcGVuKGVuZGVyZWNvKQ0KCWlpaUkxMQk9CWpzb24ubG9hZChpSWlJSUlpKQ0KCWlpSWlJCT0JZGF0ZXRpbWUuZGF0ZXRpbWUudXRjbm93KCkgLSBkYXRldGltZS50aW1lZGVsdGEoZGF5cz1pbnQoZHVyYXRpb24pKQ0KCW8wMG9vb08wT28JPWNhbGVuZGFyLnRpbWVnbShpaUlpSS50aW1ldHVwbGUoKSkNCglvMDBvb29PME9vCT1pbnQobzAwb29vTzBPbykNCglvME8wT09PME9vbwk9dGltZS50aW1lKCkNCglvME8wT09PME9vbwk9aW50KG8wTzBPT08wT29vKQ0KCQ0KCWZvcglpaUlpSUkxCWluCWlpaUkxMQk6DQoJCXRpdGxlX3R2ID0gaWlJaUlJMVsndGl0bGUnXQ0KCQl0aXRsZV90dj1iYXNlNjQuYjY0ZGVjb2RlKHRpdGxlX3R2KQ0KCQlzdGFydAk9IGludChpaUlpSUkxWydzdGFydCddKQ0KCQllbmQJPSBpbnQoaWlJaUlJMVsnZW5kJ10pDQoJCXNlZ3VuZG8gPSAwLjAxNjY2NjY2NjcNCgkJDQoJCWR1cmFjYW8gPSBpbnQoKGVuZC1zdGFydCkqc2VndW5kbykNCgkJDQoJCWlmKHN0YXJ0ID4gbzAwb29vTzBPbyBhbmQgc3RhcnQgPCBvME8wT09PME9vbyk6DQoJCQlpZiA5MCAtIDkwOglPb28wCSUJT28wb29PMG9vMG9PCS8JT28wb08wb29vDQoJCQlJSWkgPSBkYXRldGltZS5kYXRldGltZS5mcm9tdGltZXN0YW1wKGludChzdGFydCkpLnN0cmZ0aW1lKCclZC4lbSAlSDolTScpDQoJCQlpMUlpaTFpMUkgPSBkYXRldGltZS5kYXRldGltZS5mcm9tdGltZXN0YW1wKGludChzdGFydCkpLnN0cmZ0aW1lKCclWS0lbS0lZDolSDolTScpDQoJCQl0aXRsZV90diA9IElJaSArICIgIiArIHRpdGxlX3R2DQoJCQllbmRlcmVjbyA9IHVybCsiL3N0cmVhbWluZy90aW1lc2hpZnQucGhwP3VzZXJuYW1lPSIrX19BRERPTl9fLmdldFNldHRpbmcoJ2xvZ2luX25hbWUnKSsiJnBhc3N3b3JkPSIrX19BRERPTl9fLmdldFNldHRpbmcoJ2xvZ2luX3Bhc3N3b3JkJykrIiZzdHJlYW09IitzdHJlYW1faWQrIiZzdGFydD0iK2kxSWlpMWkxSSsiJmR1cmF0aW9uPSIrc3RyKGR1cmFjYW8pDQoJCQkNCgkJCWFkZExpbmtDYW5hbCh0aXRsZV90dixlbmRlcmVjbyxpY29uaW1hZ2UsJzAwMDEnLCcnKQ0KDQpkZWYgYWRkTGlua0dydXBvKHRpdGxlLHRodW1ibmFpbCxzdHJlYW1faWQsdXJsLGR1cmF0aW9uLGZhbmFydCx0eXBlKToNCglvaz1UcnVlDQoJDQoJbGlzdGl0ZW09eGJtY2d1aS5MaXN0SXRlbSh0aXRsZSxpY29uSW1hZ2U9dGh1bWJuYWlsLHRodW1ibmFpbEltYWdlPXRodW1ibmFpbCkNCglpbmZvX2xhYmVscz17IlRpdGxlIjp0aXRsZSwiRmlsZU5hbWUiOnRpdGxlfQ0KCWxpc3RpdGVtLnNldEluZm8oICJ2aWRlbyIsIGluZm9fbGFiZWxzICkNCglsaXN0aXRlbS5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJyxmYW5hcnQpDQoJeGJtY3BsdWdpbi5zZXRQbHVnaW5GYW5hcnQoaW50KHN5cy5hcmd2WzFdKSxmYW5hcnQpDQoJDQoJdSA9IHN5cy5hcmd2WzBdICsgIj91cmw9IiArIHN0cih1cmwpICsgIiZtb2RlPTI2Jm5hbWU9IiArIHN0cih0aXRsZSkgKyAiJmljb25pbWFnZT0iK3N0cih0aHVtYm5haWwpKyImZmFuYXJ0PSIrc3RyKGZhbmFydCkrIiZzdHJlYW1faWQ9IitzdHIoc3RyZWFtX2lkKSsiJmR1cmF0aW9uPSIrZHVyYXRpb24NCgkNCglvaz14Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPWludChzeXMuYXJndlsxXSksdXJsPXUsbGlzdGl0ZW09bGlzdGl0ZW0saXNGb2xkZXI9VHJ1ZSkNCgkNCglyZXR1cm4gb2sNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCQkJCQkJCUxpc3RhciBDYW5haXMJCQkJCQkJCQkJCSAjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmRlZiBsaXN0YXJfY2FuYWlzX3VybChub21lLHVybCxlc3RpbG8sdGlwbyx0aXBvX3VzZXIsc2Vydmlkb3JfdXNlcixmYW5hcnQsdGlwcG9vLGFkdWx0b3M9RmFsc2UpOg0KCWlmIHVybCAhPSAnbmFkYSc6DQoJCXBhZ2Vfd2l0aF94bWwgPSB1cmxsaWIyLnVybG9wZW4odXJsKS5yZWFkbGluZXMoKQ0KCQlwYXNzYWVwZyA9IFRydWUNCgkJaWYgdGlwcG9vID09ICdEZXNwb3J0bycgb3IgdGlwcG9vID09ICdDcmlhbmNhJyBvciB0aXBwb28gPT0gJ0NhbmFsJyBvciB0aXBwb28gPT0gJ0RvY3VtZW50YXJpbycgb3IgdGlwcG9vID09ICdNdXNpY2EnIG9yIHRpcHBvbyA9PSAnRmlsbWUnIG9yIHRpcHBvbyA9PSAnTm90aWNpYScgb3IgdGlwcG9vID09ICdUVnMnOg0KCQkJaWYoX19FUEdfXyAhPSAnJyk6DQoJCQkJdXJscXFxID0gdXJsbGliLnVybG9wZW4oX19FUEdfXykNCgkJCQljb2RpZ28gPSB1cmxxcXEucmVhZCgpDQoJCQkJdXJscXFxLmNsb3NlDQoJCQllbHNlOg0KCQkJCXBhc3NhZXBnID0gRmFsc2UNCgkNCgkJdHMgPSB0aW1lLnRpbWUoKQ0KCQlzdCA9IGludChkYXRldGltZS5kYXRldGltZS5mcm9tdGltZXN0YW1wKHRzKS5zdHJmdGltZSgnJVklbSVkJUglTSVTJykpDQoJCWlmIHRpcG8gPT0gJ0ZpbG1lJyBvciB0aXBvID09ICdTZXJpZSc6DQoJCQlyZWZyZXMgPSAnKionDQoJCWVsc2U6DQoJCQlyZWZyZXMgPSAnLCcNCgkJZm9yIGxpbmUgaW4gcGFnZV93aXRoX3htbDoNCgkJCXRvdGFsID0gbGVuKGxpbmUpDQoJCQlvYmplY3RvID0gbGluZS5kZWNvZGUoJ2xhdGluLTEnKS5lbmNvZGUoInV0Zi04IikNCgkJCXBhcmFtcyA9IG9iamVjdG8uc3BsaXQocmVmcmVzKQkNCgkJCXRyeToNCgkJCQlub21lZSA9IHBhcmFtc1swXQ0KCQkJCXJ0bXAgPSBwYXJhbXNbMl0ucmVwbGFjZSgnIHJ0bXAnLCdydG1wJykucmVwbGFjZSgnIHJ0c3AnLCdydHNwJykucmVwbGFjZSgnIGh0dHAnLCdodHRwJykucmVwbGFjZSgndXRpbGl6YWRvcmxpdmVpdCcsX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSkucmVwbGFjZSgnc2VuaGFsaXZlaXQnLF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpKQ0KCQkJCWltZyA9IHBhcmFtc1sxXS5yZXBsYWNlKCcgcnRtcCcsJ3J0bXAnKS5yZXBsYWNlKCcgcnRzcCcsJ3J0c3AnKS5yZXBsYWNlKCcgaHR0cCcsJ2h0dHAnKQ0KCQkJCWdydXAgPSBwYXJhbXNbM10NCgkJCQlpZF9pdCA9IHBhcmFtc1s0XS5yc3RyaXAoKQ0KCQkJCWlkX3AgPSBwYXJhbXNbNV0NCgkJCQlzcnRfZiA9ICcnDQoJCQkJZGVzY3JpID0gJycNCgkJCQlfZmFuYXJ0ID0gJycNCgkJCQkNCgkJCQlpZiBncnVwID09IG5vbWU6DQoJCQkJCXByb2dyYW1hID0gJycNCgkJCQkJaWYgdGlwcG9vID09ICdEZXNwb3J0bycgb3IgdGlwcG9vID09ICdDcmlhbmNhJyBvciB0aXBwb28gPT0gJ0NhbmFsJyBvciB0aXBwb28gPT0gJ0RvY3VtZW50YXJpbycgb3IgdGlwcG9vID09ICdNdXNpY2EnIG9yIHRpcHBvbyA9PSAnRmlsbWUnIG9yIHRpcHBvbyA9PSAnTm90aWNpYScgb3IgdGlwcG9vID09ICdUVnMnOg0KCQkJCQkJaWYgaWRfaXQgIT0gJyc6DQoJCQkJCQkJaWYgcGFzc2FlcGc6DQoJCQkJCQkJCXR3cnYgPSBUaHJlYWRXaXRoUmV0dXJuVmFsdWUodGFyZ2V0PWdldFByb2dyYW1hY2FvRGlhcmlhLCBhcmdzPShpZF9pdCwgc3QsY29kaWdvKSkNCgkJCQkJCQkJdHdydi5zdGFydCgpDQoJCQkJCQkJCXByb2dyYW1hID0gdHdydi5qb2luKCkNCgkJCQkJDQoJCQkJCWlmIHByb2dyYW1hICE9ICcnOg0KCQkJCQkJbm9tZXdwID0gbm9tZWUgKyAiIHwgIisgcHJvZ3JhbWENCgkJCQkJZWxzZToNCgkJCQkJCW5vbWV3cCA9IG5vbWVlDQoJCQkJCQ0KCQkJCQlpZgl0aXBvID09ICdGaWxtZScgb3IgdGlwbyA9PSAnU2VyaWUnOg0KCQkJCQkJc3J0X2YgPSBwYXJhbXNbNl0NCgkJCQkJCWFubyA9IHBhcmFtc1s3XQ0KCQkJCQkJcmVhbGl6YWRvciA9ICdEaXJlY3RvcjogJytwYXJhbXNbOF0NCgkJCQkJCWRlc2NyaSA9IHBhcmFtc1s5XQ0KCQkJCQkJZGV0YWxoZXMxID0gZ3J1cA0KCQkJCQkJYXJndW1lbnRvID0gJ0xpdmUhdC1UVicNCgkJCQkJCXBsb3QgPSAnRW5yZWRvOiAnK2Rlc2NyaQ0KCQkJCQkJZGV0YWxoZXMyID0gYW5vDQoJCQkJCQlpbWRiID0gJzQ1MTAzOTgnDQoJCQkJCQl2b3RlcyA9ICc1IGVzdHJlbGFzJw0KCQkJCQkJaW5mb0xhYmVscyA9IHsndGl0bGUnOm5vbWV3cCwgJ3Bsb3QnOnBsb3QsICd3cml0ZXInOiBhcmd1bWVudG8sICdkaXJlY3Rvcic6cmVhbGl6YWRvciwgJ2dlbnJlJzpkZXRhbGhlczEsICd5ZWFyJzogZGV0YWxoZXMyLCAnYWlyZWQnOmRldGFsaGVzMiwgJ0lNREJOdW1iZXInOmltZGIsICd2b3Rlcyc6dm90ZXMsICJjcmVkaXRzIjogbm9tZXdwfQ0KCQkJCQllbHNlOg0KCQkJCQkJaW5mb0xhYmVscyA9IHsidGl0bGUiOiBub21ld3AsICJnZW5yZSI6IHRpcG8sICJjcmVkaXRzIjogbm9tZXdwfQ0KCQkJCQkNCgkJCQkJDQoJCQkJCWFkZExpbmsobm9tZXdwLHJ0bXAsaW1nLGlkX2l0LHNydF9mLGRlc2NyaSx0aXBvLHRpcG9fdXNlcixpZF9wLGluZm9MYWJlbHMsZmFuYXJ0LHRpcHBvbyxhZHVsdG9zLHRvdGFsKQkJCQkNCgkJCWV4Y2VwdDoNCgkJCQlwYXNzDQoJCQ0KCQkjX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ1RpcG86ICcrdGlwbykNCgkJaWYgdGlwbyA9PSAncGF0cm9jaW5hZG9yZXMnIG9yIHRpcG8gPT0gJ25vdmlkYWRlcycgb3IgdGlwbyA9PSAnUHJhaWEnIG9yIHRpcG8gPT0gJ3Blc3F1aXNhJyBvciB0aXBvID09ICdlc3RhZG8nIG9yIHRpcG8gPT0gJ1Byb2dyYW1hc1RWJyBvciBub21lID09ICdFdmVudG9zIERpw6FyaW9zJzoNCgkJCWVzdGlsb1NlbGVjdCA9IHJldHVybmVzdGlsbyhlc3RpbG8pDQoJCQl4Ym1jLmV4ZWN1dGVidWlsdGluKGVzdGlsb1NlbGVjdCkNCgkJZWxzZToNCgkJCWlmIHRpcG8gPT0gJ0ZpbG1lJyBvciB0aXBvID09ICdTZXJpZSc6DQoJCQkJdmlzdGFfZmlsbWVzU2VyaWVzKCkNCgkJCWVsc2U6DQoJCQkJdmlzdGFfQ2FuYWlzKCkNCgkNCgl4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KGludChzeXMuYXJndlsxXSksY2FjaGVUb0Rpc2M9RmFsc2UpDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KIwkJCQkJCQkJCQkJCQlFUEcJCQkJCQkJCQkJCQkJICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KZGVmIG9idGVyX2ZpY2hlaXJvX2VwZygpOg0KCWlmIG5vdCB4Ym1jdmZzLmV4aXN0cyhfX0ZPTERFUl9FUEdfXyk6DQoJCXhibWN2ZnMubWtkaXJzKF9fRk9MREVSX0VQR19fKQ0KDQoJdW5jb21wcmVzc2VkX3BhdGggPSBvcy5wYXRoLmpvaW4oX19GT0xERVJfRVBHX18sICdlcGcueG1sJykNCgl1cmwgPSB1cmxsaWIudXJsb3BlbihfX0VQR19fKQ0KCWNvZGlnbyA9IHVybC5yZWFkKCkNCgl1cmwuY2xvc2UNCgkNCglvcGVuKHVuY29tcHJlc3NlZF9wYXRoLCAndycpLndyaXRlKGNvZGlnbykNCg0KZGVmIGdldFByb2dyYW1hY2FvRGlhcmlhKGlkQ2FuYWwsIGRpYWhvcmEsIGNvZGlnbyk6DQoJc291cmNlID0gcmUuY29tcGlsZSgnPHByb2dyYW1tZSBzdGFydD0iKC4rPykgXCswMTAwIiBzdG9wPSIoLis/KSBcKzAxMDAiIGNoYW5uZWw9IicraWRDYW5hbCsnIj5ccys8dGl0bGUgbGFuZz0icHQiPiguKz8pPFwvdGl0bGU+JykuZmluZGFsbChjb2RpZ28pDQoNCglwcm9ncmFtYSA9ICcnDQoNCglmb3Igc3RhcnQsIHN0b3AsIHByb2dyYW1hMSAgaW4gc291cmNlOg0KDQoJCWlmKGludChzdGFydCkgPCBkaWFob3JhIGFuZCBpbnQoc3RvcCkgPiBkaWFob3JhKToNCgkJCXByb2dyYW1hID0gcHJvZ3JhbWExDQoJcmV0dXJuIHByb2dyYW1hDQoNCg0KZGVmIHByb2dyYW1hY2FvX2NhbmFsKGlkQ2FuYWwpOg0KCXVybCA9IHVybGxpYi51cmxvcGVuKF9fRVBHX18pDQoJY29kaWdvID0gdXJsLnJlYWQoKQ0KCXVybC5jbG9zZQ0KCQ0KCXRzID0gdGltZS50aW1lKCkNCglzdCA9IGludChkYXRldGltZS5kYXRldGltZS5mcm9tdGltZXN0YW1wKHRzKS5zdHJmdGltZSgnJVklbSVkJykpDQoNCglkaWFob3JhID0gaW50KHN0cihzdCkrJzA2MDAwMCcpDQoJZGlhYW1hbmhhID0gaW50KHN0cihzdCsxKSsnMDYwMDAwJykNCg0KCXNvdXJjZSA9IHJlLmNvbXBpbGUoJzxwcm9ncmFtbWUgc3RhcnQ9IiguKz8pIFwrMDEwMCIgc3RvcD0iKC4rPykgXCswMTAwIiBjaGFubmVsPSInK2lkQ2FuYWwrJyI+XHMrPHRpdGxlIGxhbmc9InB0Ij4oLis/KTxcL3RpdGxlPicpLmZpbmRhbGwoY29kaWdvKQ0KDQoJcHJvZ3JhbWEgPSAnJw0KDQoJdGl0bGVzPVsnW0JdW0NPTE9SIHdoaXRlXVByb2dyYW1hw6fDo286Wy9DT0xPUl1bL0JdJ10NCg0KCQ0KCWZvciBzdGFydCwgc3RvcCwgcHJvZ3JhbWExIGluIHNvdXJjZToNCg0KCQlzdGFydDEgPSByZS5jb21waWxlKCcoWzAtOV17NH1bMC0xXVswLTldWzAtM11bMC05XSkoWzAtOV17Mn0pKFswLTldezJ9KShbMC05XXsyfSknKS5maW5kYWxsKHN0YXJ0KQ0KCQlzdG9wMSA9IHJlLmNvbXBpbGUoJyhbMC05XXs0fVswLTFdWzAtOV1bMC0zXVswLTldKShbMC05XXsyfSkoWzAtOV17Mn0pKFswLTldezJ9KScpLmZpbmRhbGwoc3RvcCkNCg0KCQlpZihpbnQoc3RhcnQpID4gZGlhaG9yYSBhbmQgaW50KHN0YXJ0KSA8IGRpYWFtYW5oYSApOg0KCQkJdGl0bGVzLmFwcGVuZCgnXG5bQl0lczolcyAtPiAlczolc1svQl0gLSAlcycgJSAoc3RhcnQxWzBdWzFdLCBzdGFydDFbMF1bMl0sIHN0b3AxWzBdWzFdLCBzdG9wMVswXVsyXSwgcHJvZ3JhbWExKSkNCg0KDQoJcHJvZ3JhbWFjYW8gPSAnXG4nLmpvaW4odGl0bGVzKQ0KCXRyeToNCgkJeGJtYy5leGVjdXRlYnVpbHRpbigiQWN0aXZhdGVXaW5kb3coMTAxNDcpIikNCgkJd2luZG93ID0geGJtY2d1aS5XaW5kb3coMTAxNDcpDQoJCXhibWMuc2xlZXAoMTAwKQ0KCQl3aW5kb3cuZ2V0Q29udHJvbCgxKS5zZXRMYWJlbCgnTGl2ZSF0IFRWJykNCgkJd2luZG93LmdldENvbnRyb2woNSkuc2V0VGV4dChwcm9ncmFtYWNhbykNCglleGNlcHQ6DQoJCXBhc3MNCg0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBUSFJFQURTICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KZnJvbSB0aHJlYWRpbmcgaW1wb3J0IFRocmVhZA0KDQpjbGFzcyBUaHJlYWRXaXRoUmV0dXJuVmFsdWUoVGhyZWFkKToNCglkZWYgX19pbml0X18oc2VsZiwgZ3JvdXA9Tm9uZSwgdGFyZ2V0PU5vbmUsIG5hbWU9Tm9uZSwNCgkJCQkgYXJncz0oKSwga3dhcmdzPXt9LCBWZXJib3NlPU5vbmUpOg0KCQlUaHJlYWQuX19pbml0X18oc2VsZiwgZ3JvdXAsIHRhcmdldCwgbmFtZSwgYXJncywga3dhcmdzLCBWZXJib3NlKQ0KCQlzZWxmLl9yZXR1cm4gPSBOb25lDQoJZGVmIHJ1bihzZWxmKToNCgkJaWYgc2VsZi5fVGhyZWFkX190YXJnZXQgaXMgbm90IE5vbmU6DQoJCQlzZWxmLl9yZXR1cm4gPSBzZWxmLl9UaHJlYWRfX3RhcmdldCgqc2VsZi5fVGhyZWFkX19hcmdzLA0KCQkJCQkJCQkJCQkJKipzZWxmLl9UaHJlYWRfX2t3YXJncykNCglkZWYgam9pbihzZWxmKToNCgkJVGhyZWFkLmpvaW4oc2VsZikNCgkJcmV0dXJuIHNlbGYuX3JldHVybg0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMJCQkJCQkJCQkJCQlBZGRvbiBGaWxtZXMgZSBTZXJpZXMJCQkJCQkJCQkgICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQpkZWYgbGlzdGFtZW51c3Nlcmllcyhub21lX25vdix1cmwsZXN0aWxvLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsaWNvbmltYWdlLGZhbmFydCk6DQoJY2hlY2tfbG9naW4gPSBsb2dpbjIoKQ0KCWlmIGNoZWNrX2xvZ2luID09IFRydWU6DQoJCW1lbnVTZXJpZXMob3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Nlcmllcy5wbmcnKSxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL3Nlcmllc19mYW5hcnQucG5nJykNCgllbHNlOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnRXJybyBhIGZhemVyIGxvZ2luIG5lc3RhIHBhcnRlLiBUZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZS4nKQ0KDQpkZWYgbGlzdGFtZW51c2ZpbG1lcyhub21lX25vdix1cmwsZXN0aWxvLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsaWNvbmltYWdlLGZhbmFydCk6DQoJY2hlY2tfbG9naW4gPSBsb2dpbjIoKQ0KCWlmIGNoZWNrX2xvZ2luID09IFRydWU6DQoJCWRhdGFiYXNlID0gRGF0YWJhc2UuaXNFeGlzdHMoKQ0KCQlpZiB0aXBvX3VzZXIgIT0gJ1Rlc3RlJzoNCgkJCWZpbG1pbGluayA9IHVybCsnZW5pZ21hMi5waHA/dXNlcm5hbWU9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fbmFtZSIpKycmcGFzc3dvcmQ9JytfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fcGFzc3dvcmQiKSsnJnR5cGU9Z2V0X3ZvZF9jYXRlZ29yaWVzJw0KCQkJYWRkRGlyKCdGaWxtZXMgZGEgTGlzdGEnLGZpbG1pbGluayxOb25lLDMzMzcsJ01pbmlhdHVyYScsb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ZpbG1lcy5wbmcnKSwnJywnJywnJywnJyxvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZnVuZG9fYWRkb24ucG5nJykpDQoJCW1lbnVGaWxtZXMob3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2ZpbG1lcy5wbmcnKSxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL2ZpbG1lc19mYW5hcnQucG5nJykNCgllbHNlOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnRXJybyBhIGZhemVyIGxvZ2luIG5lc3RhIHBhcnRlLiBUZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZS4nKQ0KDQpkZWYgbGlzdGFtZW51c2FuaW1lcyhub21lX25vdix1cmwsZXN0aWxvLHRpcG8sdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsaWNvbmltYWdlLGZhbmFydCk6DQoJY2hlY2tfbG9naW4gPSBsb2dpbjIoKQ0KCWlmIGNoZWNrX2xvZ2luID09IFRydWU6DQoJCW1lbnVBbmltZXMob3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2FuaW1lcy5wbmcnKSxfX1NJVEVBZGRvbl9fKydJbWFnZW5zL3Nlcmllc19mYW5hcnQucG5nJykNCgllbHNlOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnRXJybyBhIGZhemVyIGxvZ2luIG5lc3RhIHBhcnRlLiBUZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZS4nKQ0KDQpkZWYgbWVudUZpbG1lcyhpY29uaW1hZ2UsZmFuYXJ0KToNCglldmVudG8gPSBnZXRFdmVudG9zKCkNCglpZiBldmVudG86DQoJCWFkZERpcjIoJ1tCXScrZXZlbnRvKydbL0JdJywgX19TSVRFRklMTUVTX18rJ2V2ZW50by8xJywgMTExLCAnZmlsbWVzJywgaWNvbmltYWdlLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoJCWFkZERpcjIoJyAnLCAnJywgMCwgJycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICduYWRhLnBuZycpLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoJYWRkRGlyMignVG9kb3Mgb3MgRmlsbWVzJywgX19TSVRFRklMTUVTX18rJ2ZpbG1lcycsIDExMSwgJ2ZpbG1lcycsIGljb25pbWFnZSwgMSwgTm9uZSwgTm9uZSwgZmFuYXJ0KQ0KCWFkZERpcjIoJ0ZpbG1lcyBlbSBEZXN0YXF1ZScsICBfX1NJVEVGSUxNRVNfXysnZmlsbWVzL2Rlc3RhcXVlJywgMTExLCAnZmlsbWVzJywgaWNvbmltYWdlLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoJYWRkRGlyMignRmlsbWVzIHBvciBBbm8nLCBfX1NJVEVGSUxNRVNfXysnZmlsbWVzL2FubycsIDExOSwgJ2xpc3RhZ2VtQW5vcycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdhbm8ucG5nJyksIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCglhZGREaXIyKCdGaWxtZXMgcG9yIEdlbmVybycsIF9fU0lURUZJTE1FU19fKydmaWxtZXMvY2F0ZWdvcmlhJywgMTE4LCAnbGlzdGFnZW1HZW5lcm9zJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2dlbmVyby5wbmcnKSwgMSwgTm9uZSwgTm9uZSwgZmFuYXJ0KQ0KDQoJdmlzdGFfbWVudSgpDQoNCmRlZiBtZW51U2VyaWVzKGljb25pbWFnZSxmYW5hcnQpOg0KCWRhdGFiYXNlID0gRGF0YWJhc2UuaXNFeGlzdHMoKQ0KCWFkZERpcjIoJ1RvZGFzIGFzIFNlcmllcycsIF9fU0lURUZJTE1FU19fKydzZXJpZXMnLCAxMjMsICdzZXJpZXMnLCBpY29uaW1hZ2UsIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCglhZGREaXIyKCdTZXJpZXMgZW0gRGVzdGFxdWUnLCAgX19TSVRFRklMTUVTX18rJ3Nlcmllcy9kZXN0YXF1ZScsIDEyMywgJ3NlcmllcycsIGljb25pbWFnZSwgMSwgTm9uZSwgTm9uZSwgZmFuYXJ0KQ0KCWFkZERpcjIoJ1NlcmllcyBwb3IgQW5vJywgX19TSVRFRklMTUVTX18rJ3Nlcmllcy9hbm8nLCAxMTksICdsaXN0YWdlbUFub3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnYW5vLnBuZycpLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoJYWRkRGlyMignU2VyaWVzIHBvciBHZW5lcm8nLCBfX1NJVEVGSUxNRVNfXysnc2VyaWVzL2NhdGVnb3JpYScsIDExOCwgJ2xpc3RhZ2VtR2VuZXJvcycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdnZW5lcm8ucG5nJyksIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCg0KCXZpc3RhX21lbnUoKQ0KDQpkZWYgbWVudUFuaW1lcyhpY29uaW1hZ2UsZmFuYXJ0KToNCglkYXRhYmFzZSA9IERhdGFiYXNlLmlzRXhpc3RzKCkNCglhZGREaXIyKCdUb2RvcyBvcyBBbmltZXMnLCBfX1NJVEVGSUxNRVNfXysnYW5pbWVzJywgMTIzLCAnYW5pbWVzJywgaWNvbmltYWdlLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoJYWRkRGlyMignQW5pbWVzIGVtIERlc3RhcXVlJywgIF9fU0lURUZJTE1FU19fKydhbmltZXMvZGVzdGFxdWUnLCAxMjMsICdhbmltZXMnLCBpY29uaW1hZ2UsIDEsIE5vbmUsIE5vbmUsIGZhbmFydCkNCglhZGREaXIyKCdBbmltZXMgcG9yIEFubycsIF9fU0lURUZJTE1FU19fKydhbmltZXMvYW5vJywgMTE5LCAnbGlzdGFnZW1Bbm9zJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Fuby5wbmcnKSwgMSwgTm9uZSwgTm9uZSwgZmFuYXJ0KQ0KCWFkZERpcjIoJ0FuaW1lcyBwb3IgR2VuZXJvJywgX19TSVRFRklMTUVTX18rJ2FuaW1lcy9jYXRlZ29yaWEnLCAxMTgsICdsaXN0YWdlbUdlbmVyb3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAnZ2VuZXJvLnBuZycpLCAxLCBOb25lLCBOb25lLCBmYW5hcnQpDQoNCgl2aXN0YV9tZW51KCkNCg0KZGVmIHJlbW92ZXJBY2VudG9zKHR4dCwgZW5jb2Rpbmc9J3V0Zi04Jyk6DQoJcmV0dXJuIG5vcm1hbGl6ZSgnTkZLRCcsIHR4dC5kZWNvZGUoZW5jb2RpbmcpKS5lbmNvZGUoJ0FTQ0lJJywnaWdub3JlJykNCg0KZGVmIGZpbG1lcyh1cmwsIHBhZ2luYSk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJcmVzdWx0YWRvID0gYWJyaXJfdXJsKHVybCwgaGVhZGVyPWhlYWRlcnMpDQoJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJZm9yIGkgaW4gcmVzdWx0YWRvWydkYXRhJ106DQoJCWNhdGVnb3JpYSA9IGlbJ2NhdGVnb3JpYTEnXQ0KCQlpZiBpWydjYXRlZ29yaWEyJ10gIT0gJyc6DQoJCQljYXRlZ29yaWEgKz0gJywnK2lbJ2NhdGVnb3JpYTInXQ0KCQlpZiBpWydjYXRlZ29yaWEzJ10gIT0gJyc6DQoJCQljYXRlZ29yaWEgKz0gJywnK2lbJ2NhdGVnb3JpYTMnXQ0KCQl2aXN0byA9IEZhbHNlDQoJCXB0ID0gJycNCgkJY29yID0gIndoaXRlIg0KCQliciA9ICcnDQoJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQliciA9ICdbQl1bQ09MT1IgZ3JlZW5dQlsvQ09MT1JdW0NPTE9SIHllbGxvd11SWy9DT0xPUl06IFsvQl0nDQoJCWlmICdQb3J0dScgaW4gY2F0ZWdvcmlhOg0KCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQlpZiAnUFQnIGluIGlbJ0lNQkQnXToNCgkJCWlbJ0lNQkQnXSA9IHJlLmNvbXBpbGUoJyguKz8pUFQnKS5maW5kYWxsKGlbJ0lNQkQnXSlbMF0NCgkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJaWYgaVsndmlzdG8nXSA9PSAxOg0KCQkJdmlzdG8gPSBUcnVlDQoNCgkJaW5mb0xhYmVscyA9IHsnVGl0bGUnOiBpWydub21lX2luZ2xlcyddLCAnWWVhcic6IGlbJ2FubyddLCAnR2VucmUnOiBjYXRlZ29yaWEsICdQbG90JzogaVsnZGVzY3JpY2FvX3ZpZGVvJ10sICdDYXN0JzppWydhdG9yZXMnXS5zcGxpdCgnLCcpLCAnVHJhaWxlcic6IGlbJ3RyYWlsZXInXSwgJ0RpcmVjdG9yJzogaVsnZGlyZXRvciddLCAnUmF0aW5nJzogaVsnaW1kYlJhdGluZyddLCAnSU1EQk51bWJlcic6IGlbJ0lNQkQnXSB9DQoJCQ0KCQl0cnk6DQoJCQlub21lID0gaVsnbm9tZV9pbmdsZXMnXS5kZWNvZGUoJ3V0Zi04JykNCgkJZXhjZXB0Og0KCQkJbm9tZSA9IGlbJ25vbWVfaW5nbGVzJ10uZW5jb2RlKCd1dGYtOCcpDQoJCWlmICdodHRwJyBub3QgaW4gaVsnZm90byddOg0KCQkJaVsnZm90byddID0gX19TSVRFRklMTUVTMl9fKydpbWFnZXMvY2FwYXMvJytpWydmb3RvJ10uc3BsaXQoJy8nKVstMV0NCgkJDQoJCW5vbWVlZSA9ICdbQ09MT1IgJytjb3IrJ10nK3B0K2JyK3JlbW92ZXJBY2VudG9zKG5vbWUpKycgKCcraVsnYW5vJ10rJylbL0NPTE9SXScNCgkJdXJsbm9vID0gX19TSVRFRklMTUVTX18rJ2ZpbG1lLycrc3RyKGlbJ2lkX3ZpZGVvJ10pDQoJCWZvdG9vbyA9IGlbJ2ZvdG8nXQ0KCQlmYW5hcnR0dCA9IF9fU0lURUZJTE1FUzJfXytpWydiYWNrZ3JvdW5kJ10NCgkJYWRkVmlkZW8obm9tZWVlLCB1cmxub28sIDExMywgZm90b29vLHZpc3RvLCAnZmlsbWUnLCAwLCAwLCBpbmZvTGFiZWxzLCBmYW5hcnR0dCwgdHJhaWxlcj1pWyd0cmFpbGVyJ10pDQoJCQ0KCWN1cnJlbnQgPSByZXN1bHRhZG9bJ21ldGEnXVsncGFnaW5hdGlvbiddWydjdXJyZW50X3BhZ2UnXQ0KCXRvdGFsID0gcmVzdWx0YWRvWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsndG90YWxfcGFnZXMnXQ0KCXRyeTogcHJveGltbyA9IHJlc3VsdGFkb1snbWV0YSddWydwYWdpbmF0aW9uJ11bJ2xpbmtzJ11bJ25leHQnXQ0KCWV4Y2VwdDogcGFzcyANCglpZiBjdXJyZW50IDwgdG90YWw6DQoJCWFkZERpcjIoJ1Byw7N4aW1hIHDDoWdpbmEgKCcrc3RyKGN1cnJlbnQpKycvJytzdHIodG90YWwpKycpJywgcHJveGltbywgMTExLCAnZmlsbWVzJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Byb3hpbW8ucG5nJyksMSkNCgl2aXN0YV9maWxtZXNTZXJpZXMoKQ0KDQpkZWYgc2VyaWVzKHVybCk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJcmVzdWx0YWRvID0gYWJyaXJfdXJsKHVybCwgaGVhZGVyPWhlYWRlcnMpDQoJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJaWYgJ3NlcmllJyBpbiB1cmw6DQoJCXRpcG8gPSAnc2VyaWUnDQoJZWxpZiAnYW5pbWUnIGluIHVybDoNCgkJdGlwbyA9ICdhbmltZScNCglmb3IgaSBpbiByZXN1bHRhZG9bJ2RhdGEnXToNCgkJY2F0ZWdvcmlhID0gaVsnY2F0ZWdvcmlhMSddDQoJCWlmIGlbJ2NhdGVnb3JpYTInXSAhPSAnJzoNCgkJCWNhdGVnb3JpYSArPSAnLCcraVsnY2F0ZWdvcmlhMiddDQoJCWlmIGlbJ2NhdGVnb3JpYTMnXSAhPSAnJzoNCgkJCWNhdGVnb3JpYSArPSAnLCcraVsnY2F0ZWdvcmlhMyddDQoJCWJyID0gJycNCgkJcHQgPSAnJw0KCQlpZiAnQnJhc2lsZWlybycgaW4gY2F0ZWdvcmlhOg0KCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQlpZiAnUG9ydHUnIGluIGNhdGVnb3JpYToNCgkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJaWYgJ1BUJyBpbiBpWydJTUJEJ106DQoJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCWluZm9MYWJlbHMgPSB7J1RpdGxlJzogaVsnbm9tZV9pbmdsZXMnXSwgJ1llYXInOiBpWydhbm8nXSwgJ0dlbnJlJzogY2F0ZWdvcmlhLCAnUGxvdCc6IGlbJ2Rlc2NyaWNhb192aWRlbyddLCAnQ2FzdCc6aVsnYXRvcmVzJ10uc3BsaXQoJywnKSwgJ1RyYWlsZXInOiBpWyd0cmFpbGVyJ10sICdEaXJlY3Rvcic6IGlbJ2RpcmV0b3InXSwgJ1JhdGluZyc6IGlbJ2ltZGJSYXRpbmcnXSwgJ0NvZGUnOiBpWydJTUJEJ10gfQ0KCQ0KCQl0cnk6DQoJCQlub21lID0gaVsnbm9tZV9pbmdsZXMnXS5kZWNvZGUoJ3V0Zi04JykNCgkJZXhjZXB0Og0KCQkJbm9tZSA9IGlbJ25vbWVfaW5nbGVzJ10uZW5jb2RlKCd1dGYtOCcpDQoJCWlmICdodHRwJyBub3QgaW4gaVsnZm90byddOg0KCQkJaVsnZm90byddID0gX19TSVRFRklMTUVTMl9fKydpbWFnZXMvY2FwYXMvJytpWydmb3RvJ10uc3BsaXQoJy8nKVstMV0NCgkJaWYgaVsndmlzdG8nXSA9PSAxOg0KCQkJdmlzdG89VHJ1ZQ0KCQllbHNlOg0KCQkJdmlzdG89RmFsc2UNCgkJDQoJCW5vbWVlZSA9IHB0K2JyK3JlbW92ZXJBY2VudG9zKG5vbWUpKycgKCcraVsnYW5vJ10rJyknDQoJCWFkZERpcjIobm9tZWVlLCBfX1NJVEVGSUxNRVNfXyt0aXBvKycvJytzdHIoaVsnaWRfdmlkZW8nXSksIDExNCwgJ3RlbXBvcmFkYXMnLCBpWydmb3RvJ10sIHRpcG89J3NlcmllJywgaW5mb0xhYmVscz1pbmZvTGFiZWxzLHBvc3Rlcj1fX1NJVEVGSUxNRVMyX18raVsnYmFja2dyb3VuZCddLHZpc3RvPXZpc3RvKQ0KCQ0KCWN1cnJlbnQgPSByZXN1bHRhZG9bJ21ldGEnXVsncGFnaW5hdGlvbiddWydjdXJyZW50X3BhZ2UnXQ0KCXRvdGFsID0gcmVzdWx0YWRvWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsndG90YWxfcGFnZXMnXQ0KCXRyeTogcHJveGltbyA9IHJlc3VsdGFkb1snbWV0YSddWydwYWdpbmF0aW9uJ11bJ2xpbmtzJ11bJ25leHQnXQ0KCWV4Y2VwdDogcGFzcyANCglpZiBjdXJyZW50IDwgdG90YWw6DQoJCWFkZERpcjIoJ1Byb3hpbWEgcGFnaW5hICgnK3N0cihjdXJyZW50KSsnLycrc3RyKHRvdGFsKSsnKScsIHByb3hpbW8sIDEyMywgJ3NlcmllcycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdwcm94aW1vLnBuZycpKQ0KCQ0KCXZpc3RhX2ZpbG1lc1NlcmllcygpDQoNCmRlZiBnZXRTZWFzb25zKHVybCk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJcmVzdWx0YWRvID0gYWJyaXJfdXJsKHVybCwgaGVhZGVyPWhlYWRlcnMpDQoJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJaj0xDQoJd2hpbGUgaiA8PSByZXN1bHRhZG9bJ3RlbXBvcmFkYXMnXToNCgkJYWRkRGlyMigiW0JdVGVtcG9yYWRhWy9CXSAiK3N0cihqKSwgdXJsKycvdGVtcG9yYWRhLycrc3RyKGopLCAxMTUsICdlcGlzb2Rpb3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCd0ZW1wb3JhZGFzJywgJ3RlbXBvcmFkYScrc3RyKGopKycucG5nJykscG9zdGVyPV9fU0lURUZJTE1FUzJfXytyZXN1bHRhZG9bJ2JhY2tncm91bmQnXSkNCgkJais9MQ0KCQ0KCXZpc3RhX3RlbXBvcmFkYXMoKQ0KDQpkZWYgZ2V0RXBpc29kZXModXJsKToNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCglyZXN1bHRhZG8gPSBhYnJpcl91cmwodXJsLCBoZWFkZXI9aGVhZGVycykNCglpZiByZXN1bHRhZG8gPT0gJ0ROUyc6DQoJCV9fQUxFUlRBX18oJ0xpdmUhdC1UVicsICdUZW0gZGUgYWx0ZXJhciBvcyBETlMgcGFyYSBwb2RlciB1c3VmcnVpciBkbyBhZGRvbi4nKQ0KCQlyZXR1cm4gRmFsc2UNCglyZXN1bHRhZG8gPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCglpZiAnc2VyaWUnIGluIHVybDoNCgkJdGlwbyA9ICdzZXJpZScNCgllbGlmICdhbmltZScgaW4gdXJsOg0KCQl0aXBvID0gJ2FuaW1lJw0KCWhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJXMnICUgX19BRERPTl9fLmdldFNldHRpbmcoJ3Rva2VuTXJwaXJhY3knKQ0KCXJlc3VsdGFkb1MgPSBhYnJpcl91cmwoX19TSVRFRklMTUVTX18rdGlwbysnLycrdXJsLnNwbGl0KCcvJylbNV0sIGhlYWRlcj1oZWFkZXJzKQ0KCXJlc3VsdGFkb1MgPSBqc29uLmxvYWRzKHJlc3VsdGFkb1MpDQoJZm9yIGkgaW4gcmVzdWx0YWRvWydkYXRhJ106DQoJCWlmIGlbJ1VSTCddID09ICcnIGFuZCBpWydVUkwyJ10gPT0gJyc6DQoJCQljb250aW51ZQ0KCQlwdCA9ICcnDQoJCWNhdGVnb3JpYSA9IHJlc3VsdGFkb1NbJ2NhdGVnb3JpYTEnXQ0KCQlpZiByZXN1bHRhZG9TWydjYXRlZ29yaWEyJ10gIT0gJyc6DQoJCQljYXRlZ29yaWEgKz0gJywnK3Jlc3VsdGFkb1NbJ2NhdGVnb3JpYTInXQ0KCQlpZiByZXN1bHRhZG9TWydjYXRlZ29yaWEzJ10gIT0gJyc6DQoJCQljYXRlZ29yaWEgKz0gJywnK3Jlc3VsdGFkb1NbJ2NhdGVnb3JpYTMnXQ0KCQlpbmZvTGFiZWxzID0geydUaXRsZSc6IGlbJ25vbWVfZXBpc29kaW8nXSwgJ0NvZGUnOiBpWydJTUJEJ10sICdFcGlzb2RlJzogaVsnZXBpc29kaW8nXSwgJ1NlYXNvbic6IGlbJ3RlbXBvcmFkYSddIH0NCgkJdHJ5Og0KCQkJbm9tZSA9IGlbJ25vbWVfZXBpc29kaW8nXS5kZWNvZGUoJ3V0Zi04JykNCgkJZXhjZXB0Og0KCQkJbm9tZSA9IGlbJ25vbWVfZXBpc29kaW8nXS5lbmNvZGUoJ3V0Zi04JykNCgkJYnIgPSAnJw0KCQlmaW5hbCA9ICcnDQoJCXNlbUxlZ2VuZGEgPSAnJw0KCQlpZiBpWydmaW10ZW1wb3JhZGEnXSA9PSAxOg0KCQkJZmluYWwgPSAnW0JdRmluYWwgZGEgVGVtcG9yYWRhIFsvQl0nDQoJCWlmIGlbJ3NlbWxlZ2VuZGEnXSA9PSAxOg0KCQkJc2VtTGVnZW5kYSA9ICdbQ09MT1IgcmVkXVtCXVMvIExFR0VOREEgWy9CXVsvQ09MT1JdJw0KCQlpZiAnQnJhc2lsZWlybycgaW4gY2F0ZWdvcmlhOg0KCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQlpZiAnUG9ydHUnIGluIGNhdGVnb3JpYToNCgkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJaWYgJ1BUJyBpbiBpWydJTUJEJ106DQoJCQlpWydJTUJEJ10gPSByZS5jb21waWxlKCcoLis/KVBUJykuZmluZGFsbChpWydJTUJEJ10pWzBdDQoJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCXZpc3RvID0gRmFsc2UNCgkJY29yID0gJ3doaXRlJw0KCQlpZiBpWyd2aXN0byddID09IDE6DQoJCQl2aXN0byA9IFRydWUJDQoJCQ0KCQlpbWFnZW0gPSAnJw0KCQlpZiBpWydpbWFnZW0nXSA9PSAxOg0KCQkJaW1hZ2VtID0gX19TSVRFRklMTUVTMl9fKydpbWFnZXMvc2VyaWVzLycraVsnSU1CRCddKycuanBnJw0KCQllbGlmIGlbJ2ltYWdlbSddID09IDA6DQoJCQlpbWFnZW0gPSBfX1NJVEVGSUxNRVMyX18rJ2ltYWdlcy9jYXBhcy8nK2lbJ2ltZGJTZXJpZSddKycuanBnJw0KCQkJDQoJCW5vbWVlZSA9IHB0K2JyK2ZpbmFsK3NlbUxlZ2VuZGErJ1tDT0xPUiAnK2NvcisnXVtCXUVwaXNvZGlvICcrc3RyKGlbJ2VwaXNvZGlvJ10pKydbL0JdWy9DT0xPUl0gJytyZW1vdmVyQWNlbnRvcyhub21lKQ0KCQlhZGRWaWRlbyhub21lZWUsIF9fU0lURUZJTE1FU19fK3RpcG8rJy8nK3N0cihpWydpZF9zZXJpZSddKSsnL2VwaXNvZGlvLycrc3RyKGlbJ2lkX2VwaXNvZGlvJ10pLCAxMTMsIGltYWdlbSwgdmlzdG8sICdlcGlzb2RpbycsIGlbJ3RlbXBvcmFkYSddLCBpWydlcGlzb2RpbyddLCBpbmZvTGFiZWxzLCBfX1NJVEVGSUxNRVMyX18raVsnYmFja2dyb3VuZCddKQ0KCQ0KCXZpc3RhX2VwaXNvZGlvcygpDQoNCmRlZiBnZXRHZW5lcm9zKHVybCk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJcmVzdWx0YWRvID0gYWJyaXJfdXJsKF9fU0lURUZJTE1FU19fKydjYXRlZ29yaWFzJywgaGVhZGVyPWhlYWRlcnMpDQoJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoNCglmb3IgaSBpbiByZXN1bHRhZG86DQoJCWlmIGlbJ2lkX2NhdGVnb3JpYSddID09IDA6DQoJCQljb250aW51ZQ0KCQlpZiAnZmlsbWUnIG5vdCBpbiB1cmwgYW5kIGlbJ3RpcG8nXSA9PSAxOg0KCQkJY29udGludWUNCgkJYWRkRGlyMihpWydjYXRlZ29yaWFzJ10sIHVybCsnLycrc3RyKGlbJ2lkX2NhdGVnb3JpYSddKSwgMTIyLCAnY2F0ZWdvcmlhcycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdnZW5lcm8ucG5nJykpDQoJDQoJdmlzdGFfbWVudSgpDQoNCmRlZiBjYXRlZ29yaWFzKHVybCk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJcmVzdWx0YWRvID0gYWJyaXJfdXJsKHVybCwgaGVhZGVyPWhlYWRlcnMpDQoJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJcmVzdWx0YWRvYSA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCQ0KCWZvciBpIGluIHJlc3VsdGFkb2FbImRhdGEiXToNCgkJaWYgJ2ZpbG1lJyBpbiB1cmw6DQoJCQlyZXN1bHRhZG8gPSBhYnJpcl91cmwoX19TSVRFRklMTUVTX18rJ2ZpbG1lLycrc3RyKGlbJ2lkX3ZpZGVvJ10pLCBoZWFkZXI9aGVhZGVycykNCgkJCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCQkJY2F0ZWdvcmlhID0gcmVzdWx0YWRvWydjYXRlZ29yaWExJ10NCgkJCWlmIHJlc3VsdGFkb1snY2F0ZWdvcmlhMiddICE9ICcnOg0KCQkJCWNhdGVnb3JpYSArPSAnLCcrcmVzdWx0YWRvWydjYXRlZ29yaWEyJ10NCgkJCWlmIHJlc3VsdGFkb1snY2F0ZWdvcmlhMyddICE9ICcnOg0KCQkJCWNhdGVnb3JpYSArPSAnLCcrcmVzdWx0YWRvWydjYXRlZ29yaWEzJ10NCgkJCQ0KCQkJdHJ5Og0KCQkJCW5vbWUgPSByZXN1bHRhZG9bJ25vbWVfaW5nbGVzJ10uZGVjb2RlKCd1dGYtOCcpDQoJCQlleGNlcHQ6DQoJCQkJbm9tZSA9IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXS5lbmNvZGUoJ3V0Zi04JykNCgkJCWlmICdodHRwJyBub3QgaW4gcmVzdWx0YWRvWydmb3RvJ106DQoJCQkJcmVzdWx0YWRvWydmb3RvJ10gPSBfX1NJVEVGSUxNRVNfXysnaW1hZ2VzL2NhcGFzLycrcmVzdWx0YWRvWydmb3RvJ10uc3BsaXQoJy8nKVstMV0NCgkJCXB0ID0gJycNCgkJCWJyID0gJycNCgkJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BvcnR1JyBpbiBjYXRlZ29yaWE6DQoJCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQkJY29yID0gIndoaXRlIg0KCQkJaWYgJ1BUJyBpbiBpWydJTUJEJ106DQoJCQkJaVsnSU1CRCddID0gcmUuY29tcGlsZSgnKC4rPylQVCcpLmZpbmRhbGwoaVsnSU1CRCddKVswXQ0KCQkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJCXZpc3RvID0gRmFsc2UNCgkJCQ0KCQkJaW5mb0xhYmVscyA9IHsnVGl0bGUnOiByZXN1bHRhZG9bJ25vbWVfaW5nbGVzJ10sICdZZWFyJzogcmVzdWx0YWRvWydhbm8nXSwgJ0dlbnJlJzogY2F0ZWdvcmlhLCAnUGxvdCc6cmVzdWx0YWRvWydkZXNjcmljYW9fdmlkZW8nXSwgJ0Nhc3QnOnJlc3VsdGFkb1snYXRvcmVzJ10uc3BsaXQoJywnKSwgJ1RyYWlsZXInOiByZXN1bHRhZG9bJ3RyYWlsZXInXSwgJ0RpcmVjdG9yJzogcmVzdWx0YWRvWydkaXJldG9yJ10sICdSYXRpbmcnOiByZXN1bHRhZG9bJ2ltZGJSYXRpbmcnXSwgJ0lNREJOdW1iZXInOiByZXN1bHRhZG9bJ0lNQkQnXSB9DQoJCQlub21lZWUgPSAnW0NPTE9SICcrY29yKyddJytwdCticityZW1vdmVyQWNlbnRvcyhub21lKSsnICgnK2lbJ2FubyddKycpWy9DT0xPUl0nDQoJCQl1cmxub28gPSBfX1NJVEVGSUxNRVNfXysnZmlsbWUvJytzdHIocmVzdWx0YWRvWydpZF92aWRlbyddKQ0KCQkJZm90b29vID0gcmVzdWx0YWRvWydmb3RvJ10NCgkJCWZhbmFydHR0ID0gX19TSVRFRklMTUVTMl9fK3Jlc3VsdGFkb1snYmFja2dyb3VuZCddDQoJCQlhZGRWaWRlbyhub21lZWUsIHVybG5vbywgMTEzLCBmb3Rvb28sdmlzdG8sICdwbGF5ZXInLCAwLCAwLCBpbmZvTGFiZWxzLCBmYW5hcnR0dCwgdHJhaWxlcj1yZXN1bHRhZG9bJ3RyYWlsZXInXSkNCgkJZWxpZiAnc2VyaWUnIGluIHVybCBvciAnYW5pbWUnIGluIHVybDoNCgkJCWNvciA9ICJ3aGl0ZSINCgkJCWlmICdzZXJpZScgaW4gdXJsOg0KCQkJCXRpcG8gPSAnc2VyaWUnDQoJCQllbGlmICdhbmltZScgaW4gdXJsOg0KCQkJCXRpcG8gPSAnYW5pbWUnDQoJCQlyZXN1bHRhZG8gPSBhYnJpcl91cmwoX19TSVRFRklMTUVTX18rdGlwbysnLycrc3RyKGlbJ2lkX3ZpZGVvJ10pLCBoZWFkZXI9aGVhZGVycykNCgkJCXJlc3VsdGFkbyA9IGpzb24ubG9hZHMocmVzdWx0YWRvKQ0KCQkJY2F0ZWdvcmlhID0gcmVzdWx0YWRvWydjYXRlZ29yaWExJ10NCgkJCWlmIHJlc3VsdGFkb1snY2F0ZWdvcmlhMiddICE9ICcnOg0KCQkJCWNhdGVnb3JpYSArPSAnLCcrcmVzdWx0YWRvWydjYXRlZ29yaWEyJ10NCgkJCWlmIHJlc3VsdGFkb1snY2F0ZWdvcmlhMyddICE9ICcnOg0KCQkJCWNhdGVnb3JpYSArPSAnLCcrcmVzdWx0YWRvWydjYXRlZ29yaWEzJ10NCgkJCXB0ID0gJycNCgkJCWJyID0gJycNCgkJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BvcnR1JyBpbiBjYXRlZ29yaWE6DQoJCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BUJyBpbiByZXN1bHRhZG9bJ0lNQkQnXToNCgkJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCQl0cnk6DQoJCQkJbm9tZSA9IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXS5kZWNvZGUoJ3V0Zi04JykNCgkJCWV4Y2VwdDoNCgkJCQlub21lID0gcmVzdWx0YWRvWydub21lX2luZ2xlcyddLmVuY29kZSgndXRmLTgnKQ0KCQkJaWYgJ2h0dHAnIG5vdCBpbiByZXN1bHRhZG9bJ2ZvdG8nXToNCgkJCQlyZXN1bHRhZG9bJ2ZvdG8nXSA9IF9fU0lURUZJTE1FU19fKydpbWFnZXMvY2FwYXMvJytyZXN1bHRhZG9bJ2ZvdG8nXS5zcGxpdCgnLycpWy0xXQ0KCQkJdmlzdG8gPSBGYWxzZQ0KCQkJaWYgcmVzdWx0YWRvWyd2aXN0byddID09IDE6DQoJCQkJdmlzdG89VHJ1ZQ0KCQkJDQoJCQlpbmZvTGFiZWxzID0geydUaXRsZSc6IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXSwgJ1llYXInOiByZXN1bHRhZG9bJ2FubyddLCAnR2VucmUnOiBjYXRlZ29yaWEsICdQbG90JzogcmVzdWx0YWRvWydkZXNjcmljYW9fdmlkZW8nXSwgJ0Nhc3QnOnJlc3VsdGFkb1snYXRvcmVzJ10uc3BsaXQoJywnKSwgJ1RyYWlsZXInOiByZXN1bHRhZG9bJ3RyYWlsZXInXSwgJ0RpcmVjdG9yJzogcmVzdWx0YWRvWydkaXJldG9yJ10sICdSYXRpbmcnOiByZXN1bHRhZG9bJ2ltZGJSYXRpbmcnXSwgJ0NvZGUnOiByZXN1bHRhZG9bJ0lNQkQnXSB9DQoJCQkNCgkJCW5vbWVlZSA9IHB0K2JyK3JlbW92ZXJBY2VudG9zKG5vbWUpKycgKCcraVsnYW5vJ10rJyknDQoJCQlhZGREaXIyKG5vbWVlZSwgX19TSVRFRklMTUVTX18rdGlwbysnLycrc3RyKHJlc3VsdGFkb1snaWRfdmlkZW8nXSksIDExNCwgJ3RlbXBvcmFkYXMnLCByZXN1bHRhZG9bJ2ZvdG8nXSwgdGlwbz0nc2VyaWUnLCBpbmZvTGFiZWxzPWluZm9MYWJlbHMscG9zdGVyPV9fU0lURUZJTE1FUzJfXytyZXN1bHRhZG9bJ2JhY2tncm91bmQnXSx2aXN0bz12aXN0bykNCgkNCgljdXJyZW50ID0gcmVzdWx0YWRvYVsnbWV0YSddWydwYWdpbmF0aW9uJ11bJ2N1cnJlbnRfcGFnZSddDQoJdG90YWwgPSByZXN1bHRhZG9hWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsndG90YWxfcGFnZXMnXQ0KCXRyeTogcHJveGltbyA9IHJlc3VsdGFkb2FbJ21ldGEnXVsncGFnaW5hdGlvbiddWydsaW5rcyddWyduZXh0J10NCglleGNlcHQ6IHBhc3MgDQoJaWYgY3VycmVudCA8IHRvdGFsOg0KCQlhZGREaXIyKCdQcsOzeGltYSBww6FnaW5hICgnK3N0cihjdXJyZW50KSsnLycrc3RyKHRvdGFsKSsnKScsIHByb3hpbW8sIDEyMSwgJ2Fub3MnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAncHJveGltby5wbmcnKSwxKQ0KCQ0KCXZpc3RhX2ZpbG1lc1NlcmllcygpDQoNCmRlZiBnZXRZZWFycyh1cmwpOg0KCWhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJXMnICUgX19BRERPTl9fLmdldFNldHRpbmcoJ3Rva2VuTXJwaXJhY3knKQ0KCWNvbnRldWRvID0gYWJyaXJfdXJsKF9fU0lURUZJTE1FUzJfXysnZmlsbWVzLnBocCcsIGhlYWRlcj1oZWFkZXJzKQ0KCW1hdGNoID0gcmUuY29tcGlsZSgnXD9hbm9zPS4rP1wiPlxzKzxpbWcuKz8+XHMrKC4rPyk8XC8nKS5maW5kYWxsKGNvbnRldWRvKQ0KCQ0KCWZvciBpIGluIG1hdGNoOg0KCQlhZGREaXIyKGksIHVybCsnLycraSwgMTIxLCAnYW5vcycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdhbm8ucG5nJykpDQoJCQ0KCXZpc3RhX21lbnUoKQ0KDQpkZWYgYW5vcyh1cmwpOg0KCWhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJXMnICUgX19BRERPTl9fLmdldFNldHRpbmcoJ3Rva2VuTXJwaXJhY3knKQ0KCXJlc3VsdGFkbyA9IGFicmlyX3VybCh1cmwsIGhlYWRlcj1oZWFkZXJzKQ0KCWlmIHJlc3VsdGFkbyA9PSAnRE5TJzoNCgkJX19BTEVSVEFfXygnTGl2ZSF0LVRWJywgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCXJldHVybiBGYWxzZQ0KCXJlc3VsdGFkb2EgPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCgkNCglmb3IgaSBpbiByZXN1bHRhZG9hWyJkYXRhIl06DQoJCWlmICdmaWxtZScgaW4gdXJsOg0KCQkJcmVzdWx0YWRvID0gYWJyaXJfdXJsKF9fU0lURUZJTE1FU19fKydmaWxtZS8nK3N0cihpWydpZF92aWRlbyddKSwgaGVhZGVyPWhlYWRlcnMpDQoJCQlyZXN1bHRhZG8gPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCgkJCWNhdGVnb3JpYSA9IHJlc3VsdGFkb1snY2F0ZWdvcmlhMSddDQoJCQlpZiByZXN1bHRhZG9bJ2NhdGVnb3JpYTInXSAhPSAnJzoNCgkJCQljYXRlZ29yaWEgKz0gJywnK3Jlc3VsdGFkb1snY2F0ZWdvcmlhMiddDQoJCQlpZiByZXN1bHRhZG9bJ2NhdGVnb3JpYTMnXSAhPSAnJzoNCgkJCQljYXRlZ29yaWEgKz0gJywnK3Jlc3VsdGFkb1snY2F0ZWdvcmlhMyddDQoJCQkNCgkJCXZpc3RvID0gRmFsc2UNCgkJCXB0ID0gJycNCgkJCWJyID0gJycNCgkJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BvcnR1JyBpbiBjYXRlZ29yaWE6DQoJCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQkJY29yID0gIndoaXRlIg0KCQkJaWYgJ1BUJyBpbiBpWydJTUJEJ106DQoJCQkJaVsnSU1CRCddID0gcmUuY29tcGlsZSgnKC4rPylQVCcpLmZpbmRhbGwoaVsnSU1CRCddKVswXQ0KCQkJCXB0ID0gJ1tCXVtDT0xPUiBncmVlbl1QWy9DT0xPUl1bQ09MT1IgcmVkXVRbL0NPTE9SXTogWy9CXScNCgkJCWlmIGlbJ3Zpc3RvJ10gPT0gMToNCgkJCQl2aXN0byA9IFRydWUNCgkJCQ0KCQkJdHJ5Og0KCQkJCW5vbWUgPSByZXN1bHRhZG9bJ25vbWVfaW5nbGVzJ10uZGVjb2RlKCd1dGYtOCcpDQoJCQlleGNlcHQ6DQoJCQkJbm9tZSA9IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXS5lbmNvZGUoJ3V0Zi04JykNCgkJCWlmICdodHRwJyBub3QgaW4gcmVzdWx0YWRvWydmb3RvJ106DQoJCQkJcmVzdWx0YWRvWydmb3RvJ10gPSBfX1NJVEVGSUxNRVMyX18rJ2ltYWdlcy9jYXBhcy8nK3Jlc3VsdGFkb1snZm90byddLnNwbGl0KCcvJylbLTFdDQoJDQoJCQlpbmZvTGFiZWxzID0geydUaXRsZSc6IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXSwgJ1llYXInOiByZXN1bHRhZG9bJ2FubyddLCAnR2VucmUnOiBjYXRlZ29yaWEsICdQbG90JzpyZXN1bHRhZG9bJ2Rlc2NyaWNhb192aWRlbyddLCAnQ2FzdCc6cmVzdWx0YWRvWydhdG9yZXMnXS5zcGxpdCgnLCcpLCAnVHJhaWxlcic6IHJlc3VsdGFkb1sndHJhaWxlciddLCAnRGlyZWN0b3InOiByZXN1bHRhZG9bJ2RpcmV0b3InXSwgJ1JhdGluZyc6IHJlc3VsdGFkb1snaW1kYlJhdGluZyddLCAnSU1EQk51bWJlcic6IHJlc3VsdGFkb1snSU1CRCddIH0NCgkJCW5vbWVlZSA9ICdbQ09MT1IgJytjb3IrJ10nK3B0K2JyK3JlbW92ZXJBY2VudG9zKG5vbWUpKycgKCcraVsnYW5vJ10rJylbL0NPTE9SXScNCgkJCXVybG5vbyA9IF9fU0lURUZJTE1FU19fKydmaWxtZS8nK3N0cihyZXN1bHRhZG9bJ2lkX3ZpZGVvJ10pDQoJCQlmb3Rvb28gPSByZXN1bHRhZG9bJ2ZvdG8nXQ0KCQkJZmFuYXJ0dHQgPSBfX1NJVEVGSUxNRVMyX18rcmVzdWx0YWRvWydiYWNrZ3JvdW5kJ10NCgkJCWFkZFZpZGVvKG5vbWVlZSwgdXJsbm9vLCAxMTMsIGZvdG9vbyx2aXN0bywgJ3BsYXllcicsIDAsIDAsIGluZm9MYWJlbHMsIGZhbmFydHR0LCB0cmFpbGVyPXJlc3VsdGFkb1sndHJhaWxlciddKQ0KCQllbGlmICdzZXJpZScgaW4gdXJsIG9yICdhbmltZScgaW4gdXJsOg0KCQkJY29yID0gIndoaXRlIg0KCQkJaWYgJ3NlcmllJyBpbiB1cmw6DQoJCQkJdGlwbyA9ICdzZXJpZScNCgkJCWVsaWYgJ2FuaW1lJyBpbiB1cmw6DQoJCQkJdGlwbyA9ICdhbmltZScNCgkJCXJlc3VsdGFkbyA9IGFicmlyX3VybChfX1NJVEVGSUxNRVNfXyt0aXBvKycvJytzdHIoaVsnaWRfdmlkZW8nXSksIGhlYWRlcj1oZWFkZXJzKQ0KCQkJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJCQljYXRlZ29yaWEgPSByZXN1bHRhZG9bJ2NhdGVnb3JpYTEnXQ0KCQkJaWYgcmVzdWx0YWRvWydjYXRlZ29yaWEyJ10gIT0gJyc6DQoJCQkJY2F0ZWdvcmlhICs9ICcsJytyZXN1bHRhZG9bJ2NhdGVnb3JpYTInXQ0KCQkJaWYgcmVzdWx0YWRvWydjYXRlZ29yaWEzJ10gIT0gJyc6DQoJCQkJY2F0ZWdvcmlhICs9ICcsJytyZXN1bHRhZG9bJ2NhdGVnb3JpYTMnXQ0KCQkJcHQ9JycNCgkJCWJyID0gJycNCgkJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BvcnR1JyBpbiBjYXRlZ29yaWE6DQoJCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQkJaWYgJ1BUJyBpbiByZXN1bHRhZG9bJ0lNQkQnXToNCgkJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCQl0cnk6DQoJCQkJbm9tZSA9IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXS5kZWNvZGUoJ3V0Zi04JykNCgkJCWV4Y2VwdDoNCgkJCQlub21lID0gcmVzdWx0YWRvWydub21lX2luZ2xlcyddLmVuY29kZSgndXRmLTgnKQ0KCQkJaWYgJ2h0dHAnIG5vdCBpbiByZXN1bHRhZG9bJ2ZvdG8nXToNCgkJCQlyZXN1bHRhZG9bJ2ZvdG8nXSA9IF9fU0lURUZJTE1FUzJfXysnaW1hZ2VzL2NhcGFzLycrcmVzdWx0YWRvWydmb3RvJ10uc3BsaXQoJy8nKVstMV0NCgkJCWlmIHJlc3VsdGFkb1sndmlzdG8nXSA9PSAxOg0KCQkJCXZpc3RvPVRydWUNCgkJCWVsc2U6DQoJCQkJdmlzdG89RmFsc2UNCgkJCWluZm9MYWJlbHMgPSB7J1RpdGxlJzogcmVzdWx0YWRvWydub21lX2luZ2xlcyddLCAnWWVhcic6IHJlc3VsdGFkb1snYW5vJ10sICdHZW5yZSc6IGNhdGVnb3JpYSwgJ1Bsb3QnOiByZXN1bHRhZG9bJ2Rlc2NyaWNhb192aWRlbyddLCAnQ2FzdCc6cmVzdWx0YWRvWydhdG9yZXMnXS5zcGxpdCgnLCcpLCAnVHJhaWxlcic6IHJlc3VsdGFkb1sndHJhaWxlciddLCAnRGlyZWN0b3InOiByZXN1bHRhZG9bJ2RpcmV0b3InXSwgJ1JhdGluZyc6IHJlc3VsdGFkb1snaW1kYlJhdGluZyddLCAnQ29kZSc6IHJlc3VsdGFkb1snSU1CRCddIH0NCgkJCQ0KCQkJbm9tZWVlID0gcHQrYnIrcmVtb3ZlckFjZW50b3Mobm9tZSkrJyAoJytpWydhbm8nXSsnKScNCgkJCWFkZERpcjIobm9tZWVlLCBfX1NJVEVGSUxNRVNfXyt0aXBvKycvJytzdHIocmVzdWx0YWRvWydpZF92aWRlbyddKSwgMTE0LCAndGVtcG9yYWRhcycsIHJlc3VsdGFkb1snZm90byddLCB0aXBvPSdzZXJpZScsIGluZm9MYWJlbHM9aW5mb0xhYmVscyxwb3N0ZXI9X19TSVRFRklMTUVTMl9fK3Jlc3VsdGFkb1snYmFja2dyb3VuZCddLHZpc3RvPXZpc3RvKQ0KCQ0KCWN1cnJlbnQgPSByZXN1bHRhZG9hWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsnY3VycmVudF9wYWdlJ10NCgl0b3RhbCA9IHJlc3VsdGFkb2FbJ21ldGEnXVsncGFnaW5hdGlvbiddWyd0b3RhbF9wYWdlcyddDQoJdHJ5OiBwcm94aW1vID0gcmVzdWx0YWRvYVsnbWV0YSddWydwYWdpbmF0aW9uJ11bJ2xpbmtzJ11bJ25leHQnXQ0KCWV4Y2VwdDogcGFzcyANCglpZiBjdXJyZW50IDwgdG90YWw6DQoJCWFkZERpcjIoJ1Byw7N4aW1hIHDDoWdpbmEgKCcrc3RyKGN1cnJlbnQpKycvJytzdHIodG90YWwpKycpJywgcHJveGltbywgMTIxLCAnYW5vcycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdwcm94aW1vLnBuZycpLDEpDQoJDQoJdmlzdGFfZmlsbWVzU2VyaWVzKCkNCg0KZGVmIGdldEV2ZW50b3MoKToNCgloZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICVzJyAlIF9fQURET05fXy5nZXRTZXR0aW5nKCd0b2tlbk1ycGlyYWN5JykNCgkNCglyZXN1bHRhZG8gPSBhYnJpcl91cmwoX19TSVRFRklMTUVTX18rJ2V2ZW50b3MnLCBoZWFkZXI9aGVhZGVycykNCglyZXN1bHRhZG8gPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCgl0cnk6DQoJCWlmIHJlc3VsdGFkb1snY29kaWdvJ10gPT0gMjA0Og0KCQkJcmV0dXJuIEZhbHNlDQoJZXhjZXB0Og0KCQlwYXNzDQoJcmV0dXJuIHJlc3VsdGFkb1snZGF0YSddWydub21lJ10NCgkJDQoJCQ0KZGVmIHBsYXllcihuYW1lLHVybCxpY29uaW1hZ2UsdGVtcG9yYWRhLGVwaXNvZGlvLHNlcmllTm9tZSk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJcmVzdWx0YWRvID0gYWJyaXJfdXJsKHVybCwgaGVhZGVyPWhlYWRlcnMpDQoJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQlfX0FMRVJUQV9fKCdMaXZlIXQtVFYnLCAnVGVtIGRlIGFsdGVyYXIgb3MgRE5TIHBhcmEgcG9kZXIgdXN1ZnJ1aXIgZG8gYWRkb24uJykNCgkJcmV0dXJuIEZhbHNlDQoJDQoJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJaW5mb2xhYmVscyA9IGRpY3QoKQ0KDQoJcGFzdGFEYXRhID0gJycNCglpZiAnZmlsbWUnIGluIHVybDoNCgkJaW5mb2xhYmVsc1snQ29kZSddID0gcmVzdWx0YWRvWydJTUJEJ10NCgkJaW5mb2xhYmVsc1snWWVhciddID0gcmVzdWx0YWRvWydhbm8nXQ0KCQlpZFZpZGVvID0gcmVzdWx0YWRvWydpZF92aWRlbyddDQoJCW5vbWUgPSByZXN1bHRhZG9bJ25vbWVfaW5nbGVzJ10NCgkJdGVtcG9yYWRhID0gMA0KCQllcGlzb2RpbyA9IDANCgllbHNlOg0KCQlpZFZpZGVvID0gcmVzdWx0YWRvWydpZF9zZXJpZSddDQoJCW5vbWUgPSByZXN1bHRhZG9bJ25vbWVfZXBpc29kaW8nXQ0KCQl0ZW1wb3JhZGEgPSByZXN1bHRhZG9bJ3RlbXBvcmFkYSddDQoJCWVwaXNvZGlvID0gcmVzdWx0YWRvWydlcGlzb2RpbyddDQoNCgltZW5zYWdlbXByb2dyZXNzbyA9IHhibWNndWkuRGlhbG9nUHJvZ3Jlc3MoKQ0KCW1lbnNhZ2VtcHJvZ3Jlc3NvLmNyZWF0ZSgnTGl2ZSF0LVRWJywgdSdBYnJpciBlbWlzc8OjbycsJ1BvciBmYXZvciBhZ3VhcmRlLi4uJykNCgltZW5zYWdlbXByb2dyZXNzby51cGRhdGUoMjUsICIiLCB1J09idGVyIHZpZGVvIGUgbGVnZW5kYScsICIiKQ0KDQoJc3RyZWFtLCBsZWdlbmRhLCBleHRfZyA9IGdldFN0cmVhbUxlZ2VuZGEocmVzdWx0YWRvKQ0KDQoJbWVuc2FnZW1wcm9ncmVzc28udXBkYXRlKDUwLCAiIiwgdSdQcmVwYXJhLXRlLCB2YWkgY29tZcOnYXIhJywgIiIpDQoNCglwbGF5bGlzdCA9IHhibWMuUGxheUxpc3QoMSkNCglwbGF5bGlzdC5jbGVhcigpDQoJbGlzdGl0ZW0gPSB4Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT0iRGVmYXVsdFZpZGVvLnBuZyIsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCg0KCWxpc3RpdGVtLnNldEluZm8odHlwZT0iVmlkZW8iLCBpbmZvTGFiZWxzPWluZm9sYWJlbHMpDQoJbGlzdGl0ZW0uc2V0UHJvcGVydHkoJ21pbWV0eXBlJywgJ3ZpZGVvL3gtbXN2aWRlbycpDQoJbGlzdGl0ZW0uc2V0UHJvcGVydHkoJ0lzUGxheWFibGUnLCAndHJ1ZScpDQoJDQoJbGlzdGl0ZW0uc2V0UGF0aChwYXRoPXN0cmVhbSkNCglwbGF5bGlzdC5hZGQoc3RyZWFtLCBsaXN0aXRlbSkNCgl4Ym1jcGx1Z2luLnNldFJlc29sdmVkVXJsKGludChzeXMuYXJndlsxXSksIFRydWUsIGxpc3RpdGVtKQ0KCW1lbnNhZ2VtcHJvZ3Jlc3NvLnVwZGF0ZSg3NSwgIiIsIHUnQm9hIFNlc3PDo28hISEnLCAiIikNCg0KCWlmIHN0cmVhbSA9PSBGYWxzZToNCgkJX19BTEVSVEFfXygnTGl2ZSF0LVRWJywgJ08gc2Vydmlkb3IgZXNjb2xoaWRvIG7Do28gZGlzcG9uw612ZWwsIGVzY29saGEgb3V0cm8gb3UgdGVudGUgbm92YW1lbnRlIG1haXMgdGFyZGUuJykNCgllbHNlOg0KCQkjX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ1N0cmVhbTogJytzdHJlYW0pDQoJCXBsYXllcl9tciA9IFBsYXllci5QbGF5ZXIodXJsPXVybCwgaWRGaWxtZT1pZFZpZGVvLCBwYXN0YURhdGE9X19QQVNUQV9EQURPU19fLCB0ZW1wb3JhZGE9dGVtcG9yYWRhLCBlcGlzb2Rpbz1lcGlzb2Rpbywgbm9tZT1uYW1lLCBsb2dvPW9zLnBhdGguam9pbihfX0FERE9OX0ZPTERFUl9fLCdpY29uLnBuZycpKQ0KCQkNCgkJbWVuc2FnZW1wcm9ncmVzc28uY2xvc2UoKQ0KCQlwbGF5ZXJfbXIucGxheShwbGF5bGlzdCkNCgkJcGxheWVyX21yLnNldFN1YnRpdGxlcyhsZWdlbmRhKQ0KDQoJCXdoaWxlIHBsYXllcl9tci5wbGF5aW5nOg0KCQkJeGJtYy5zbGVlcCg1MDAwKQ0KCQkJI3BsYXllcl9tci50cmFja2VyVGVtcG8oKQ0KDQpkZWYgZ2V0U3RyZWFtTGVnZW5kYShyZXN1bHRhZG8pOg0KCWkgPSAwDQoJc2Vydmlkb3JlcyA9IFtdDQoJdGl0dWxvcyA9IFtdDQoJaWYgcmVzdWx0YWRvWydVUkwnXSAhPSAnJzoNCgkJaSs9MQ0KCQlzZXJ2aWRvcmVzLmFwcGVuZChyZXN1bHRhZG9bJ1VSTCddKQ0KCQlpZiAnb3BlbmxvYWQnIGluIHJlc3VsdGFkb1snVVJMJ106DQoJCQlub21lID0gIk9wZW5Mb2FkIg0KCQllbGlmICd2aWR6aScgaW4gcmVzdWx0YWRvWydVUkwnXToNCgkJCW5vbWUgPSAnVmlkemknDQoJCWVsaWYgJ2dvb2dsZScgaW4gcmVzdWx0YWRvWydVUkwnXSBvciAnY2xvdWQubWFpbC5ydScgaW4gcmVzdWx0YWRvWydVUkwnXToNCgkJCW5vbWUgPSAnTGl2ZSF0LVRWJw0KCQllbGlmICd1cHRvc3RyZWFtLmNvbScgaW4gcmVzdWx0YWRvWydVUkwnXToNCgkJCW5vbWUgPSAnVXBUb1N0cmVhbScNCgkJZWxpZiAncmFwaWR2aWRlby5jb20nIGluIHJlc3VsdGFkb1snVVJMJ10gb3IgJ3JhcHR1JyBpbiByZXN1bHRhZG9bJ1VSTCddOg0KCQkJbm9tZSA9ICdSYXBpZFZpZGVvJw0KCQl0aXR1bG9zLmFwcGVuZCgnU2Vydmlkb3IgIyVzOiAlcycgJSAoaSwgbm9tZSkpDQoJaWYgcmVzdWx0YWRvWydVUkwyJ10gIT0gJyc6DQoJCWkrPTENCgkJc2Vydmlkb3Jlcy5hcHBlbmQocmVzdWx0YWRvWydVUkwyJ10pDQoJCWlmICdvcGVubG9hZCcgaW4gcmVzdWx0YWRvWydVUkwyJ106DQoJCQlub21lID0gIk9wZW5Mb2FkIg0KCQllbGlmICd2aWR6aScgaW4gcmVzdWx0YWRvWydVUkwyJ106DQoJCQlub21lID0gJ1ZpZHppJw0KCQllbGlmICdnb29nbGUnIGluIHJlc3VsdGFkb1snVVJMMiddIG9yICdjbG91ZC5tYWlsLnJ1JyBpbiByZXN1bHRhZG9bJ1VSTDInXToNCgkJCW5vbWUgPSAnTGl2ZSF0LVRWJw0KCQllbGlmICd1cHRvc3RyZWFtLmNvbScgaW4gcmVzdWx0YWRvWydVUkwyJ106DQoJCQlub21lID0gJ1VwVG9TdHJlYW0nDQoJCWVsaWYgJ3JhcGlkdmlkZW8uY29tJyBpbiByZXN1bHRhZG9bJ1VSTDInXSBvciAncmFwdHUnIGluIHJlc3VsdGFkb1snVVJMMiddOg0KCQkJbm9tZSA9ICdSYXBpZFZpZGVvJw0KCQl0aXR1bG9zLmFwcGVuZCgnU2Vydmlkb3IgIyVzOiAlcycgJSAoaSwgbm9tZSkpDQoJdHJ5Og0KCQlpZiByZXN1bHRhZG9bJ1VSTDMnXSAhPSAnJzoNCgkJCWkrPTENCgkJCXNlcnZpZG9yZXMuYXBwZW5kKHJlc3VsdGFkb1snVVJMMyddKQ0KCQkJaWYgJ29wZW5sb2FkJyBpbiByZXN1bHRhZG9bJ1VSTDMnXToNCgkJCQlub21lID0gIk9wZW5Mb2FkIg0KCQkJZWxpZiAndmlkemknIGluIHJlc3VsdGFkb1snVVJMMyddOg0KCQkJCW5vbWUgPSAnVmlkemknDQoJCQllbGlmICdnb29nbGUnIGluIHJlc3VsdGFkb1snVVJMMyddIG9yICdjbG91ZC5tYWlsLnJ1JyBpbiByZXN1bHRhZG9bJ1VSTDMnXToNCgkJCQlub21lID0gJ0xpdmUhdC1UVicNCgkJCWVsaWYgJ3VwdG9zdHJlYW0uY29tJyBpbiByZXN1bHRhZG9bJ1VSTDMnXToNCgkJCQlub21lID0gJ1VwVG9TdHJlYW0nDQoJCQllbGlmICdyYXBpZHZpZGVvLmNvbScgaW4gcmVzdWx0YWRvWydVUkwzJ10gb3IgJ3JhcHR1JyBpbiByZXN1bHRhZG9bJ1VSTDMnXToNCgkJCQlub21lID0gJ1JhcGlkVmlkZW8nDQoJCQl0aXR1bG9zLmFwcGVuZCgnU2Vydmlkb3IgIyVzOiAlcycgJSAoaSwgbm9tZSkpDQoJZXhjZXB0Og0KCQlwYXNzDQoJdHJ5Og0KCQlpZiByZXN1bHRhZG9bJ1VSTDQnXSAhPSAnJzoNCgkJCWkrPTENCgkJCXNlcnZpZG9yZXMuYXBwZW5kKHJlc3VsdGFkb1snVVJMNCddKQ0KCQkJaWYgJ29wZW5sb2FkJyBpbiByZXN1bHRhZG9bJ1VSTDQnXToNCgkJCQlub21lID0gIk9wZW5Mb2FkIg0KCQkJZWxpZiAndmlkemknIGluIHJlc3VsdGFkb1snVVJMNCddOg0KCQkJCW5vbWUgPSAnVmlkemknDQoJCQllbGlmICdnb29nbGUnIGluIHJlc3VsdGFkb1snVVJMNCddIG9yICdjbG91ZC5tYWlsLnJ1JyBpbiByZXN1bHRhZG9bJ1VSTDQnXToNCgkJCQlub21lID0gJ0xpdmUhdC1UVicNCgkJCWVsaWYgJ3VwdG9zdHJlYW0uY29tJyBpbiByZXN1bHRhZG9bJ1VSTDQnXToNCgkJCQlub21lID0gJ1VwVG9TdHJlYW0nDQoJCQllbGlmICdyYXBpZHZpZGVvLmNvbScgaW4gcmVzdWx0YWRvWydVUkw0J10gb3IgJ3JhcHR1JyBpbiByZXN1bHRhZG9bJ1VSTDQnXToNCgkJCQlub21lID0gJ1JhcGlkVmlkZW8nDQoJCQl0aXR1bG9zLmFwcGVuZCgnU2Vydmlkb3IgIyVzOiAlcycgJSAoaSwgbm9tZSkpDQoJZXhjZXB0Og0KCQlwYXNzDQoJbGVnZW5kYSA9ICcnDQoJc3RyZWFtID0gJycNCglpZiAnOi8vJyBpbiByZXN1bHRhZG9bJ2xlZ2VuZGEnXSBvciByZXN1bHRhZG9bJ2xlZ2VuZGEnXSA9PSAnJzoNCgkJbGVnZW5kYSA9IF9fU0lURUFQSV9fKydzdWJzLyVzLnNydCcgJSByZXN1bHRhZG9bJ0lNQkQnXQ0KCWVsaWYgcmVzdWx0YWRvWydsZWdlbmRhJ10gIT0gJyc6DQoJCWlmIG5vdCAnLnNydCcgaW4gcmVzdWx0YWRvWydsZWdlbmRhJ106DQoJCQlyZXN1bHRhZG9bJ2xlZ2VuZGEnXSA9IHJlc3VsdGFkb1snbGVnZW5kYSddKycuc3J0Jw0KCQlsZWdlbmRhID0gX19TSVRFQVBJX18rJ3N1YnMvJXMnICUgcmVzdWx0YWRvWydsZWdlbmRhJ10NCgl0cnk6DQoJCWlmIHJlc3VsdGFkb1snc2VtbGVnZW5kYSddID09IDE6DQoJCQlsZWdlbmRhID0gJycNCglleGNlcHQ6DQoJCXBhc3MNCglleHRfZyA9ICdjb2lzbycNCglsZWdlbmRhQXV4ID0gbGVnZW5kYQ0KCXNlcnZpZG9yID0gMA0KCWlmIGxlbih0aXR1bG9zKSA+IDE6DQoJCXNlcnZpZG9yID0geGJtY2d1aS5EaWFsb2coKS5zZWxlY3QoJ0VzY29saGEgbyBzZXJ2aWRvcicsIHRpdHVsb3MpDQoJZWxzZToNCgkJc2Vydmlkb3IgPSAwDQoJDQoJaWYgJ3ZpZHppJyBpbiBzZXJ2aWRvcmVzW3NlcnZpZG9yXToNCgkJdmlkemkgPSBVUkxSZXNvbHZlck1lZGlhLlZpZHppKHNlcnZpZG9yZXNbc2Vydmlkb3JdKQ0KCQlzdHJlYW0gPSB2aWR6aS5nZXRNZWRpYVVybCgpDQoJCWxlZ2VuZGEgPSB2aWR6aS5nZXRTdWJ0aXRsZSgpDQoJZWxpZiAndXB0b3N0cmVhbS5jb20nIGluIHNlcnZpZG9yZXNbc2Vydmlkb3JdOg0KCQlzdHJlYW0gPSBVUkxSZXNvbHZlck1lZGlhLlVwVG9TdHJlYW0oc2Vydmlkb3Jlc1tzZXJ2aWRvcl0pLmdldE1lZGlhVXJsKCkNCgllbGlmICdzZXJ2ZXIubXJwaXJhY3kud2luJyBpbiBzZXJ2aWRvcmVzW3NlcnZpZG9yXToNCgkJc3RyZWFtID0gc2Vydmlkb3Jlc1tzZXJ2aWRvcl0NCgllbGlmICdvcGVubG9hZCcgaW4gc2Vydmlkb3Jlc1tzZXJ2aWRvcl06DQoJCXN0cmVhbSA9IFVSTFJlc29sdmVyTWVkaWEuT3BlbkxvYWQoc2Vydmlkb3Jlc1tzZXJ2aWRvcl0pLmdldE1lZGlhVXJsKCkNCgkJbGVnZW5kYSA9IFVSTFJlc29sdmVyTWVkaWEuT3BlbkxvYWQoc2Vydmlkb3Jlc1tzZXJ2aWRvcl0pLmdldFN1YnRpdGxlKCkNCgkJaWYgbm90ICcudnR0JyBpbiBsZWdlbmRhOg0KCQkJbGVnZW5kYSA9IGxlZ2VuZGFBdXgNCgllbGlmICdkcml2ZS5nb29nbGUuY29tLycgaW4gc2Vydmlkb3Jlc1tzZXJ2aWRvcl06DQoJCXN0cmVhbSwgZXh0X2cgPSBVUkxSZXNvbHZlck1lZGlhLkdvb2dsZVZpZGVvKHNlcnZpZG9yZXNbc2Vydmlkb3JdKS5nZXRNZWRpYVVybCgpDQoJZWxpZiAnY2xvdWQubWFpbC5ydScgaW4gc2Vydmlkb3Jlc1tzZXJ2aWRvcl06DQoJCXN0cmVhbSwgZXh0X2cgPSBVUkxSZXNvbHZlck1lZGlhLkNsb3VkTWFpbFJ1KHNlcnZpZG9yZXNbc2Vydmlkb3JdKS5nZXRNZWRpYVVybCgpDQoJZWxpZiAncmFwaWR2aWRlby5jb20nIGluIHNlcnZpZG9yZXNbc2Vydmlkb3JdIG9yICdyYXB0dScgaW4gc2Vydmlkb3Jlc1tzZXJ2aWRvcl06DQoJCXJhcGlkID0gVVJMUmVzb2x2ZXJNZWRpYS5SYXBpZFZpZGVvKHNlcnZpZG9yZXNbc2Vydmlkb3JdKQ0KCQlzdHJlYW0gPSByYXBpZC5nZXRNZWRpYVVybCgpDQoJCWxlZ2VuZGEgPSByYXBpZC5nZXRMZWdlbmRhKCkNCgkNCglyZXR1cm4gc3RyZWFtLCBsZWdlbmRhLCBleHRfZw0KDQoNCmRlZiBwZXNxdWlzYSh1cmwsc2VydnVzcyk6DQoJY29kaWdvX2ZvbnRlID0gJycNCglkYWRvcyA9ICcnDQoJbmV0ID0gTmV0KCkNCgluZXQuc2V0X2Nvb2tpZXMoX19DT09LSUVfRklMRV9fKQ0KCWhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJXMnICUgX19BRERPTl9fLmdldFNldHRpbmcoJ3Rva2VuTXJwaXJhY3knKQ0KCXRhYmVsYSA9ICcnDQoJc3RyUGVzcXVpc2EgPSAnJw0KCWlmICdmaWxtZXMnIGluIHVybDoNCgkJZmljaGVpcm8gPSBvcy5wYXRoLmpvaW4oX19QQVNUQV9EQURPU19fLCdmaWxtZXNfcGVzcXVpc2EubGl2ZWl0JykNCgkJdGlwbyA9IDANCgllbGlmICdzZXJpZXMnIGluIHVybDoNCgkJZmljaGVpcm8gPSBvcy5wYXRoLmpvaW4oX19QQVNUQV9EQURPU19fLCdzZXJpZXNfcGVzcXVpc2EubGl2ZWl0JykNCgkJdGlwbyA9IDENCgllbGlmICdhbmltZXMnIGluIHVybDoNCgkJZmljaGVpcm8gPSBvcy5wYXRoLmpvaW4oX19QQVNUQV9EQURPU19fLCdhbmltZXNfcGVzcXVpc2EubGl2ZWl0JykNCgkJdGlwbyA9IDINCgkNCglpZiAncGFnZScgbm90IGluIHVybDoNCgkJI3RpcG8gPSB4Ym1jZ3VpLkRpYWxvZygpLnNlbGVjdCh1J09uZGUgcXVlciBwZXNxdWlzYXI/JywgWydGaWxtZXMnLCAnU2VyaWVzJywgJ0FuaW1lcycsICdDYW5haXMnLCAnUHJhaWFzJywgJ1LDoWRpb3MnXSkNCgkJdGlwbyA9IHhibWNndWkuRGlhbG9nKCkuc2VsZWN0KHUnT25kZSBxdWVyIHBlc3F1aXNhcj8nLCBbJ0ZpbG1lcycsICdTZXJpZXMnLCAnQW5pbWVzJ10pDQoJCXRlY2xhZG8gPSB4Ym1jLktleWJvYXJkKCcnLCAnTyBxdWUgcXVlciBwZXNxdWlzYXI/JykNCgkJaWYgdGlwbyA9PSAwOg0KCQkJdXJsID0gX19TSVRFRklMTUVTX18rJ2ZpbG1lcy9wZXNxdWlzYScNCgkJCWZpY2hlaXJvID0gb3MucGF0aC5qb2luKF9fUEFTVEFfREFET1NfXywnZmlsbWVzX3Blc3F1aXNhLmxpdmVpdCcpDQoJCWVsaWYgdGlwbyA9PSAxOg0KCQkJdXJsID0gX19TSVRFRklMTUVTX18rJ3Nlcmllcy9wZXNxdWlzYScNCgkJCWZpY2hlaXJvID0gb3MucGF0aC5qb2luKF9fUEFTVEFfREFET1NfXywnc2VyaWVzX3Blc3F1aXNhLmxpdmVpdCcpDQoJCWVsaWYgdGlwbyA9PSAyOg0KCQkJdXJsID0gX19TSVRFRklMTUVTX18rJ2FuaW1lcy9wZXNxdWlzYScNCgkJCWZpY2hlaXJvID0gb3MucGF0aC5qb2luKF9fUEFTVEFfREFET1NfXywnYW5pbWVzX3Blc3F1aXNhLmxpdmVpdCcpDQoJCWVsaWYgdGlwbyA9PSAzIG9yICB0aXBvID09IDQgb3IgdGlwbyA9PSA1Og0KCQkJdXJsID0gX19TSVRFX18rJ3NlYXJjaC5waHAnDQoJCQlpZiB0aXBvID09IDM6DQoJCQkJdGFiZWxhID0gJ2NhbmFpc19rb2RpJw0KCQkJCWZpY2hlaXJvID0gb3MucGF0aC5qb2luKF9fUEFTVEFfREFET1NfXywnY2FuYWlzLmxpdmVpdCcpDQoJCQllbGlmIHRpcG8gPT0gNDoNCgkJCQl0YWJlbGEgPSAncHJhaWFzX2tvZGknDQoJCQkJZmljaGVpcm8gPSBvcy5wYXRoLmpvaW4oX19QQVNUQV9EQURPU19fLCdwcmFpYXMubGl2ZWl0JykNCgkJCWVsaWYgdGlwbyA9PSA1Og0KCQkJCXRhYmVsYSA9ICdyYWRpb3Nfa29kaScNCgkJCQlmaWNoZWlybyA9IG9zLnBhdGguam9pbihfX1BBU1RBX0RBRE9TX18sJ3JhZGlvcy5saXZlaXQnKQ0KCQkJZWxzZToNCgkJCQl0YWJlbGEgPSAncHJvZ3JhbWFzX2tvZGknDQoJCQkJZmljaGVpcm8gPSBvcy5wYXRoLmpvaW4oX19QQVNUQV9EQURPU19fLCdwcm9ncmFtYXMubGl2ZWl0JykNCgkJDQoJCWlmIHhibWN2ZnMuZXhpc3RzKGZpY2hlaXJvKToNCgkJCWYgPSBvcGVuKGZpY2hlaXJvLCAiciIpDQoJCQl0ZXh0byA9IGYucmVhZCgpDQoJCQl0ZWNsYWRvLnNldERlZmF1bHQodGV4dG8pDQoJCXRlY2xhZG8uZG9Nb2RhbCgpDQoNCgkJaWYgdGVjbGFkby5pc0NvbmZpcm1lZCgpOg0KCQkJc3RyUGVzcXVpc2EgPSB0ZWNsYWRvLmdldFRleHQoKQ0KCQkJZGFkb3MgPSB7J3Blc3F1aXNhJzogc3RyUGVzcXVpc2F9DQoJCQl0cnk6DQoJCQkJZiA9IG9wZW4oZmljaGVpcm8sIG1vZGU9InciKQ0KCQkJCWYud3JpdGUoc3RyUGVzcXVpc2EpDQoJCQkJZi5jbG9zZSgpDQoJCQlleGNlcHQ6DQoJCQkJdHJhY2ViYWNrLnByaW50X2V4YygpDQoJCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ07Do28gZ3Jhdm91IG8gY29udGV1ZG8gZW0gJytmaWNoZWlybykNCgkJCQ0KCQkJaWYgc3RyUGVzcXVpc2EgPT0gJyc6DQoJCQkJX19BTEVSVEFfXygnTGl2ZSF0LVRWJywgJ0luc2lyYSBhbGdvIG5hIHBlc3F1aXNhLicpDQoJCQkJYWRkRGlyMignQWx0ZXJhciBQZXNxdWlzYScsICd1cmwnLCA3MDAwLCAnJywgb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ3Blc3F1aXNhLnBuZycpLCAwKQ0KCQkJZWxzZToNCgkJCQlyZXN1bHRhZG8gPSBhYnJpcl91cmwodXJsLHBvc3Q9anNvbi5kdW1wcyhkYWRvcyksIGhlYWRlcj1oZWFkZXJzKQ0KCWVsc2U6DQoJCWlmIHhibWN2ZnMuZXhpc3RzKGZpY2hlaXJvKToNCgkJCWYgPSBvcGVuKGZpY2hlaXJvLCAiciIpDQoJCQl0ZXh0byA9IGYucmVhZCgpDQoJCWRhZG9zID0geydwZXNxdWlzYSc6IHRleHRvfQ0KCQkNCgkJcmVzdWx0YWRvID0gYWJyaXJfdXJsKHVybCxwb3N0PWpzb24uZHVtcHMoZGFkb3MpLCBoZWFkZXI9aGVhZGVycykNCgkNCglpZiBzdHJQZXNxdWlzYSAhPSAnJzoNCgkJaWYgcmVzdWx0YWRvID09ICdETlMnOg0KCQkJX19BTEVSVEFfXygnTGl2ZSF0LVRWJywgJ1RlbSBkZSBhbHRlcmFyIG9zIEROUyBwYXJhIHBvZGVyIHVzdWZydWlyIGRvIGFkZG9uLicpDQoJCQlyZXR1cm4gRmFsc2UNCgkJDQoJCWlmIHRpcG8gPT0gMyBvciAgdGlwbyA9PSA0IG9yIHRpcG8gPT0gNToNCgkJCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoaW50KHN5cy5hcmd2WzFdKSxjYWNoZVRvRGlzYz1GYWxzZSkNCgkJCWlmIHN0clBlc3F1aXNhID09ICcnOg0KCQkJCV9fQUxFUlRBX18oJ0xpdmUhdC1UVicsICdJbnNpcmEgYWxnbyBuYSBwZXNxdWlzYS4nKQ0KCQkJCWFkZERpcjIoJ0FsdGVyYXIgUGVzcXVpc2EnLCAndXJsJywgNzAwMCwgJycsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdwZXNxdWlzYS5wbmcnKSwgMCkNCgkJCWVsc2U6DQoJCQkJZGFkb3MgPSB7J3NlYXJjaEJveCc6IHN0clBlc3F1aXNhLCAndGFiZWxhJzogdGFiZWxhfQ0KCQkJCWNvZGlnb19mb250ZSA9IG5ldC5odHRwX1BPU1QodXJsLCBmb3JtX2RhdGE9ZGFkb3MsIGhlYWRlcnM9X19IRUFERVJTX18pLmNvbnRlbnQuZGVjb2RlKCdsYXRpbi0xJykuZW5jb2RlKCJ1dGYtOCIpDQoJCQkJaW5mb3JtYSA9IHsNCgkJCQkJCSdzZXJ2aWRvcicgOiB7DQoJCQkJCQkJJ25vbWUnOiAnJywNCgkJCQkJCQknc2Vydic6ICcnDQoJCQkJCQl9LA0KCQkJCQkJJ3NlcnZpZG9yZXMnOiBbXSwNCgkJCQkJCSdjYW5haXMnOiBbXQ0KCQkJCQl9DQoJCQkJc3VjZXNzbyA9ICdubycNCgkJCQllbGVtcyA9IEVULmZyb21zdHJpbmcoY29kaWdvX2ZvbnRlKQ0KCQkJCQ0KCQkJCWZvciBjaGlsZGVlIGluIGVsZW1zOg0KCQkJCQlpZihjaGlsZGVlLnRhZyA9PSAnc2Vydmlkb3JlcycpOg0KCQkJCQkJc2Vydmlkb3IgPSB7DQoJCQkJCQkJJ25vbWUnOiAnJywNCgkJCQkJCQknbGluayc6ICcnDQoJCQkJCQl9DQoJCQkJCQlmb3IgZ2cgaW4gY2hpbGRlZToJDQoJCQkJCQkJaWYoZ2cudGFnID09ICdOb21lJyk6DQoJCQkJCQkJCXNlcnZpZG9yWydub21lJ10gPSBnZy50ZXh0CQ0KCQkJCQkJCWVsaWYoZ2cudGFnID09ICdTZXJ2aWRvcicpOg0KCQkJCQkJCQlzZXJ2aWRvclsnbGluayddID0gZ2cudGV4dAkJDQoJCQkJCQkJaW5mb3JtYVsnc2Vydmlkb3JlcyddLmFwcGVuZChzZXJ2aWRvcikNCgkJCQkJDQoJCQkJZm9yIHNlcnZ2dnYgaW4gaW5mb3JtYVsnc2Vydmlkb3JlcyddOg0KCQkJCQlpZihzZXJ2dnZ2Wydub21lJ10gPT0gc2VydnVzcyk6DQoJCQkJCQlpbmZvcm1hWydzZXJ2aWRvciddWydub21lJ10gPSBzZXJ2dnZ2Wydub21lJ10NCgkJCQkJCWluZm9ybWFbJ3NlcnZpZG9yJ11bJ3NlcnYnXSA9IHNlcnZ2dnZbJ2xpbmsnXQkJCQ0KCQkJCQ0KCQkJCWZvciBjaGlsZCBpbiBlbGVtczoNCgkJCQkJaWYoY2hpbGQudGFnID09ICdzdWNlc3NvJyk6DQoJCQkJCQlzdWNlc3NvID0gY2hpbGQudGV4dA0KCQkJCQllbGlmKGNoaWxkLnRhZyA9PSAnY2FuYWlzJyk6DQoJCQkJCQljYW5hbCA9IHsNCgkJCQkJCQknbm9tZSc6ICcnLA0KCQkJCQkJCSdsb2dvJzogJycsDQoJCQkJCQkJJ2xpbmsnOiAnJywNCgkJCQkJCQknZ3J1cG8nOiAnJywNCgkJCQkJCQknbm9tZWlkJzogJycsDQoJCQkJCQkJJ2lkbm92byc6ICcnDQoJCQkJCQl9DQoJCQkJCQlhZGljaW9uYSA9IFRydWUNCgkJCQkJCXBhZ2FudGUgPSBGYWxzZQ0KCQkJCQkJZm9yIGcgaW4gY2hpbGQ6DQoJCQkJCQkJYWRpY2lvbmEgPSBUcnVlDQoJCQkJCQkJaWYoZy50YWcgPT0gJ05vbWUnKToNCgkJCQkJCQkJY2FuYWxbJ25vbWUnXSA9IGcudGV4dA0KCQkJCQkJCWVsaWYoZy50YWcgPT0gJ0ltYWdlbScpOg0KCQkJCQkJCQljYW5hbFsnbG9nbyddID0gZy50ZXh0DQoJCQkJCQkJZWxpZihnLnRhZyA9PSAnUGFnYW50ZScpOg0KCQkJCQkJCQlpZihnLnRleHQgPT0gJ3RydWUnKToNCgkJCQkJCQkJCXBhZ2FudGUgPSBUcnVlDQoJCQkJCQkJZWxpZihnLnRhZyA9PSAnVXJsJyk6DQoJCQkJCQkJCXVybGNoYW1hID0gZy50ZXh0LnNwbGl0KCc7JykNCgkJCQkJCQkJdXJsbm9vID0gZy50ZXh0DQoJCQkJCQkJCXRyeToNCgkJCQkJCQkJCWlmKHNlcnZ1c3MgPT0gJ1NlcnZpZG9yMScpOg0KCQkJCQkJCQkJCXVybG5vbyA9IHVybGNoYW1hWzBdDQoJCQkJCQkJCQllbGlmKHNlcnZ1c3MgPT0gJ1NlcnZpZG9yMicpOg0KCQkJCQkJCQkJCXVybG5vbyA9IHVybGNoYW1hWzFdDQoJCQkJCQkJCQllbGlmKHNlcnZ1c3MgPT0gJ1NlcnZpZG9yMycpOg0KCQkJCQkJCQkJCXVybG5vbyA9IHVybGNoYW1hWzJdDQoJCQkJCQkJCQllbGlmKHNlcnZ1c3MgPT0gJ1NlcnZpZG9yNCcpOg0KCQkJCQkJCQkJCXVybG5vbyA9IHVybGNoYW1hWzNdDQoJCQkJCQkJCQllbGlmKHNlcnZ1c3MgPT0gJ1NlcnZpZG9yNScpOg0KCQkJCQkJCQkJCXVybG5vbyA9IHVybGNoYW1hWzRdDQoJCQkJCQkJCQllbGlmKHNlcnZ1c3MgPT0gJ1NlcnZpZG9yNicpOg0KCQkJCQkJCQkJCXVybG5vbyA9IHVybGNoYW1hWzVdDQoJCQkJCQkJCQllbGlmKHNlcnZ1c3MgPT0gJ1NlcnZpZG9yNycpOg0KCQkJCQkJCQkJCXVybG5vbyA9IHVybGNoYW1hWzZdDQoJCQkJCQkJCQllbGlmKHNlcnZ1c3MgPT0gJ1NlcnZpZG9yOCcpOg0KCQkJCQkJCQkJCXVybG5vbyA9IHVybGNoYW1hWzddDQoJCQkJCQkJCQkNCgkJCQkJCQkJCWlmKHVybG5vbyA9PSAnbmFkYScpOg0KCQkJCQkJCQkJCWFkaWNpb25hID0gRmFsc2UNCgkJCQkJCQkJCWVsc2U6DQoJCQkJCQkJCQkJaWYgcGFnYW50ZToNCgkJCQkJCQkJCQkJY2FuYWxbJ2xpbmsnXSA9IGluZm9ybWFbJ3NlcnZpZG9yJ11bJ3NlcnYnXSsnbGl2ZS91dGlsaXphZG9ybGl2ZWl0L3NlbmhhbGl2ZWl0LycrdXJsbm9vDQoJCQkJCQkJCQkJZWxzZToNCgkJCQkJCQkJCQkJY2FuYWxbJ2xpbmsnXSA9IHVybG5vbw0KCQkJCQkJCQlleGNlcHQ6DQoJCQkJCQkJCQljYW5hbFsnbGluayddID0gZy50ZXh0DQoJCQkJCQkJZWxpZihnLnRhZyA9PSAnR3J1cG8nKToNCgkJCQkJCQkJY2FuYWxbJ2dydXBvJ10gPSBnLnRleHQNCgkJCQkJCQllbGlmKGcudGFnID09ICdOb21lSUQnKToNCgkJCQkJCQkJY2FuYWxbJ25vbWVpZCddID0gZy50ZXh0DQoJCQkJCQkJZWxpZihnLnRhZyA9PSAnSUQnKToNCgkJCQkJCQkJY2FuYWxbJ2lkbm92byddID0gZy50ZXh0DQoJCQkJCQlpZiBhZGljaW9uYToNCgkJCQkJCQlpbmZvcm1hWydjYW5haXMnXS5hcHBlbmQoY2FuYWwpDQoNCgkJCQlpZiBzdWNlc3NvID09ICd5ZXMnOg0KCQkJCQlhZGREaXIyKCdBbHRlcmFyIFBlc3F1aXNhJywgJ3VybCcsIDcwMDAsICcnLCBvcy5wYXRoLmpvaW4oX19BUlRfRk9MREVSX18sIF9fU0tJTl9fLCAncGVzcXVpc2EucG5nJyksIDApDQoJCQkJCWZvciBjYW5uIGluIGluZm9ybWFbJ2NhbmFpcyddOg0KCQkJCQkJbm9tZWUgPSBjYW5uWydub21lJ10NCgkJCQkJCWltZyA9IGNhbm5bJ2xvZ28nXQ0KCQkJCQkJcnRtcCA9IGNhbm5bJ2xpbmsnXS5yZXBsYWNlKCcgcnRtcCcsJ3J0bXAnKS5yZXBsYWNlKCcgcnRzcCcsJ3J0c3AnKS5yZXBsYWNlKCcgaHR0cCcsJ2h0dHAnKS5yZXBsYWNlKCd1dGlsaXphZG9ybGl2ZWl0JyxfX0FERE9OX18uZ2V0U2V0dGluZygibG9naW5fbmFtZSIpKS5yZXBsYWNlKCdzZW5oYWxpdmVpdCcsX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX3Bhc3N3b3JkIikpDQoJCQkJCQlncnVwID0gY2FublsnZ3J1cG8nXQ0KCQkJCQkJaWRfaXQgPSBjYW5uWydub21laWQnXQ0KCQkJCQkJaWRfcCA9IGNhbm5bJ2lkbm92byddDQoJCQkJCQlzcnRfZiA9ICcnDQoJCQkJCQlkZXNjcmkgPSAnJw0KCQkJCQkJDQoJCQkJCQlhZGRMaW5rMihub21lZSxydG1wLCdodHRwOi8vbGl2ZWl0a29kaS5jb20vTG9nb3MvJytpbWcpDQoJCQkJCQ0KCQkJCQl2aXN0YV9DYW5haXMoKQ0KCQkJCQ0KCQllbHNlOg0KCQkJcmVzdWx0YWRvID0ganNvbi5sb2FkcyhyZXN1bHRhZG8pDQoJCQlpZiByZXN1bHRhZG9bJ2RhdGEnXSAhPSAnJzoNCgkJCQlpZiB0aXBvID09IDA6DQoJCQkJCWZvciBpIGluIHJlc3VsdGFkb1snZGF0YSddOg0KCQkJCQkJY2F0ZWdvcmlhID0gaVsnY2F0ZWdvcmlhMSddDQoJCQkJCQlpZiBpWydjYXRlZ29yaWEyJ10gIT0gJyc6DQoJCQkJCQkJY2F0ZWdvcmlhICs9ICcsJytpWydjYXRlZ29yaWEyJ10NCgkJCQkJCWlmIGlbJ2NhdGVnb3JpYTMnXSAhPSAnJzoNCgkJCQkJCQljYXRlZ29yaWEgKz0gJywnK2lbJ2NhdGVnb3JpYTMnXQ0KCQkJCQkJaW5mb0xhYmVscyA9IHsnVGl0bGUnOiBpWydub21lX2luZ2xlcyddLCAnWWVhcic6IGlbJ2FubyddLCAnR2VucmUnOiBjYXRlZ29yaWEsICdQbG90JzogaVsnZGVzY3JpY2FvX3ZpZGVvJ10sICdDYXN0JzppWydhdG9yZXMnXS5zcGxpdCgnLCcpLCAnVHJhaWxlcic6IGlbJ3RyYWlsZXInXSwgJ0RpcmVjdG9yJzogaVsnZGlyZXRvciddLCAnUmF0aW5nJzogaVsnaW1kYlJhdGluZyddLCAnSU1EQk51bWJlcic6IGlbJ0lNQkQnXSB9CQkJCQ0KCQkJCQkJdHJ5Og0KCQkJCQkJCW5vbWUgPSBpWydub21lX2luZ2xlcyddLmRlY29kZSgndXRmLTgnKQ0KCQkJCQkJZXhjZXB0Og0KCQkJCQkJCW5vbWUgPSBpWydub21lX2luZ2xlcyddLmVuY29kZSgndXRmLTgnKQ0KCQkJCQkJcHQgPSAnJw0KCQkJCQkJYnIgPSAnJw0KCQkJCQkJaWYgJ0JyYXNpbGVpcm8nIGluIGNhdGVnb3JpYToNCgkJCQkJCQliciA9ICdbQl1bQ09MT1IgZ3JlZW5dQlsvQ09MT1JdW0NPTE9SIHllbGxvd11SWy9DT0xPUl06IFsvQl0nDQoJCQkJCQlpZiAnUG9ydHUnIGluIGNhdGVnb3JpYToNCgkJCQkJCQlwdCA9ICdbQl1bQ09MT1IgZ3JlZW5dUFsvQ09MT1JdW0NPTE9SIHJlZF1UWy9DT0xPUl06IFsvQl0nDQoJCQkJCQljb3IgPSAid2hpdGUiDQoJCQkJCQlpZiAnaHR0cCcgbm90IGluIGlbJ2ZvdG8nXToNCgkJCQkJCQlpWydmb3RvJ10gPSBfX1NJVEVGSUxNRVMyX18rJ2ltYWdlcy9jYXBhcy8nK2lbJ2ZvdG8nXS5zcGxpdCgnLycpWy0xXQ0KCQkJCQkJaWYgJ1BUJyBpbiBpWydJTUJEJ106DQoJCQkJCQkJaVsnSU1CRCddID0gcmUuY29tcGlsZSgnKC4rPylQVCcpLmZpbmRhbGwoaVsnSU1CRCddKVswXQ0KCQkJCQkJCXB0ID0gJ1tCXVBUOiBbL0JdJw0KCQkJCQkJdmlzdG8gPSBGYWxzZQ0KCQkJCQkJDQoJCQkJCQlub21lZWUgPSBwdCtyZW1vdmVyQWNlbnRvcyhub21lKSsnICgnK2lbJ2FubyddKycpJw0KCQkJCQkJdXJsbm9vID0gX19TSVRFRklMTUVTX18rJ2ZpbG1lLycrc3RyKGlbJ2lkX3ZpZGVvJ10pDQoJCQkJCQlmb3Rvb28gPSBpWydmb3RvJ10NCgkJCQkJCWZhbmFydHR0ID0gX19TSVRFRklMTUVTMl9fK2lbJ2JhY2tncm91bmQnXQ0KCQkJCQkJYWRkVmlkZW8obm9tZWVlLCB1cmxub28sIDExMywgZm90b29vLHZpc3RvLCAnZmlsbWUnLCAwLCAwLCBpbmZvTGFiZWxzLCBmYW5hcnR0dCwgdHJhaWxlcj1pWyd0cmFpbGVyJ10pDQoJCQkJZWxpZiB0aXBvID09IDEgb3IgdGlwbyA9PSAyOg0KCQkJCQlmb3IgaSBpbiByZXN1bHRhZG9bJ2RhdGEnXToNCgkJCQkJCWNhdGVnb3JpYSA9IGlbJ2NhdGVnb3JpYTEnXQ0KCQkJCQkJaWYgaVsnY2F0ZWdvcmlhMiddICE9ICcnOg0KCQkJCQkJCWNhdGVnb3JpYSArPSAnLCcraVsnY2F0ZWdvcmlhMiddDQoJCQkJCQlpZiBpWydjYXRlZ29yaWEzJ10gIT0gJyc6DQoJCQkJCQkJY2F0ZWdvcmlhICs9ICcsJytpWydjYXRlZ29yaWEzJ10NCgkJCQkJCXB0ID0gJycNCgkJCQkJCWJyID0gJycNCgkJCQkJCWlmICdCcmFzaWxlaXJvJyBpbiBjYXRlZ29yaWE6DQoJCQkJCQkJYnIgPSAnW0JdW0NPTE9SIGdyZWVuXUJbL0NPTE9SXVtDT0xPUiB5ZWxsb3ddUlsvQ09MT1JdOiBbL0JdJw0KCQkJCQkJaWYgJ1BvcnR1JyBpbiBjYXRlZ29yaWE6DQoJCQkJCQkJcHQgPSAnW0JdW0NPTE9SIGdyZWVuXVBbL0NPTE9SXVtDT0xPUiByZWRdVFsvQ09MT1JdOiBbL0JdJw0KCQkJCQkJaW5mb0xhYmVscyA9IHsnVGl0bGUnOiBpWydub21lX2luZ2xlcyddLCAnWWVhcic6IGlbJ2FubyddLCAnR2VucmUnOiBjYXRlZ29yaWEsICdQbG90JzogaVsnZGVzY3JpY2FvX3ZpZGVvJ10sICdDYXN0JzppWydhdG9yZXMnXS5zcGxpdCgnLCcpLCAnVHJhaWxlcic6IGlbJ3RyYWlsZXInXSwgJ0RpcmVjdG9yJzogaVsnZGlyZXRvciddLCAnUmF0aW5nJzogaVsnaW1kYlJhdGluZyddLCAnQ29kZSc6IGlbJ0lNQkQnXSB9DQoJCQkJCQljb3IgPSAid2hpdGUiDQoJCQkJCQlpZiAnUFQnIGluIGlbJ0lNQkQnXToNCgkJCQkJCQlpWydJTUJEJ10gPSByZS5jb21waWxlKCcoLis/KVBUJykuZmluZGFsbChpWydJTUJEJ10pWzBdDQoJCQkJCQkJcHQgPSAnW0JdUFQ6IFsvQl0nDQoJCQkJCQl0cnk6DQoJCQkJCQkJbm9tZSA9IGlbJ25vbWVfaW5nbGVzJ10uZGVjb2RlKCd1dGYtOCcpDQoJCQkJCQlleGNlcHQ6DQoJCQkJCQkJbm9tZSA9IGlbJ25vbWVfaW5nbGVzJ10uZW5jb2RlKCd1dGYtOCcpDQoJCQkJCQlpZiAnaHR0cCcgbm90IGluIGlbJ2ZvdG8nXToNCgkJCQkJCQlpWydmb3RvJ10gPV9fU0lURUZJTE1FUzJfXysnaW1hZ2VzL2NhcGFzLycraVsnZm90byddLnNwbGl0KCcvJylbLTFdDQoJCQkJCQlpZiB0aXBvID09IDE6DQoJCQkJCQkJbGluayA9ICdzZXJpZScNCgkJCQkJCWVsaWYgdGlwbyA9PSAyOg0KCQkJCQkJCWxpbmsgPSAnYW5pbWUnDQoJCQkJCQl2aXN0bz1GYWxzZQkNCgkJCQkJCW5vbWVlZSA9IHB0K3JlbW92ZXJBY2VudG9zKG5vbWUpKycgKCcraVsnYW5vJ10rJyknDQoJCQkJCQl1cmxub28gPSBfX1NJVEVGSUxNRVNfXytsaW5rKycvJytzdHIoaVsnaWRfdmlkZW8nXSkNCgkJCQkJCWZvdG9vbyA9IGlbJ2ZvdG8nXQ0KCQkJCQkJZmFuYXJ0dHQgPSBfX1NJVEVGSUxNRVMyX18raVsnYmFja2dyb3VuZCddDQoJCQkJCQlhZGREaXIyKG5vbWVlZSwgdXJsbm9vLCAxMTQsICd0ZW1wb3JhZGFzJywgZm90b29vLCB0aXBvPSdzZXJpZScsIGluZm9MYWJlbHM9aW5mb0xhYmVscyxwb3N0ZXI9ZmFuYXJ0dHQsdmlzdG89dmlzdG8pDQoNCgkJCQljdXJyZW50ID0gcmVzdWx0YWRvWydtZXRhJ11bJ3BhZ2luYXRpb24nXVsnY3VycmVudF9wYWdlJ10NCgkJCQl0b3RhbCA9IHJlc3VsdGFkb1snbWV0YSddWydwYWdpbmF0aW9uJ11bJ3RvdGFsX3BhZ2VzJ10NCgkJCQl0cnk6IHByb3hpbW8gPSByZXN1bHRhZG9bJ21ldGEnXVsncGFnaW5hdGlvbiddWydsaW5rcyddWyduZXh0J10NCgkJCQlleGNlcHQ6IHBhc3MgDQoJCQkJaWYgY3VycmVudCA8IHRvdGFsOg0KCQkJCQlhZGREaXIyKCdQcm94aW1hIHBhZ2luYSAoJytzdHIoY3VycmVudCkrJy8nK3N0cih0b3RhbCkrJyknLCBwcm94aW1vLCAxMjAsICdwZXNxdWlzYScsIG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdwcm94aW1vLnBuZycpKQ0KCQkJCWVsc2U6DQoJCQkJCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoaW50KHN5cy5hcmd2WzFdKSxjYWNoZVRvRGlzYz1GYWxzZSkNCgkJCQl2aXN0YV9maWxtZXNTZXJpZXMoKQ0KDQoNCmRlZiBkb3dubG9hZCh1cmwsbmFtZSwgdGVtcG9yYWRhLGVwaXNvZGlvLHNlcmllTm9tZSk6DQoJaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAlcycgJSBfX0FERE9OX18uZ2V0U2V0dGluZygndG9rZW5NcnBpcmFjeScpDQoJbGlua3MgPSB1cmwuc3BsaXQoJy8nKQ0KCWlmICdmaWxtZScgaW4gdXJsOg0KCQlpZF92aWRlbyA9IGxpbmtzWy0xXQ0KCQl0aXBvID0gMA0KCWVsaWYgJ3NlcmllJyBpbiB1cmw6DQoJCWlkX3ZpZGVvID0gbGlua3NbNV0NCgkJdGVtcG9yYWRhID0gbGlua3NbN10NCgkJZXBpc29kaW8gPSBsaW5rc1stMV0NCgkJdGlwbyA9IDENCgllbGlmICdhbmltZScgaW4gdXJsOg0KCQlpZF92aWRlbyA9IGxpbmtzWzVdDQoJCXRlbXBvcmFkYSA9IGxpbmtzWzddDQoJCWVwaXNvZGlvID0gbGlua3NbLTFdDQoJCXRpcG8gPSAyDQoNCglyZXN1bHRhZG8gPSBhYnJpcl91cmwodXJsLCBoZWFkZXI9aGVhZGVycykNCglpZiByZXN1bHRhZG8gPT0gJ0ROUyc6DQoJCV9fQUxFUlRBX18oJ0xpdmUhdC1UVicsICdUZW0gZGUgYWx0ZXJhciBvcyBETlMgcGFyYSBwb2RlciB1c3VmcnVpciBkbyBhZGRvbi4nKQ0KCQlyZXR1cm4gRmFsc2UNCgkNCglyZXN1bHRhZG8gPSBqc29uLmxvYWRzKHJlc3VsdGFkbykNCg0KCXN0cmVhbSwgbGVnZW5kYSwgZXh0X2cgPSBnZXRTdHJlYW1MZWdlbmRhKHJlc3VsdGFkbykNCg0KCWZvbGRlciA9IHhibWMudHJhbnNsYXRlUGF0aChfX0FERE9OX18uZ2V0U2V0dGluZygncGFzdGFEb3dubG9hZHMnKSkNCglpZihmb2xkZXIgPT0gJ0VzY29saGEgYSBwYXN0YSBwYXJhIERvd25sb2FkJyk6DQoJCV9fQUxFUlRBX18oJ0xpdmUhdCBUVicsICdTZWxlY2Npb25lIHVtYSBwYXN0YSBwcmltZWlybyBubyBzdWJtZW51IENyZWTDqm5jaWFpcyBvdSBuYXMgQ29uZmlndXJhw6fDtWVzIGRvIEFkZG9uLicpDQoJZWxzZToNCgkJaWYgdGlwbyA+IDA6DQoJCQlpZiB0aXBvID09IDE6DQoJCQkJcmVzdWx0YWRvYSA9IGFicmlyX3VybChfX1NJVEVGSUxNRVNfXysnc2VyaWUvJytpZF92aWRlbywgaGVhZGVyPWhlYWRlcnMpDQoJCQllbGlmIHRpcG8gPT0gMjoNCgkJCQlyZXN1bHRhZG9hID0gYWJyaXJfdXJsKF9fU0lURUZJTE1FU19fKydhbmltZS8nK2lkX3ZpZGVvLCBoZWFkZXI9aGVhZGVycykNCgkJCXJlc3VsdGFkb2EgPSBqc29uLmxvYWRzKHJlc3VsdGFkb2EpDQoJCQlpZiBub3QgeGJtY3Zmcy5leGlzdHMob3MucGF0aC5qb2luKGZvbGRlciwnc2VyaWVzJykpOg0KCQkJCXhibWN2ZnMubWtkaXJzKG9zLnBhdGguam9pbihmb2xkZXIsJ3NlcmllcycpKQ0KCQkJaWYgbm90IHhibWN2ZnMuZXhpc3RzKG9zLnBhdGguam9pbihmb2xkZXIsJ3NlcmllcycscmVzdWx0YWRvYVsnbm9tZV9pbmdsZXMnXSkpOg0KCQkJCXhibWN2ZnMubWtkaXJzKG9zLnBhdGguam9pbihmb2xkZXIsJ3NlcmllcycscmVzdWx0YWRvYVsnbm9tZV9pbmdsZXMnXSkpDQoJCQlpZiBub3QgeGJtY3Zmcy5leGlzdHMob3MucGF0aC5qb2luKGZvbGRlciwnc2VyaWVzJyxyZXN1bHRhZG9hWydub21lX2luZ2xlcyddLCJUZW1wb3JhZGEgIitzdHIodGVtcG9yYWRhKSkpOg0KCQkJCXhibWN2ZnMubWtkaXJzKG9zLnBhdGguam9pbihmb2xkZXIsJ3NlcmllcycscmVzdWx0YWRvYVsnbm9tZV9pbmdsZXMnXSwiVGVtcG9yYWRhICIrc3RyKHRlbXBvcmFkYSkpKQ0KCQkJZm9sZGVyID0gb3MucGF0aC5qb2luKGZvbGRlciwgJ3NlcmllcycsIHJlc3VsdGFkb2FbJ25vbWVfaW5nbGVzJ10sICJUZW1wb3JhZGEiLCBzdHIodGVtcG9yYWRhKSkNCgkJCW5hbWUgPSAiZSIrc3RyKGVwaXNvZGlvKSsiIC0gIitjbGVhbihyZXN1bHRhZG9bJ25vbWVfZXBpc29kaW8nXSkNCgkJZWxzZToNCgkJCWlmIG5vdCB4Ym1jdmZzLmV4aXN0cyhvcy5wYXRoLmpvaW4oZm9sZGVyLCdmaWxtZXMnKSk6DQoJCQkJeGJtY3Zmcy5ta2RpcnMob3MucGF0aC5qb2luKGZvbGRlciwnZmlsbWVzJykpDQoJCQlmb2xkZXIgPSBvcy5wYXRoLmpvaW4oZm9sZGVyLCdmaWxtZXMnKQ0KCQkJbmFtZSA9IHJlc3VsdGFkb1snbm9tZV9pbmdsZXMnXQ0KDQoJCXN0cmVhbUF1eCA9IGNsZWFuKHN0cmVhbS5zcGxpdCgnLycpWy0xXSkNCgkJZXh0ZW5zYW9TdHJlYW0gPSBjbGVhbihzdHJlYW1BdXguc3BsaXQoJy4nKVstMV0pDQoNCgkJaWYgJz9taW0nIGluIGV4dGVuc2FvU3RyZWFtOg0KCQkJZXh0ZW5zYW9TdHJlYW0gPSByZS5jb21waWxlKCcoLis/KVw/bWltZT0nKS5maW5kYWxsKGV4dGVuc2FvU3RyZWFtKVswXQ0KDQoJCWlmIGV4dF9nICE9ICdjb2lzbyc6DQoJCQlleHRlbnNhb1N0cmVhbSA9IGV4dF9nDQoNCgkJbm9tZVN0cmVhbSA9IG5hbWUrJy4nK2V4dGVuc2FvU3RyZWFtDQoJCW5vbWVsZWdlbmRhID0gJycNCgkJRG93bmxvYWRlci5Eb3dubG9hZGVyKCkuZG93bmxvYWQob3MucGF0aC5qb2luKGZvbGRlci5kZWNvZGUoInV0Zi04IiksIG5vbWVTdHJlYW0pLCBzdHJlYW0sIG5hbWUpDQoJCQ0KCQlpZiBsZWdlbmRhc09uOg0KCQkJbGVnZW5kYUF1eCA9IGNsZWFuKGxlZ2VuZGEuc3BsaXQoJy8nKVstMV0pDQoJCQlleHRlbnNhb0xlZ2VuZGEgPSBjbGVhbihsZWdlbmRhQXV4LnNwbGl0KCcuJylbMV0pDQoJCQlub21lTGVnZW5kYSA9IG5hbWUrJy4nK2V4dGVuc2FvTGVnZW5kYQ0KCQkJZG93bmxvYWRfbGVnZW5kYXMobGVnZW5kYSwgb3MucGF0aC5qb2luKGZvbGRlciwgbm9tZUxlZ2VuZGEpKQ0KDQpkZWYgZG93bmxvYWRfbGVnZW5kYXModXJsLHBhdGgpOg0KCWNvbnRlbnRzID0gYWJyaXJfdXJsKHVybCkNCglpZiBjb250ZW50czoNCgkJZmggPSBvcGVuKHBhdGgsICd3JykNCgkJZmgud3JpdGUoY29udGVudHMpDQoJCWZoLmNsb3NlKCkNCglyZXR1cm4NCg0KZGVmIGNsZWFuKHRleHQpOg0KCWNvbW1hbmQ9eycmIzgyMjA7JzonIicsJyYjODIyMTsnOiciJywgJyYjODIxMTsnOictJywnJmFtcDsnOicmJywnJiM4MjE3Oyc6IiciLCcmIzgyMTY7JzoiJyJ9DQoJcmVnZXggPSByZS5jb21waWxlKCJ8Ii5qb2luKG1hcChyZS5lc2NhcGUsIGNvbW1hbmQua2V5cygpKSkpDQoJcmV0dXJuIHJlZ2V4LnN1YihsYW1iZGEgbW86IGNvbW1hbmRbbW8uZ3JvdXAoMCldLCB0ZXh0KQ0KDQpkZWYgYWRkVmlkZW8obmFtZSx1cmwsbW9kZSxpY29uaW1hZ2UsdmlzdG8sdGlwbyx0ZW1wb3JhZGEsZXBpc29kaW8saW5mb0xhYmVscyxwb3N0ZXIsdHJhaWxlcj1GYWxzZSxzZXJpZU5vbWU9RmFsc2UpOg0KCW1lbnUgPSBbXQ0KCQ0KCWlmIGluZm9MYWJlbHM6IGluZm9MYWJlbHNBdXggPSBpbmZvTGFiZWxzDQoJZWxzZTogaW5mb0xhYmVsc0F1eCA9IHsnVGl0bGUnOiBuYW1lfQ0KDQoJaWYgcG9zdGVyOiBwb3N0ZXJBdXggPSBwb3N0ZXINCgllbHNlOiBwb3N0ZXJBdXggPSBpY29uaW1hZ2UNCgkNCgl0cnk6DQoJCW5hbWUgPSBuYW1lLmVuY29kZSgndXRmLTgnKQ0KCWV4Y2VwdDoNCgkJbmFtZSA9IG5hbWUNCgkNCgl0cnk6DQoJCXNlcmllTm9tZSA9IHNlcmllTm9tZS5lbmNvZGUoJ3V0Zi04JykNCglleGNlcHQ6DQoJCXNlcmllTm9tZSA9IHNlcmllTm9tZQ0KCWVsc2U6DQoJCXBhc3MNCg0KCWZhbmFydCA9IF9fRkFOQVJUX18NCgkNCglpZiB0aXBvID09ICdmaWxtZSc6DQoJCXhibWNwbHVnaW4uc2V0Q29udGVudChpbnQoc3lzLmFyZ3ZbMV0pLCAnTW92aWVzJykNCgkJaWYgX19BRERPTl9fLmdldFNldHRpbmcoJ3RyYWlsZXItZmlsbWVzJykgPT0gJ3RydWUnOg0KCQkJdHJ5Og0KCQkJCWlkWW91dHViZSA9IHRyYWlsZXIuc3BsaXQoJz92PScpWy0xXS5zcGxpdCgnLycpWy0xXS5zcGxpdCgnPycpWzBdLnNwbGl0KCcmJylbMF0NCgkJCQlsaW5rVHJhaWxlciA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9wbGF5Lz92aWRlb19pZD0nK2lkWW91dHViZQ0KCQkJCSNpZFlvdXR1YmU9dHJhaWxlci5zcGxpdCgnPScpDQoJCQkJI19fQUxFUlRBX18oJ0xpdmUhdCBUVicsICdJRDogJytpZFlvdXR1YmVbMV0pDQoJCQkJI2xpbmtUcmFpbGVyID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlLz9wYXRoPS9yb290L3ZpZGVvJmFjdGlvbj1wbGF5X3ZpZGVvJnZpZGVvaWQ9JytpZFlvdXR1YmVbMV0NCgkJCQkjbGlua1RyYWlsZXIgPSB0cmFpbGVyDQoJCQlleGNlcHQ6DQoJCQkJbGlua1RyYWlsZXIgPSAnJw0KCQllbHNlOg0KCQkJbGlua1RyYWlsZXIgPSAnJw0KCWVsaWYgdGlwbyA9PSAnc2VyaWUnOg0KCQl4Ym1jcGx1Z2luLnNldENvbnRlbnQoaW50KHN5cy5hcmd2WzFdKSwgJ3R2c2hvd3MnKQ0KCQlpZElNRGIgPSByZS5jb21waWxlKCdpbWRiPSguKz8pJicpLmZpbmRhbGwodXJsKVswXQ0KCQlsaW5rVHJhaWxlciA9ICIiDQoJZWxpZiB0aXBvID09ICdlcGlzb2Rpbyc6DQoJCXhibWNwbHVnaW4uc2V0Q29udGVudChpbnQoc3lzLmFyZ3ZbMV0pLCAnZXBpc29kZXMnKQ0KCQlsaW5rVHJhaWxlciA9ICIiDQoJZWxzZToNCgkJeGJtY3BsdWdpbi5zZXRDb250ZW50KGludChzeXMuYXJndlsxXSksICdNb3ZpZXMnKQ0KCQlsaW5rVHJhaWxlciA9ICIiDQoJDQoJb3ZlcmxheSA9IDYNCglwbGF5Y291bnQgPSAwDQoNCglpbmZvTGFiZWxzQXV4WyJvdmVybGF5Il0gPSBvdmVybGF5DQoJaW5mb0xhYmVsc0F1eFsicGxheWNvdW50Il0gPSBwbGF5Y291bnQNCg0KCWxpej14Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT1pY29uaW1hZ2UsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCglsaXouc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScscG9zdGVyKQ0KCWxpei5zZXRJbmZvKCB0eXBlPSJWaWRlbyIsIGluZm9MYWJlbHM9aW5mb0xhYmVsc0F1eCkNCgkNCglpZiBub3Qgc2VyaWVOb21lOg0KCQlzZXJpZU5vbWUgPSAnJw0KDQoJdT1zeXMuYXJndlswXSsiP3VybD0iK3VybGxpYi5xdW90ZV9wbHVzKHVybCkrIiZtb2RlPSIrc3RyKG1vZGUpKyImdGVtcG9yYWRhPSIrc3RyKHRlbXBvcmFkYSkrIiZlcGlzb2Rpbz0iK3N0cihlcGlzb2RpbykrIiZuYW1lPSIrdXJsbGliLnF1b3RlX3BsdXMobmFtZSkrIiZpY29uaW1hZ2U9Iit1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpKyImc2VyaWVOb21lPSIrdXJsbGliLnF1b3RlX3BsdXMoc2VyaWVOb21lKQ0KCW9rPVRydWUNCgkNCglpZiBsaW5rVHJhaWxlciAhPSAiIjoNCgkJbWVudS5hcHBlbmQoKCdWZXIgVHJhaWxlcicsICdYQk1DLlBsYXlNZWRpYSglcyknICUgKGxpbmtUcmFpbGVyKSkpDQoJCSNtZW51LmFwcGVuZCgoJ1ZlciBUcmFpbGVyJywgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9MTA1Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyknJShzeXMuYXJndlswXSx1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSwgbGlua1RyYWlsZXIsIHVybGxpYi5xdW90ZV9wbHVzKGljb25pbWFnZSkpKSkNCgkNCgltZW51LmFwcGVuZCgoJ0Rvd25sb2FkJywgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9MTE3Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZzZXJpZU5vbWU9JXMmdGVtcG9yYWRhPSVzJmVwaXNvZGlvPSVzKSclKHN5cy5hcmd2WzBdLHVybGxpYi5xdW90ZV9wbHVzKG5hbWUpLCB1cmxsaWIucXVvdGVfcGx1cyh1cmwpLCB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpLCB1cmxsaWIucXVvdGVfcGx1cyhzZXJpZU5vbWUpLCBzdHIodGVtcG9yYWRhKSwgc3RyKGVwaXNvZGlvKSkpKQ0KCWxpei5hZGRDb250ZXh0TWVudUl0ZW1zKG1lbnUsIHJlcGxhY2VJdGVtcz1UcnVlKQ0KCW9rPXhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9aW50KHN5cy5hcmd2WzFdKSx1cmw9dSxsaXN0aXRlbT1saXosaXNGb2xkZXI9RmFsc2UpDQoJcmV0dXJuIG9rDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCQlGVU5DT0VTIEpBIEZFSVRBUwkJCQkJCQkJICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQpkZWYgYWJyaXJOYWRhKCk6DQoJeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxKSIpDQoJDQpkZWYgYWRkRGlyKG5hbWUsdXJsLHNlbmhhLG1vZGUsZXN0aWxvLGljb25pbWFnZSx0aXBvLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLGRhdGFfdXNlcixmYW5hcnQscGFzdGE9VHJ1ZSx0b3RhbD0xKToNCglpZih0aXBvID09ICdwZXNxdWlzYScgYW5kIHRpcG8gPT0gJ2xpbXBhcmNhY2hlJyBhbmQgdGlwbyA9PSAnbGltcGFydHVkbycpOgkJCQkNCgkJdT1zeXMuYXJndlswXSsiP3VybD0iK3VybGxpYi5xdW90ZV9wbHVzKHVybCkrIiZtb2RlPSIrc3RyKG1vZGUpKyImdGlwb2xvZ2lhPSIrc3RyKHRpcG8pKyImdGlwb191c2VyPSIrc3RyKHRpcG9fdXNlcikrIiZzZXJ2aWRvcl91c2VyPSIrc3RyKHNlcnZpZG9yX3VzZXIpDQoJZWxzZToNCgkJdT1zeXMuYXJndlswXSsiP3VybD0iK3VybGxpYi5xdW90ZV9wbHVzKHVybCkrIiZtb2RlPSIrc3RyKG1vZGUpKyImbmFtZT0iK3VybGxpYi5xdW90ZV9wbHVzKG5hbWUpKyImc2VuaGE9IitzdHIoc2VuaGEpKyImZXN0aWxvPSIrdXJsbGliLnF1b3RlX3BsdXMoZXN0aWxvKSsiJnRpcG9sb2dpYT0iK3N0cih0aXBvKSsiJnRpcG9fdXNlcj0iK3N0cih0aXBvX3VzZXIpKyImc2Vydmlkb3JfdXNlcj0iK3N0cihzZXJ2aWRvcl91c2VyKSsiJmRhdGFfdXNlcj0iK3N0cihkYXRhX3VzZXIpKyImZmFuYXJ0PSIrc3RyKGZhbmFydCkNCglvaz1UcnVlDQoJbGl6PXhibWNndWkuTGlzdEl0ZW0obmFtZSwgaWNvbkltYWdlPWljb25pbWFnZSwgdGh1bWJuYWlsSW1hZ2U9aWNvbmltYWdlKQ0KCWxpei5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJywgZmFuYXJ0KQ0KCWxpei5zZXRBcnQoeydmYW5hcnQnOiBmYW5hcnR9KQ0KCSNsaXouc2V0QXJ0KHsnZmFuYXJ0Jzogb3MucGF0aC5qb2luKF9fQVJUX0ZPTERFUl9fLCBfX1NLSU5fXywgJ2Z1bmRvX2FkZG9uLnBuZycpfSkNCglvaz14Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPWludChzeXMuYXJndlsxXSksdXJsPXUsbGlzdGl0ZW09bGl6LGlzRm9sZGVyPXBhc3RhLHRvdGFsSXRlbXM9dG90YWwpDQoJcmV0dXJuIG9rDQoJDQpkZWYgYWRkRm9sZGVyKG5hbWUsdXJsLG1vZGUsaWNvbmltYWdlLGZvbGRlcik6DQoJdT1zeXMuYXJndlswXSsiP3VybD0iK3VybGxpYi5xdW90ZV9wbHVzKHVybCkrIiZtb2RlPSIrc3RyKG1vZGUpKyImbmFtZT0iK3VybGxpYi5xdW90ZV9wbHVzKG5hbWUpDQoJb2s9VHJ1ZQ0KCWxpej14Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT1pY29uaW1hZ2UsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCglsaXouc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScsIGljb25pbWFnZSkNCglvaz14Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPWludChzeXMuYXJndlsxXSksdXJsPXUsbGlzdGl0ZW09bGl6LGlzRm9sZGVyPWZvbGRlcikNCglyZXR1cm4gb2sNCg0KZGVmIGFkZExpbmtDYW5hbChuYW1lLHVybCxpY29uaW1hZ2UsaWRjYW5hbCxpZF9wKToNCglpbmZvTGFiZWxzc3NzID0geyJ0aXRsZSI6IG5hbWUsICJnZW5yZSI6ICdBbGwnfQ0KCW9rPVRydWUNCgljbT1bXQ0KCQ0KCWlmKGlkY2FuYWwgIT0gJzAwMDEnKToNCgkJY20uYXBwZW5kKCgnVmVyIHByb2dyYW1hw6fDo28nLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT0zMSZuYW1lPSVzJnVybD0lcyZpY29uaW1hZ2U9JXMmaWRDYW5hbD0lcyZpZGZmQ2FuYWw9JXMpJyUoc3lzLmFyZ3ZbMF0sdXJsbGliLnF1b3RlX3BsdXMobmFtZSksIHVybGxpYi5xdW90ZV9wbHVzKHVybCksIHVybGxpYi5xdW90ZV9wbHVzKGljb25pbWFnZSksIGlkQ2FuYWwsIGlkX3ApKSkNCgkNCglsaXogPSB4Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT1pY29uaW1hZ2UsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCgkjbGl6LnNldFByb3BlcnR5KCdmYW5hcnRfaW1hZ2UnLCBmYW5hcnQpDQoJI2xpei5zZXRBcnQoeydmYW5hcnQnOiBmYW5hcnR9KQ0KCWxpei5zZXRJbmZvKCB0eXBlPSJWaWRlbyIsIGluZm9MYWJlbHM9aW5mb0xhYmVsc3NzcykNCglsaXouYWRkQ29udGV4dE1lbnVJdGVtcyhjbSwgcmVwbGFjZUl0ZW1zPUZhbHNlKQ0KCWxpei5zZXRQcm9wZXJ0eSgnSXNQbGF5YWJsZScsICd0cnVlJykNCgl1ID0gc3lzLmFyZ3ZbMF0gKyAiP3VybD0iICsgdXJsbGliLnF1b3RlX3BsdXModXJsKSArICImbW9kZT0zMzM0Jm5hbWU9IiArIHVybGxpYi5xdW90ZV9wbHVzKG5hbWUpICsgIiZpY29uaW1hZ2U9IiArIHVybGxpYi5xdW90ZV9wbHVzKGljb25pbWFnZSkrIiZkYXRhX3VzZXI9IitzdHIoaWRjYW5hbCkNCglvaz14Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPWludChzeXMuYXJndlsxXSksIHVybD11LCBsaXN0aXRlbT1saXopDQoJcmV0dXJuIG9rDQoJDQpkZWYgYWRkTGluayhuYW1lLHVybCxpY29uaW1hZ2UsaWRDYW5hbCxzcnRmaWxtLGRlc2NyaWNhbyx0aXBvLHRpcG9fdXNlcixpZF9wLGluZm9MYWJlbHNzc3MsZmFuYXJ0LHRpcHBwcCxhZHVsdG9zPUZhbHNlLHRvdGFsPTEpOg0KCW9rPVRydWUNCgljbT1bXQ0KCQ0KCWlmIHRpcG8gIT0gJ1ByYWlhJyBhbmQgdGlwbyAhPSAnUHJvZ3JhbWFzVFYnIGFuZCB0aXBvICE9ICdGaWxtZScgYW5kIHRpcG8gIT0gJ1NlcmllJzoNCgkJY20uYXBwZW5kKCgnVmVyIHByb2dyYW1hw6fDo28nLCAnWEJNQy5SdW5QbHVnaW4oJXM/bW9kZT0zMSZuYW1lPSVzJnVybD0lcyZpY29uaW1hZ2U9JXMmaWRDYW5hbD0lcyZpZGZmQ2FuYWw9JXMpJyUoc3lzLmFyZ3ZbMF0sdXJsbGliLnF1b3RlX3BsdXMobmFtZSksIHVybGxpYi5xdW90ZV9wbHVzKHVybCksIHVybGxpYi5xdW90ZV9wbHVzKGljb25pbWFnZSksIGlkQ2FuYWwsIGlkX3ApKSkNCgkNCglsaXogPSB4Ym1jZ3VpLkxpc3RJdGVtKG5hbWUsIGljb25JbWFnZT1pY29uaW1hZ2UsIHRodW1ibmFpbEltYWdlPWljb25pbWFnZSkNCglsaXouc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScsIGZhbmFydCkNCglsaXouc2V0QXJ0KHsnZmFuYXJ0JzogZmFuYXJ0fSkNCglsaXouc2V0SW5mbyggdHlwZT0iVmlkZW8iLCBpbmZvTGFiZWxzPWluZm9MYWJlbHNzc3MpDQoJbGl6LmFkZENvbnRleHRNZW51SXRlbXMoY20sIHJlcGxhY2VJdGVtcz1GYWxzZSkNCgkNCgljYW5haXNwcm9wcmlvcyA9IEZhbHNlDQoJDQoJdXJsdmVyaWZpY2EgPSB1cmwuc3BsaXQoJy50cycpDQoJdG90YWx2ZXIgPSBsZW4odXJsdmVyaWZpY2EpDQoJaWYgdG90YWx2ZXIgIT0gMToNCgkJY2FuYWlzcHJvcHJpb3MgPSBUcnVlOw0KCQkNCglpZiAnYWNlc3RyZWFtOi8vJyBpbiB1cmw6DQoJCWNhbmFpc3Byb3ByaW9zID0gVHJ1ZTsNCgkNCglpZiBjYW5haXNwcm9wcmlvcyA9PSBGYWxzZToNCgkJdXJsdmVyaWZpY2EyID0gdXJsLnNwbGl0KCcubTN1OCcpDQoJCXRvdGFsdmVyMiA9IGxlbih1cmx2ZXJpZmljYTIpDQoJCWlmIHRvdGFsdmVyMiAhPSAxOg0KCQkJY2FuYWlzcHJvcHJpb3MgPSBUcnVlOw0KCQ0KCWlmIHRpcG8gPT0gJ1Byb2dyYW1hc1RWJyBvciB0aXBvID09ICdQcmFpYScgb3IgdGlwbyA9PSAnRmlsbWUnIG9yIHRpcG8gPT0gJ1NlcmllJzoNCgkJdSA9IHN5cy5hcmd2WzBdICsgIj91cmw9IiArIHVybGxpYi5xdW90ZV9wbHVzKHVybCkgKyAiJm1vZGU9MTA1Jm5hbWU9IiArIHVybGxpYi5xdW90ZV9wbHVzKG5hbWUpICsgIiZpY29uaW1hZ2U9IiArIHVybGxpYi5xdW90ZV9wbHVzKGljb25pbWFnZSkNCgllbHNlOg0KCQlpZiBjYW5haXNwcm9wcmlvcyA9PSBGYWxzZToNCgkJCXUgPSBzeXMuYXJndlswXSArICI/dXJsPSIgKyB1cmxsaWIucXVvdGVfcGx1cyh1cmwpICsgIiZtb2RlPTEwNSZuYW1lPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSArICImaWNvbmltYWdlPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpDQoJCWVsc2U6DQoJCQlpZiAnYWNlc3RyZWFtOi8vJyBpbiB1cmw6DQoJCQkJcmVpemluaG8gPSAnJw0KCQkJZWxzZToNCgkJCQlsaXouc2V0UHJvcGVydHkoJ0lzUGxheWFibGUnLCAndHJ1ZScpDQoJCQkNCgkJCXUgPSBzeXMuYXJndlswXSArICI/dXJsPSIgKyB1cmxsaWIucXVvdGVfcGx1cyh1cmwpICsgIiZtb2RlPTEwNiZuYW1lPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSArICImaWNvbmltYWdlPSIgKyB1cmxsaWIucXVvdGVfcGx1cyhpY29uaW1hZ2UpDQoJDQoJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLCB1cmw9dSwgbGlzdGl0ZW09bGl6KQ0KCXJldHVybiBvaw0KDQpkZWYgYWJyaXJfdXJsKHVybCwgcG9zdD1Ob25lLCBoZWFkZXI9Tm9uZSwgY29kZT1GYWxzZSwgZXJybz1GYWxzZSk6DQoJaWYgaGVhZGVyID09IE5vbmU6DQoJCWhlYWRlciA9IGhlYWRlcnMNCglpZiBwb3N0Og0KCQlyZXEgPSB1cmxsaWIyLlJlcXVlc3QodXJsLCBkYXRhPXBvc3QsIGhlYWRlcnM9aGVhZGVyKQ0KCWVsc2U6DQoJCXJlcSA9IHVybGxpYjIuUmVxdWVzdCh1cmwsIGhlYWRlcnM9aGVhZGVyKQ0KCXRyeToNCgkJcmVzcG9uc2UgPSB1cmxsaWIyLnVybG9wZW4ocmVxKQ0KCWV4Y2VwdCB1cmxsaWIyLkhUVFBFcnJvciBhcyByZXNwb25zZToNCgkJaWYgZXJybyA9PSBUcnVlOg0KCQkJcmV0dXJuIHN0cihyZXNwb25zZS5jb2RlKSwgImFzZCINCglsaW5rPXJlc3BvbnNlLnJlYWQoKQ0KCQ0KCWlmICdqdWRpY2lhbCBibGJsYmxibGJsJyBpbiBsaW5rOg0KCQlyZXR1cm4gJ0ROUycNCglpZiBjb2RlOg0KCQlyZXR1cm4gc3RyKHJlc3BvbnNlLmNvZGUpLCBsaW5rDQoNCglyZXNwb25zZS5jbG9zZSgpDQoJcmV0dXJuIGxpbmsNCg0KZGVmIGFkZExpbmsyKG5hbWUsdXJsLGljb25pbWFnZSk6DQoJb2s9VHJ1ZQ0KCWxpeiA9IHhibWNndWkuTGlzdEl0ZW0obmFtZSwgaWNvbkltYWdlPWljb25pbWFnZSwgdGh1bWJuYWlsSW1hZ2U9aWNvbmltYWdlKQ0KCWxpei5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJywgaWNvbmltYWdlKQ0KCWxpei5zZXRBcnQoeydmYW5hcnQnOiBpY29uaW1hZ2V9KQ0KCWxpei5zZXRJbmZvKCB0eXBlPSJWaWRlbyIsIGluZm9MYWJlbHM9eyAiVGl0bGUiOiBuYW1lIH0pDQoJbGl6LnNldFByb3BlcnR5KCdJc1BsYXlhYmxlJywgJ3RydWUnKQ0KCXUgPSBzeXMuYXJndlswXSArICI/dXJsPSIgKyB1cmwgKyAiJm1vZGU9MTA2Jm5hbWU9IiArIG5hbWUgKyAiJmljb25pbWFnZT0iICsgaWNvbmltYWdlDQoJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLCB1cmw9dSwgbGlzdGl0ZW09bGl6KQ0KCXJldHVybiBvaw0KDQpkZWYgcGxheV9tdWx0X2NhbmFsKGFyZywgaWNvbiwgbm9tZSk6DQoJdXJsY2hhbWEgPSBhcmcuc3BsaXQoJzs7OycpDQoJdG90YWwyID0gbGVuKHVybGNoYW1hKQ0KCXVybGNvcnJlY3RvID0gJycNCglpZiB0b3RhbDIgPT0gMToNCgkJdXJsY29ycmVjdG8gPSBhcmcucmVwbGFjZSgnIHJ0bXAnLCdydG1wJykucmVwbGFjZSgnIHJ0c3AnLCdydHNwJykucmVwbGFjZSgnIGh0dHAnLCdodHRwJykucmVwbGFjZSgndXRpbGl6YWRvcmxpdmVpdCcsX19BRERPTl9fLmdldFNldHRpbmcoImxvZ2luX25hbWUiKSkucmVwbGFjZSgnc2VuaGFsaXZlaXQnLF9fQURET05fXy5nZXRTZXR0aW5nKCJsb2dpbl9wYXNzd29yZCIpKQ0KCWVsc2U6DQoJCW5ldCA9IE5ldCgpDQoJCW5ldC5zZXRfY29va2llcyhfX0NPT0tJRV9GSUxFX18pDQoJCWRhZG9zID0geyd1cmwnOiB1cmxjaGFtYVsxXSwgJ2NhbmFsJzogdXJsY2hhbWFbMF19DQoJCWNvZGlnb19mb250ZSA9IG5ldC5odHRwX1BPU1QoX19TSVRFX18rJ3NlYXJjaHVybC5waHAnLGZvcm1fZGF0YT1kYWRvcyxoZWFkZXJzPV9fSEVBREVSU19fKS5jb250ZW50DQoJCWVsZW1zID0gRVQuZnJvbXN0cmluZyhjb2RpZ29fZm9udGUpDQoJCWZvciBjaGlsZCBpbiBlbGVtczoNCgkJCWlmKGNoaWxkLnRhZyA9PSAnaW5mbycpOg0KCQkJCWZvciBkIGluIGNoaWxkOg0KCQkJCQlpZihkLnRhZyA9PSAndXJsJyk6DQoJCQkJCQl1cmxjb3JyZWN0byA9IGQudGV4dA0KCQ0KCSNfX0FMRVJUQV9fKCdMaXZlIXQgVFYnLCAnVXJsOiAnK3VybGNvcnJlY3RvKQ0KCQ0KCXBsYXlsaXN0ID0geGJtYy5QbGF5TGlzdCh4Ym1jLlBMQVlMSVNUX1ZJREVPKQ0KCXBsYXlsaXN0LmNsZWFyKCkNCglsaXN0aXRlbSA9IHhibWNndWkuTGlzdEl0ZW0obm9tZSwgdGh1bWJuYWlsSW1hZ2U9aWNvbmltYWdlKQ0KCWxpc3RpdGVtLnNldEluZm8oJ3ZpZGVvJywgeydUaXRsZSc6IG5vbWV9KQ0KCXBsYXlsaXN0LmFkZCh1cmw9dXJsY29ycmVjdG8sIGxpc3RpdGVtPWxpc3RpdGVtLCBpbmRleD0xKQ0KCXhibWMuUGxheWVyKCkucGxheShwbGF5bGlzdCkNCg0KZGVmIHBsYXlfY2FuYWwoYXJnLCBpY29uLCBub21lKToNCglsaXN0aXRlbSA9IHhibWNndWkuTGlzdEl0ZW0oIGxhYmVsID0gc3RyKG5vbWUpLCBpY29uSW1hZ2UgPSBpY29uLCB0aHVtYm5haWxJbWFnZSA9IGljb24sIHBhdGg9YXJnICkNCglsaXN0aXRlbS5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJywgaWNvbikNCglsaXN0aXRlbS5zZXRBcnQoeydmYW5hcnQnOiBpY29ufSkNCglsaXN0aXRlbS5zZXRQcm9wZXJ0eSgnbWltZXR5cGUnLCAndmlkZW8veC1tc3ZpZGVvJykNCglsaXN0aXRlbS5zZXRJbmZvKHR5cGU9IlZpZGVvIiwgaW5mb0xhYmVscz17ICJUaXRsZSI6IG5vbWUgfSkNCglpZiAnYWNlc3RyZWFtOi8vJyBpbiBhcmc6DQoJCWZyb20gcmVzb3VyY2VzLmxpYi5hY2Vjb3JlIGltcG9ydCBUU2VuZ2luZSBhcyB0c2VuZ2luZQ0KCQl4Ym1jLmV4ZWN1dGVidWlsdGluKCdBY3Rpb24oU3RvcCknKQ0KCQlsb2NrX2ZpbGUgPSB4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly90ZW1wLycrICd0cy5sb2NrJykNCgkJaWYgeGJtY3Zmcy5leGlzdHMobG9ja19maWxlKToNCgkJCXhibWN2ZnMuZGVsZXRlKGxvY2tfZmlsZSkNCgkJYWNlcG9ydD02MjA2Mg0KCQljaGlkPWFyZy5yZXBsYWNlKCdhY2VzdHJlYW06Ly8nLCcnKS5yZXBsYWNlKCd0czovLycsJycpDQoJCVRTUGxheWVyID0gdHNlbmdpbmUoKQ0KCQlvdXQgPSBOb25lDQoJCWlmIGNoaWQuZmluZCgnaHR0cDovLycpID09IC0xIGFuZCBjaGlkLmZpbmQoJy50b3JyZW50JykgPT0gLTE6DQoJCQlvdXQgPSBUU1BsYXllci5sb2FkX3RvcnJlbnQoY2hpZCwnUElEJyxwb3J0PWFjZXBvcnQpDQoJCWVsaWYgY2hpZC5maW5kKCdodHRwOi8vJykgPT0gLTEgYW5kIGNoaWQuZmluZCgnLnRvcnJlbnQnKSAhPSAtMToNCgkJCW91dCA9IFRTUGxheWVyLmxvYWRfdG9ycmVudChjaGlkLCdUT1JSRU5UJyxwb3J0PWFjZXBvcnQpDQoJCWVsc2U6DQoJCQlvdXQgPSBUU1BsYXllci5sb2FkX3RvcnJlbnQoY2hpZCwnVE9SUkVOVCcscG9ydD1hY2Vwb3J0KQ0KCQlpZiBvdXQgPT0gJ09rJzoNCgkJCVRTUGxheWVyLnBsYXlfdXJsX2luZCgwLG5vbWUgKyAnICgnICsgY2hpZCArICcpJyxpY29uLGljb24pDQoJCQlUU1BsYXllci5lbmQoKQ0KCQkJcmV0dXJuDQoJCWVsc2U6CQ0KCQkJX19BTEVSVEFfXygnTGl2ZSF0IFRWJywgJ0Vycm8gYW8gYWJyaXIgbyBjYW5hbCBBY2VzdHJlYW0uICcpDQoJCQlUU1BsYXllci5lbmQoKQ0KCQkJcmV0dXJuCQ0KCWVsc2U6DQoJCXhibWNwbHVnaW4uc2V0UmVzb2x2ZWRVcmwoaW50KHN5cy5hcmd2WzFdKSwgVHJ1ZSwgbGlzdGl0ZW0pDQoNCmRlZiBhZGREaXIyKG5hbWUsdXJsLG1vZGUsbW9kZTIsaWNvbmltYWdlLHBhZ2luYT0xLHRpcG89Tm9uZSxpbmZvTGFiZWxzPU5vbmUscG9zdGVyPU5vbmUsdmlzdG89RmFsc2UpOg0KCWlmIGluZm9MYWJlbHM6IGluZm9MYWJlbHNBdXggPSBpbmZvTGFiZWxzDQoJZWxzZTogaW5mb0xhYmVsc0F1eCA9IHsnVGl0bGUnOiBuYW1lfQ0KCWZhbmFydCA9ICcnDQoJaWYgcG9zdGVyOiBmYW5hcnQgPSBwb3N0ZXINCgllbHNlOiBmYW5hcnQgPSBpY29uaW1hZ2UNCgkNCgl0cnk6DQoJCW5hbWUgPSBuYW1lLmVuY29kZSgndXRmLTgnKQ0KCWV4Y2VwdDoNCgkJbmFtZSA9IG5hbWUNCg0KCXU9c3lzLmFyZ3ZbMF0rIj91cmw9Iit1cmxsaWIucXVvdGVfcGx1cyh1cmwpKyImbW9kbz0iK21vZGUyKyImbW9kZT0iK3N0cihtb2RlKSsiJm5hbWU9Iit1cmxsaWIucXVvdGVfcGx1cyhuYW1lKQ0KCQ0KCW9rPVRydWUNCg0KCSNmYW5hcnQgPSBfX0ZBTkFSVF9fDQoNCglpZiB0aXBvID09ICdmaWxtZSc6DQoJCSNmYW5hcnQgPSBwb3N0ZXJBdXgNCgkJeGJtY3BsdWdpbi5zZXRDb250ZW50KGludChzeXMuYXJndlsxXSksICdNb3ZpZXMnKQ0KCWVsaWYgdGlwbyA9PSAnc2VyaWUnOg0KCQkjZmFuYXJ0ID0gcG9zdGVyQXV4DQoJCXhibWNwbHVnaW4uc2V0Q29udGVudChpbnQoc3lzLmFyZ3ZbMV0pLCAndHZzaG93cycpDQoJZWxpZiB0aXBvID09ICdlcGlzb2Rpbyc6DQoJCSNmYW5hcnQgPSBwb3N0ZXJBdXgNCgkJeGJtY3BsdWdpbi5zZXRDb250ZW50KGludChzeXMuYXJndlsxXSksICdlcGlzb2RlcycpDQoJZWxzZToNCgkJaWYgbmFtZSAhPSAnUmVmcmVzaCc6DQoJCQl4Ym1jcGx1Z2luLnNldENvbnRlbnQoaW50KHN5cy5hcmd2WzFdKSwgJ01vdmllcycpDQoJDQoJb3ZlcmxheSA9IDYNCglwbGF5Y291bnQgPSAwDQoJDQoJaW5mb0xhYmVsc0F1eFsib3ZlcmxheSJdID0gb3ZlcmxheQ0KCWluZm9MYWJlbHNBdXhbInBsYXljb3VudCJdID0gcGxheWNvdW50DQoJDQoJbGl6PXhibWNndWkuTGlzdEl0ZW0obmFtZSwgaWNvbkltYWdlPWljb25pbWFnZSwgdGh1bWJuYWlsSW1hZ2U9aWNvbmltYWdlKQ0KCWxpei5zZXRQcm9wZXJ0eSgnZmFuYXJ0X2ltYWdlJywgZmFuYXJ0KQ0KCWxpei5zZXRBcnQoeydmYW5hcnQnOiBmYW5hcnR9KQ0KCWxpei5zZXRJbmZvKCB0eXBlPSJWaWRlbyIsIGluZm9MYWJlbHM9aW5mb0xhYmVsc0F1eCApDQoNCglvaz14Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPWludChzeXMuYXJndlsxXSksdXJsPXUsbGlzdGl0ZW09bGl6LGlzRm9sZGVyPVRydWUpDQoJcmV0dXJuIG9rDQoNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCSAgREVGSU5JTkNPRVMJCQkJCQkJCQkJICAjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwkNCmRlZiByZXR1cm5lc3RpbG8oZXN0aWxvbm92byk6DQoJX19lc3RpbGFnZW1fXyA9ICIiDQoJDQoJaWYgZXN0aWxvbm92byA9PSAiTGlzdGEiOg0KCQlfX2VzdGlsYWdlbV9fID0iQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwKSINCgllbGlmIGVzdGlsb25vdm8gPT0gIkxpc3RhIEdyYW5kZSI6DQoJCV9fZXN0aWxhZ2VtX18gPSAiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxKSINCgllbGlmIGVzdGlsb25vdm8gPT0gIk1pbmlhdHVyYSI6DQoJCV9fZXN0aWxhZ2VtX18gPSJDb250YWluZXIuU2V0Vmlld01vZGUoNTAwKSINCgllbGlmIGVzdGlsb25vdm8gPT0gIlBvc3RlcnMiOg0KCQlfX2VzdGlsYWdlbV9fID0iQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMSkiDQoJZWxpZiBlc3RpbG9ub3ZvID09ICJGYW5hcnQiOg0KCQlfX2VzdGlsYWdlbV9fID0gIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDgpIg0KCWVsaWYgZXN0aWxvbm92byA9PSAiTWVkaWEgSW5mbyAxIjoNCgkJX19lc3RpbGFnZW1fXyA9ICJDb250YWluZXIuU2V0Vmlld01vZGUoNTA0KSINCgllbGlmIGVzdGlsb25vdm8gPT0gIk1lZGlhIEluZm8gMiI6DQoJCV9fZXN0aWxhZ2VtX18gPSAiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMykiDQoJZWxpZiBlc3RpbG9ub3ZvID09ICJNZWRpYSBJbmZvIDMiOg0KCQlfX2VzdGlsYWdlbV9fID0gIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MTUpIg0KCXJldHVybiBfX2VzdGlsYWdlbV9fDQoJDQpkZWYgdmlzdGFfQ2FuYWlzKCk6DQoJb3BjYW8gPSBfX0FERE9OX18uZ2V0U2V0dGluZygnY2FuYWlzVmlldycpDQoJaWYgb3BjYW8gPT0gJzAnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTApIikNCgllbGlmIG9wY2FvID09ICcxJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxKSIpDQoJZWxpZiBvcGNhbyA9PSAnMic6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDApIikNCgllbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOSkiKQ0KCWVsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA4KSIpDQoJZWxpZiBvcGNhbyA9PSAnNCc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDQpIikNCgllbGlmIG9wY2FvID09ICc1JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMykiKQ0KCWVsaWYgb3BjYW8gPT0gJzYnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTE1KSIpDQoJZWxpZiBvcGNhbyA9PSAnNyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1NSkiKQ0KDQpkZWYgdmlzdGFfQ2FuYWlzX0xpc3RhKCk6DQoJb3BjYW8gPSBfX0FERE9OX18uZ2V0U2V0dGluZygnY2FuYWlzVmlldzInKQ0KCWlmIG9wY2FvID09ICcwJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwKSIpDQoJZWxpZiBvcGNhbyA9PSAnMSc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MSkiKQ0KCWVsaWYgb3BjYW8gPT0gJzInOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTAwKSIpDQoJZWxpZiBvcGNhbyA9PSAnMyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDkpIikNCgllbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOCkiKQ0KCWVsaWYgb3BjYW8gPT0gJzQnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA0KSIpDQoJZWxpZiBvcGNhbyA9PSAnNSc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDMpIikNCgllbGlmIG9wY2FvID09ICc2JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxNSkiKQ0KCWVsaWYgb3BjYW8gPT0gJzcnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTUpIikNCg0KZGVmIGFicmlyRGVmaW5pbmNvZXMoKToNCglfX0FERE9OX18ub3BlblNldHRpbmdzKCkNCglhZGREaXIoJ0VudHJhciBub3ZhbWVudGUnLCAndXJsJywgTm9uZSwgTm9uZSwgJ01pbmlhdHVyYScsIF9fU0lURUFkZG9uX18rIkltYWdlbnMvcmV0cm9jZWRlci5wbmciLCcnLCcnLCcnLCcnLG9zLnBhdGguam9pbihfX0FSVF9GT0xERVJfXywgX19TS0lOX18sICdmdW5kb19hZGRvbi5wbmcnKSkNCgl2aXN0YV9tZW51KCkNCg0KZGVmIGFicmlyRGVmaW5pbmNvZXNNZXNtbygpOg0KCV9fQURET05fXy5vcGVuU2V0dGluZ3MoKQ0KCXZpc3RhX21lbnUoKQ0KDQpkZWYgdmlzdGFfbWVudSgpOg0KCW9wY2FvID0gX19BRERPTl9fLmdldFNldHRpbmcoJ21lbnVWaWV3JykNCglpZiBvcGNhbyA9PSAnMCc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MCkiKQ0KCWVsaWYgb3BjYW8gPT0gJzEnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTEpIikNCgllbGlmIG9wY2FvID09ICcyJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMCkiKQ0KCWVsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA5KSIpDQoJZWxpZiBvcGNhbyA9PSAnMyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDgpIikNCgllbGlmIG9wY2FvID09ICc0JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwNCkiKQ0KCWVsaWYgb3BjYW8gPT0gJzUnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTAzKSIpDQoJZWxpZiBvcGNhbyA9PSAnNic6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MTUpIikNCgllbGlmIG9wY2FvID09ICc3JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KSIpDQoNCmRlZiB2aXN0YV9maWxtZXNTZXJpZXMoKToNCglvcGNhbyA9IF9fQURET05fXy5nZXRTZXR0aW5nKCdmaWxtZXNTZXJpZXNWaWV3JykNCglpZiBvcGNhbyA9PSAnMCc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MCkiKQ0KCWVsaWYgb3BjYW8gPT0gJzEnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTEpIikNCgllbGlmIG9wY2FvID09ICcyJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMCkiKQ0KCWVsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA5KSIpDQoJZWxpZiBvcGNhbyA9PSAnMyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDgpIikNCgllbGlmIG9wY2FvID09ICc0JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwNCkiKQ0KCWVsaWYgb3BjYW8gPT0gJzUnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTAzKSIpDQoJZWxpZiBvcGNhbyA9PSAnNic6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MTUpIikNCgllbGlmIG9wY2FvID09ICc3JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDU1KSIpDQoNCg0KZGVmIHZpc3RhX3RlbXBvcmFkYXMoKToNCglvcGNhbyA9IF9fQURET05fXy5nZXRTZXR0aW5nKCd0ZW1wb3JhZGFzVmlldycpDQoJaWYgb3BjYW8gPT0gJzAnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTApIikNCgllbGlmIG9wY2FvID09ICcxJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxKSIpDQoJZWxpZiBvcGNhbyA9PSAnMic6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDApIikNCgllbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOSkiKQ0KCWVsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA4KSIpDQoJZWxpZiBvcGNhbyA9PSAnNCc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDQpIikNCgllbGlmIG9wY2FvID09ICc1JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMykiKQ0KCWVsaWYgb3BjYW8gPT0gJzYnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTE1KSIpDQoJZWxpZiBvcGNhbyA9PSAnNyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1NSkiKQ0KDQpkZWYgdmlzdGFfZXBpc29kaW9zKCk6DQoJb3BjYW8gPSBfX0FERE9OX18uZ2V0U2V0dGluZygnZXBpc29kaW9zVmlldycpDQoJaWYgb3BjYW8gPT0gJzAnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTApIikNCgllbGlmIG9wY2FvID09ICcxJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUxKSIpDQoJZWxpZiBvcGNhbyA9PSAnMic6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDApIikNCgllbGlmIG9wY2FvID09ICczJzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwOSkiKQ0KCWVsaWYgb3BjYW8gPT0gJzMnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTA4KSIpDQoJZWxpZiBvcGNhbyA9PSAnNCc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDQpIikNCgllbGlmIG9wY2FvID09ICc1JzogeGJtYy5leGVjdXRlYnVpbHRpbigiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwMykiKQ0KCWVsaWYgb3BjYW8gPT0gJzYnOiB4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuU2V0Vmlld01vZGUoNTE1KSIpDQoJZWxpZiBvcGNhbyA9PSAnNyc6IHhibWMuZXhlY3V0ZWJ1aWx0aW4oIkNvbnRhaW5lci5TZXRWaWV3TW9kZSg1NSkiKQ0KDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCiMJCQkJCQkJCQkJCQlHRVQgUEFSQU1TCQkJCQkJCQkJCQkJICMNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwkJICANCmRlZiBnZXRfcGFyYW1zKCk6DQoJcGFyYW09W10NCglwYXJhbXN0cmluZz1zeXMuYXJndlsyXQ0KCWlmIGxlbihwYXJhbXN0cmluZyk+PTI6DQoJCXBhcmFtcz1zeXMuYXJndlsyXQ0KCQljbGVhbmVkcGFyYW1zPXBhcmFtcy5yZXBsYWNlKCc/JywnJykNCgkJaWYgKHBhcmFtc1tsZW4ocGFyYW1zKS0xXT09Jy8nKTogcGFyYW1zPXBhcmFtc1swOmxlbihwYXJhbXMpLTJdDQoJCXBhaXJzb2ZwYXJhbXM9Y2xlYW5lZHBhcmFtcy5zcGxpdCgnJicpDQoJCXBhcmFtPXt9DQoJCWZvciBpIGluIHJhbmdlKGxlbihwYWlyc29mcGFyYW1zKSk6DQoJCQlzcGxpdHBhcmFtcz17fQ0KCQkJc3BsaXRwYXJhbXM9cGFpcnNvZnBhcmFtc1tpXS5zcGxpdCgnPScpDQoJCQlpZiAobGVuKHNwbGl0cGFyYW1zKSk9PTI6IHBhcmFtW3NwbGl0cGFyYW1zWzBdXT1zcGxpdHBhcmFtc1sxXQ0KCXJldHVybiBwYXJhbQ0KDQoNCnBhcmFtcz1nZXRfcGFyYW1zKCkNCnVybD1Ob25lDQpidWlsZHRpcG89Tm9uZQ0KbmFtZT1Ob25lDQptb2RlPU5vbmUNCmljb25pbWFnZT1Ob25lDQpsaW5rPU5vbmUNCnNlbmhhPU5vbmUNCmVzdGlsbz1Ob25lDQpzcnRmaWxtPU5vbmUNCmlkQ2FuYWw9Tm9uZQ0KaWRmZkNhbmFsPU5vbmUNCnRpcG9sb2dpYT1Ob25lDQpkZXNjcmljYW89Tm9uZQ0KdGlwb191c2VyPU5vbmUNCnNlcnZpZG9yX3VzZXI9Tm9uZQ0KZGF0YV91c2VyPU5vbmUNCnNfc2Vydj1Ob25lDQpzX3VzZXI9Tm9uZQ0Kc19wYXNzPU5vbmUNCmxlZ2VuZGE9Tm9uZQ0KcGFnaW5hPU5vbmUNCnRlbXBvcmFkYT1Ob25lDQplcGlzb2Rpbz1Ob25lDQpzZXJpZU5vbWU9Tm9uZQ0KZmFuYXJ0PU5vbmUNCnRodW1ibmFpbD1Ob25lDQpzdHJlYW1faWQ9Tm9uZQ0KZHVyYXRpb249Tm9uZQ0KDQp0cnk6IGR1cmF0aW9uPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJkdXJhdGlvbiJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHN0cmVhbV9pZD11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sic3RyZWFtX2lkIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogdXJsPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJ1cmwiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBuYW1lPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJuYW1lIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogZXN0aWxvPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJlc3RpbG8iXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBtb2RlPWludChwYXJhbXNbIm1vZGUiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBpY29uaW1hZ2U9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImljb25pbWFnZSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHNlbmhhPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJzZW5oYSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IGlkQ2FuYWw9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImlkQ2FuYWwiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBpZGZmQ2FuYWw9cGFyYW1zWyJpZGZmQ2FuYWwiXQ0KZXhjZXB0OiBwYXNzDQp0cnk6IHNydGZpbG09dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbInNydGZpbG0iXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiB0aXBvbG9naWE9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbInRpcG9sb2dpYSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IGRlc2NyaWNhbz11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1siZGVzY3JpY2FvIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogdGlwb191c2VyPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJ0aXBvX3VzZXIiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBzZXJ2aWRvcl91c2VyPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJzZXJ2aWRvcl91c2VyIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogc19zZXJ2PXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJsb2xzZXJ2Il0pDQpleGNlcHQ6IHBhc3MNCnRyeTogc191c2VyPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJsb2x1c2VyIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogc19wYXNzPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJsb2xwYXNzIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogbGluaz11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sibGluayJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IGxlZ2VuZGE9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbImxlZ2VuZGEiXSkNCmV4Y2VwdDogcGFzcw0KdHJ5OiBuYW1lPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJuYW1lIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogdGVtcG9yYWRhPWludChwYXJhbXNbInRlbXBvcmFkYSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IGVwaXNvZGlvPWludChwYXJhbXNbImVwaXNvZGlvIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogbW9kZT1pbnQocGFyYW1zWyJtb2RlIl0pDQpleGNlcHQ6IHBhc3MNCnRyeTogcGFnaW5hPWludChwYXJhbXNbInBhZ2luYSJdKQ0KZXhjZXB0OiBwYXNzDQp0cnk6IGljb25pbWFnZT11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1siaWNvbmltYWdlIl0pDQpleGNlcHQ6IHBhc3MNCnRyeSA6IHNlcmllTm9tZT11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sic2VyaWVOb21lIl0pDQpleGNlcHQ6IHBhc3MNCnRyeSA6IGJ1aWxkdGlwbz11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1siYnVpbGR0aXBvIl0pDQpleGNlcHQ6IHBhc3MNCnRyeSA6IGZhbmFydD11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1siZmFuYXJ0Il0pDQpleGNlcHQ6IHBhc3MNCnRyeSA6IHRodW1ibmFpbD11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sidGh1bWJuYWlsIl0pDQpleGNlcHQ6IHBhc3MNCnRyeSA6IGRhdGFfdXNlcj11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1siZGF0YV91c2VyIl0pDQpleGNlcHQ6IHBhc3MNCg0KDQoNCg0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQojCQkJCQkJCQkJCQkJCU1PRE9TCQkJCQkJCQkJCQkJCSAjDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCmlmIG1vZGU9PU5vbmUgb3IgdXJsPT1Ob25lIG9yIGxlbih1cmwpPDE6IG1lbnUoKQ0KZWxpZiBtb2RlPT0xOiBsaXN0YXJfZ3J1cG9zKHN0cihuYW1lKSxzdHIodXJsKSxlc3RpbG8sdGlwb2xvZ2lhLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLGZhbmFydCkNCmVsaWYgbW9kZT09MjogbGlzdGFyX2NhbmFpc191cmwoc3RyKG5hbWUpLHN0cih1cmwpLGVzdGlsbyx0aXBvbG9naWEsdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsZmFuYXJ0LGRhdGFfdXNlcikNCmVsaWYgbW9kZT09NDogYnVpbGRMaXZlaXQoYnVpbGR0aXBvKQ0KZWxpZiBtb2RlPT0zOiBsaXN0YXJfZ3J1cG9zX2FkdWx0b3Moc3RyKHVybCksc3RyKHNlbmhhKSxlc3RpbG8sdGlwb2xvZ2lhLHRpcG9fdXNlcixzZXJ2aWRvcl91c2VyLGZhbmFydCkNCmVsaWYgbW9kZT09MTA6IG1pbmhhQ29udGEoc3RyKG5hbWUpLGVzdGlsbykNCmVsaWYgbW9kZT09MjA6IGxpc3RhbWVudXNzZXJpZXMoc3RyKG5hbWUpLHN0cih1cmwpLGVzdGlsbyx0aXBvbG9naWEsdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsaWNvbmltYWdlLGZhbmFydCkNCmVsaWYgbW9kZT09MjE6IGxpc3RhbWVudXNmaWxtZXMoc3RyKG5hbWUpLHN0cih1cmwpLGVzdGlsbyx0aXBvbG9naWEsdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsaWNvbmltYWdlLGZhbmFydCkNCmVsaWYgbW9kZT09MjQ6IGxpc3RhbWVudXNhbmltZXMoc3RyKG5hbWUpLHN0cih1cmwpLGVzdGlsbyx0aXBvbG9naWEsdGlwb191c2VyLHNlcnZpZG9yX3VzZXIsaWNvbmltYWdlLGZhbmFydCkNCmVsaWYgbW9kZT09MjU6IGxpc3RhdHZhcmNoaXZlKHN0cih1cmwpKQ0KZWxpZiBtb2RlPT0yNjogbGlzdGF0dmFyY2hpdmVjYW5haXMoc3RyKG5hbWUpLHN0cmVhbV9pZCxzdHIodXJsKSxkdXJhdGlvbixpY29uaW1hZ2UsZmFuYXJ0KQ0KI2VsaWYgbW9kZT09MjI6IG1lbnVTZXJpZXMoKQ0KI2VsaWYgbW9kZT09MjM6IG1lbnVGaWxtZXMoKQ0KZWxpZiBtb2RlPT0zMTogcHJvZ3JhbWFjYW9fY2FuYWwoaWRDYW5hbCkNCmVsaWYgbW9kZT09MTA1OiBwbGF5X211bHRfY2FuYWwodXJsLCBpY29uaW1hZ2UsIG5hbWUpDQplbGlmIG1vZGU9PTEwNjogcGxheV9jYW5hbCh1cmwsIGljb25pbWFnZSwgbmFtZSkNCmVsaWYgbW9kZT09MTEwOiBtaW5oYUNvbnRhMigpDQplbGlmIG1vZGU9PTExMTogZmlsbWVzKHVybCwgcGFnaW5hKQ0KZWxpZiBtb2RlPT0xMjM6IHNlcmllcyh1cmwpDQplbGlmIG1vZGU9PTExODogZ2V0R2VuZXJvcyh1cmwpDQplbGlmIG1vZGU9PTExOTogZ2V0WWVhcnModXJsKQ0KI2VsaWYgbW9kZT09MTIwOiBwZXNxdWlzYSh1cmwsc2Vydmlkb3JfdXNlcikNCmVsaWYgbW9kZT09MTIxOiBhbm9zKHVybCkNCmVsaWYgbW9kZT09MTIyOiBjYXRlZ29yaWFzKHVybCkNCmVsaWYgbW9kZT09MTEzOiBwbGF5ZXIobmFtZSwgdXJsLCBpY29uaW1hZ2UsIHRlbXBvcmFkYSwgZXBpc29kaW8sIHNlcmllTm9tZSkNCmVsaWYgbW9kZT09MTE0OiBnZXRTZWFzb25zKHVybCkNCmVsaWYgbW9kZT09MTE1OiBnZXRFcGlzb2Rlcyh1cmwpDQplbGlmIG1vZGU9PTExNzogZG93bmxvYWQodXJsLCBuYW1lLCB0ZW1wb3JhZGEsIGVwaXNvZGlvLCBzZXJpZU5vbWUpDQplbGlmIG1vZGU9PTEwMDA6IGFicmlyRGVmaW5pbmNvZXMoKQ0KZWxpZiBtb2RlPT0yMDAwOiBhYnJpck5hZGEoKQ0KZWxpZiBtb2RlPT0zMDAwOiBhYnJpckRlZmluaW5jb2VzTWVzbW8oKQ0KZWxpZiBtb2RlPT0zMzMzOiBhYnJpbTN1Mih1cmwpDQojZWxpZiBtb2RlPT0zMzMzOiBhYnJpbTN1Mih1cmwsZGF0YV91c2VyKQ0KZWxpZiBtb2RlPT0zMzM1OiBleGVjdXRlX2FpbmZvKHVybCkNCmVsaWYgbW9kZT09MzMzNjogc2VjdXJpdHlfY2hlY2sodXJsKQ0KZWxpZiBtb2RlPT0zMzM3OiBkZXRlY3RfbW9kaWZpY2F0aW9uKHVybCkNCmVsaWYgbW9kZT09MzMzODogc3RyZWFtX3ZpZGVvKG5hbWUsdXJsLGljb25pbWFnZSkNCmVsaWYgbW9kZT09MzMzOTogZ2V0X215YWNjb3VudChuYW1lLHVybCxpY29uaW1hZ2UpDQplbGlmIG1vZGU9PTMzNDA6IHJ1bl9jcm9uam9iKG5hbWUsdXJsLGljb25pbWFnZSx0aHVtYm5haWwsZmFuYXJ0KQ0KZWxpZiBtb2RlPT0zMzM0OiBQbGF5VXJsKG5hbWUsdXJsLGljb25pbWFnZSkNCmVsaWYgbW9kZT09NDAwMDogbWluaGFDb250YWJ1aWxkKCkNCmVsaWYgbW9kZT09NTAwMDogQ0xFQVJDQUNIRSgpDQplbGlmIG1vZGU9PTYwMDA6IFBVUkdFUEFDS0FHRVMoKQ0KI2VsaWYgbW9kZT09NzAwMDogbG9naW5QZXNxdWlzYSgpDQplbGlmIG1vZGU9PTgwMDA6IGJ1aWxkTGl2ZWl0KHVybCkNCg0KaWYgbW9kZT09Tm9uZSBvciB1cmw9PU5vbmUgb3IgbGVuKHVybCk8MToNCgl4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KGludChzeXMuYXJndlsxXSksY2FjaGVUb0Rpc2M9RmFsc2UpDQplbHNlOg0KCWlmIG1vZGUgIT03MDAwIGFuZCAgbW9kZSAhPTEyMCBhbmQgbW9kZSAhPTMzMzMgYW5kIG1vZGUgIT0yNiBhbmQgbW9kZSAhPTI3OiANCgkJeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pLGNhY2hlVG9EaXNjPUZhbHNlKQ0KCWVsaWYgbW9kZSA9PSAxMjAgb3IgbW9kZSA9PSA3MDAwOg0KCQlwZXNxdWlzYSh1cmwsc2Vydmlkb3JfdXNlcikNCgkJI2lmIG1vZGUgPSAxMjA6DQoJCSMJcGVzcXVpc2EodXJsLHNlcnZpZG9yX3VzZXIpDQoJCSNlbHNlOg0KCQkjCWxvZ2luUGVzcXVpc2EoKQ0KCWVsc2U6IA0KCQl4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KGludChzeXMuYXJndlsxXSksY2FjaGVUb0Rpc2M9VHJ1ZSk="))